<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>chuhang 技术不宅</title>
  <subtitle>A technology blog for myself.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://chuhang123.github.io/"/>
  <updated>2018-02-22T13:14:39.127Z</updated>
  <id>https://chuhang123.github.io/</id>
  
  <author>
    <name>chuhang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>2017年终总结</title>
    <link href="https://chuhang123.github.io/2018/02/22/2017-year-end-summary/"/>
    <id>https://chuhang123.github.io/2018/02/22/2017-year-end-summary/</id>
    <published>2018-02-22T01:51:59.000Z</published>
    <updated>2018-02-22T13:14:39.127Z</updated>
    
    <content type="html"><![CDATA[<p>2017已经结束,是时候沉下心来仔细想想这一年都学到了什么,收获了多少?回忆年初,已经不能确定是2017年的年初还是2016年的年初 ,所以也确实需要一篇文章来记录总结.<br><a id="more"></a></p>
<h2 id="干了些什么"><a href="#干了些什么" class="headerlink" title="干了些什么?"></a>干了些什么?</h2><ul>
<li>1~4月,负责旅游项目的后台开发,使用的是thinkphp框架开发.由于水平,经验不足,项目最终夭折. 并学习C语言,数据结构,跟着网易云上的一个教程开发了一个简单的管理信息系统. 同时,系统切换到linux.</li>
<li>4~5月,学习java,SpringMvc框架,</li>
<li>5~7月,因为要做一个净水器的项目,学习微信小程序.净水器项目后台api使用刚学习的SpringMvc.生气的是,项目即将完工的时候,甲方不做了.</li>
<li>7~12,负责修改计量项目的一些bug,并根据甲方需求做一些小的点.在这个过程中不断学习angularjs和SpringMvc.并负责国家海洋中心的调研,做了原型.</li>
<li>今年总计写了大约40篇博客,用于记录或总结.</li>
<li>在最后一季度,突然对阅读产生了兴趣,在上课和编程之余,读了这几本书:&lt;&lt;他的国&gt;&gt;,&lt;&lt;移民生活&gt;&gt;,&lt;&lt;生死疲劳&gt;&gt;,&lt;&lt;激荡三十年&gt;&gt;的上下部,&lt;&lt;跌宕一百年&gt;&gt;的上下部,&lt;&lt;浩荡两千年&gt;&gt;,&lt;&lt;红树林&gt;&gt;,&lt;&lt;激荡十年,水大鱼大&gt;&gt;,&lt;&lt;人类群星闪耀时&gt;&gt;,&lt;&lt;蛙&gt;&gt;.</li>
<li>技术性的图书看的有&lt;&lt;人月神话&gt;&gt;（适合产品经理），&lt;&lt;单页ｗｅｂ应用&gt;&gt;,&lt;&lt;ｈｅｂｉｎａｔｅ实战&gt;&gt;等．</li>
<li>今年和对象看了19场电影,每次看电影都是非常开心的,哈哈.</li>
<li>拿到了驾照</li>
</ul>
<h2 id="关于装备"><a href="#关于装备" class="headerlink" title="关于装备"></a>关于装备</h2><p>在年初的时候，由于使用的是ｐｈｐ开发，也没有感觉到我的笔记本在性能上有哪些明显的缺陷，但是自从转到ｊａｖａ开发，使用ｉｄｅａ后，发现ｗｉｎｄｏｗｓ系统太卡，就转到ｕｂｕｎｔｕ系统，发现流畅了很多．后来加上了一４Ｇ的内存条，又把机械硬盘换成了固态硬盘，启动测量项目本来需要几分钟或者几十分钟或者直接卡死，现在只需要几十秒，感觉舒服了好多．后来又使用双屏幕，大屏幕敲代码，小屏幕看效果，感觉敲代码爽了好多．假期由于不能使用双屏幕，才发现好的装备是多么的爽，多么的重要！！！</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>钻研基础知识时，要优先考虑比较厚的书，因为厚说明他讲的更详细一些．而我之前常常因为携带不方便，而抗拒厚的书．</li>
<li>持续学习，长时间的积累，在不知不觉中发现自己确实是进步了．遇到问题更加淡定了．</li>
<li>很高兴自己除了编程，又找到了一个爱好—阅读，希望能坚持下去</li>
<li>今年的状态还是不错的，一直处于学习的状态中，很少睡懒觉，不玩游戏，看书，敲敲代码，上课，陪陪女朋友，看看电影，很开心，很知足，很充实．</li>
</ul>
<h2 id="展望２０１８"><a href="#展望２０１８" class="headerlink" title="展望２０１８"></a>展望２０１８</h2><p>２０１８年唯一的目标就是考上研究生，希望自己和女朋友都能如愿的考上研究生，希望可以像自己期望的那样坚持学习，上半年可以偶尔根据自己的爱好看一些闲书，下半年全力以赴考研．</p>
<p>路漫漫其修远兮，吾将上下而求索．</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;2017已经结束,是时候沉下心来仔细想想这一年都学到了什么,收获了多少?回忆年初,已经不能确定是2017年的年初还是2016年的年初 ,所以也确实需要一篇文章来记录总结.&lt;br&gt;
    
    </summary>
    
      <category term="年终总结" scheme="https://chuhang123.github.io/categories/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="2017" scheme="https://chuhang123.github.io/tags/2017/"/>
    
      <category term="总结" scheme="https://chuhang123.github.io/tags/%E6%80%BB%E7%BB%93/"/>
    
      <category term="年终" scheme="https://chuhang123.github.io/tags/%E5%B9%B4%E7%BB%88/"/>
    
  </entry>
  
  <entry>
    <title>学习闭包</title>
    <link href="https://chuhang123.github.io/2018/02/01/learn-closure/"/>
    <id>https://chuhang123.github.io/2018/02/01/learn-closure/</id>
    <published>2018-02-01T11:22:34.000Z</published>
    <updated>2018-02-01T12:46:39.189Z</updated>
    
    <content type="html"><![CDATA[<p>在js中,有一个叫做垃圾回收器的东西,当函数执行完毕后,管理内存的本地方法会将函数中所创建的所有东西移除,因为通常函数执行完毕,我们不在需要这个函数中的东西了.那么问题来了,如果某个函数执行完毕后,我们仍然需要这个函数中的一个变量的值,应该怎么办呢?闭包是组织垃圾回收期将变量从内存中移除的方法,使我们在函数外面可以访问到该变量.</p>
<a id="more"></a>
<p>闭包有以下两种形式:</p>
<ul>
<li>将变量始终保存在内存中.代码如下:<figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> <span class="comment">&#123;</span></span></div><div class="line">	temp = 123;</div><div class="line">&#125;)<span class="params">()</span>;</div><div class="line"><span class="comment">// 输出123</span></div><div class="line">console.log(temp);</div></pre></td></tr></table></figure>
</li>
</ul>
<p>在上述代码中,因为在test函数中定义变量时没有使用var,所以temp是全局的,所以在函数外,仍然可以正常的输出变量.因为这个变量是一个全局变量,不会被回收.</p>
<ul>
<li>阻止垃圾回收器将变量从内存中移除.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> test = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> name = <span class="string">'mengyunzhi'</span>;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		<span class="attr">age</span>: <span class="number">18</span>,</div><div class="line">		<span class="attr">innerName</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">return</span> name;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="comment">// 输出18</span></div><div class="line"><span class="built_in">console</span>.log(test.age);</div><div class="line"><span class="comment">// 输出mengyunzhi</span></div><div class="line"><span class="built_in">console</span>.log(test.innerName());</div></pre></td></tr></table></figure>
</li>
</ul>
<p>在函数被保存到test对象时,一个闭包就创建了.在函数的外面,我们可以动态的访问age变量和调用innerName函数,阻止了垃圾回收器将变量和函数从内存中移除.</p>
<p>又因为闭包使函数中的变量和方法永久的保存在了内存中,所以我们应该谨慎使用闭包,防止内存的浪费.</p>
<p>参考文献:<br>1.单页web应用,JS从前段到后端.[书籍]<br>2.<a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html" target="_blank" rel="external">学习Javascript闭包（Closure）</a> </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在js中,有一个叫做垃圾回收器的东西,当函数执行完毕后,管理内存的本地方法会将函数中所创建的所有东西移除,因为通常函数执行完毕,我们不在需要这个函数中的东西了.那么问题来了,如果某个函数执行完毕后,我们仍然需要这个函数中的一个变量的值,应该怎么办呢?闭包是组织垃圾回收期将变量从内存中移除的方法,使我们在函数外面可以访问到该变量.&lt;/p&gt;
    
    </summary>
    
      <category term="js" scheme="https://chuhang123.github.io/categories/js/"/>
    
    
      <category term="closureu" scheme="https://chuhang123.github.io/tags/closureu/"/>
    
      <category term="基础" scheme="https://chuhang123.github.io/tags/%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>java找不到连接数据库的jdbc驱动</title>
    <link href="https://chuhang123.github.io/2018/01/12/how-to-solve-ClassNotFoundException/"/>
    <id>https://chuhang123.github.io/2018/01/12/how-to-solve-ClassNotFoundException/</id>
    <published>2018-01-12T01:22:01.000Z</published>
    <updated>2018-01-12T01:29:45.104Z</updated>
    
    <content type="html"><![CDATA[<p>java链接数据库时需要mysql的驱动,但是我们下载驱动之后,应该如何配置呢,才能正确的找到驱动的位置.(ubuntu系统)</p>
<p>报错如下:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">java<span class="selector-class">.lang</span><span class="selector-class">.ClassNotFoundException</span>: com<span class="selector-class">.mysql</span><span class="selector-class">.jdbc</span><span class="selector-class">.Driver</span></div><div class="line">        at java<span class="selector-class">.net</span><span class="selector-class">.URLClassLoader</span><span class="selector-class">.findClass</span>(URLClassLoader<span class="selector-class">.java</span>:<span class="number">381</span>)</div><div class="line">        at java<span class="selector-class">.lang</span><span class="selector-class">.ClassLoader</span><span class="selector-class">.loadClass</span>(ClassLoader<span class="selector-class">.java</span>:<span class="number">424</span>)</div><div class="line">        at sun<span class="selector-class">.misc</span><span class="selector-class">.Launcher</span><span class="variable">$AppClassLoader</span>.loadClass(Launcher<span class="selector-class">.java</span>:<span class="number">335</span>)</div><div class="line">        at java<span class="selector-class">.lang</span><span class="selector-class">.ClassLoader</span><span class="selector-class">.loadClass</span>(ClassLoader<span class="selector-class">.java</span>:<span class="number">357</span>)</div><div class="line">        at java<span class="selector-class">.lang</span><span class="selector-class">.Class</span><span class="selector-class">.forName0</span>(Native Method)</div><div class="line">        at java<span class="selector-class">.lang</span><span class="selector-class">.Class</span><span class="selector-class">.forName</span>(Class<span class="selector-class">.java</span>:<span class="number">264</span>)</div><div class="line">        at MySQLDemo.main(MySQLDemo<span class="selector-class">.java</span>:<span class="number">18</span>)</div></pre></td></tr></table></figure></p>
<p>解决方法如下:</p>
<ul>
<li><code>sudo gedit /etc/profile</code></li>
<li><p>将驱动的位置设置到环境变量中:</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">## mysql driver</span></div><div class="line">export CLASSPATH=.:$JAVA_HOME/<span class="class"><span class="keyword">lib</span>/<span class="title">mysql</span>-<span class="title">connector</span>-<span class="title">java</span>-5.1.39-<span class="title">bin</span>.<span class="title">jar</span></span></div></pre></td></tr></table></figure>
</li>
<li><p>使刚才配置的环境变量生效:<code>source /etc/profile</code><br>配置环境变量之后,就可以正确的找到驱动了.</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;java链接数据库时需要mysql的驱动,但是我们下载驱动之后,应该如何配置呢,才能正确的找到驱动的位置.(ubuntu系统)&lt;/p&gt;
&lt;p&gt;报错如下:&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gu
    
    </summary>
    
      <category term="java" scheme="https://chuhang123.github.io/categories/java/"/>
    
    
      <category term="sql" scheme="https://chuhang123.github.io/tags/sql/"/>
    
      <category term="jdbc" scheme="https://chuhang123.github.io/tags/jdbc/"/>
    
  </entry>
  
  <entry>
    <title>如何设置plank开机自启动</title>
    <link href="https://chuhang123.github.io/2018/01/06/How-to-set-up-the-plank-to-boot-from-start/"/>
    <id>https://chuhang123.github.io/2018/01/06/How-to-set-up-the-plank-to-boot-from-start/</id>
    <published>2018-01-06T14:07:53.000Z</published>
    <updated>2018-01-06T14:14:40.158Z</updated>
    
    <content type="html"><![CDATA[<p>本问记录plank如何安装,并如何设置plank开机自启动.</p>
<ul>
<li><p>安装plank</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo<span class="built_in"> add-apt-repository </span>ppa:ricotz/docky</div><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install plank</div></pre></td></tr></table></figure>
</li>
<li><p>设置plank开机自启动.<code>sudo gedit ~/.config/autostart/plank.desktop</code>,并增加如下内容</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="section">[Desktop Entry]</span></div><div class="line"><span class="attr">Type</span>=Application</div><div class="line"><span class="attr">Exec</span>=plank</div><div class="line"><span class="attr">Hidden</span>=<span class="literal">false</span></div><div class="line"><span class="attr">NoDisplay</span>=<span class="literal">false</span></div><div class="line"><span class="attr">Name[en_US]</span>=plank</div><div class="line"><span class="attr">Name</span>=plank</div><div class="line"><span class="attr">Comment[en_US]</span>=plank</div><div class="line"><span class="attr">Comment</span>=plank</div><div class="line"><span class="attr">X-GNOME-Autostart-Delay</span>=<span class="number">2</span></div><div class="line"><span class="attr">X-GNOME-Autostart-enabled</span>=<span class="literal">true</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>安装plank后,如果不能正常启动,重启电脑即可.</p>
</blockquote>
<p>参考:<a href="https://www.jernejsila.com/2017/02/03/install-plank-ubuntu-make-start-boot/" target="_blank" rel="external">Install Plank on Ubuntu, make it start on boot</a> </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本问记录plank如何安装,并如何设置plank开机自启动.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;安装plank&lt;/p&gt;
&lt;figure class=&quot;highlight smali&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=
    
    </summary>
    
    
      <category term="ubuntu" scheme="https://chuhang123.github.io/tags/ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>java异常处理学习</title>
    <link href="https://chuhang123.github.io/2017/11/20/java-exception-handling/"/>
    <id>https://chuhang123.github.io/2017/11/20/java-exception-handling/</id>
    <published>2017-11-20T05:56:47.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>在开发 程序的过程中，我们可能经常会和异常打交道，那么出现异常时我们应该怎么处理呢，我们一起来学习一下。</p>
<a id="more"></a>
<h2 id="基本异常处理"><a href="#基本异常处理" class="headerlink" title="基本异常处理"></a>基本异常处理</h2><p>java提供了在程序中处理某些特定类型条件的方法，能够把程序或方法划分为正常情况或异常情况两部分。异常是一个对象，创建这个对象的过程，也被称为抛出异常。实例如下：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">LearnException</span>(<span class="params"><span class="keyword">int</span> i</span>) </span>&#123;</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">	    <span class="keyword">if</span> (i &lt; <span class="number">1</span>)  &#123;</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ArithmeticException(<span class="string">"请传入大于0的整数"</span>);</div><div class="line">            &#125;</div><div class="line">	    <span class="keyword">int</span> result = <span class="number">100</span>/i;</div><div class="line">	&#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</div><div class="line">	    System.<span class="keyword">out</span>.println(<span class="string">"出现异常了"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p> 从上面这个例子我们可以看出，java处理异常的基本方式有try-throw-catch三元组成。</p>
<ul>
<li><p>try语句块。try是尝试的意思，try语句块中的代码通常是你不能百分之百的确定，但是你想进行一次尝试。它的基本轮廓如下；</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> <span class="section">try</span> &#123;</div><div class="line">    <span class="attribute">Code_To_Try</span></div><div class="line">    Possibly_Throw_An_Exception</div><div class="line">    More_Code</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>throw语句块。上述的例子，也等同与如下代码：</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ArithmeticException arithmeticException = <span class="keyword">new</span> <span class="type">ArithmeticException</span>(<span class="string">"请传入大于0的整数"</span>);</div><div class="line"><span class="keyword">throw</span> arithmeticException;</div></pre></td></tr></table></figure>
<p>实际上，就是new一个异常对象，然后抛出的过程。当异常被抛出时，该块中的代码停止执行，跳出try语句块。</p>
</li>
<li><p>catch语句块。其格式如下：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> <span class="attribute">catch</span> (ArithmeticException e) &#123;</div><div class="line">    <span class="attribute">Handling_Exception</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>标识符e就像一个参数，接收刚才抛出的异常，所以e的类型必须等同于抛出的异常类型，否则不能捕获异常。</p>
</li>
</ul>
<h2 id="定义自己的异常类"><a href="#定义自己的异常类" class="headerlink" title="定义自己的异常类"></a>定义自己的异常类</h2><p> 我们也可以自己定义一个异常类，但必须继承已经定义好的异常类的。代码如下：<br> <figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> public <span class="class"><span class="keyword">class</span> <span class="title">DivideByZeroException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;</div><div class="line">    public <span class="type">DivideByZeroException</span>() &#123;</div><div class="line">        <span class="keyword">super</span>(<span class="string">"请传入大于0的整数"</span>);		<span class="comment">// 调用基类Exception的构造器</span></div><div class="line">    &#125;</div><div class="line">    public <span class="type">DivideByZeroException</span>(<span class="type">String</span> message) &#123;</div><div class="line">        <span class="keyword">super</span>(message);	<span class="comment">// 调用基类Exception的构造器</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p> 调用方法如下：<br> <figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> <span class="built_in">try</span> &#123;</div><div class="line">    <span class="built_in">if</span> (i &lt; <span class="number">1</span>)  &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> DivideByZeroException();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> result = <span class="number">100</span>/i;</div><div class="line">&#125; <span class="built_in">catch</span> (DivideByZeroException e) &#123;</div><div class="line">    System.out.<span class="built_in">println</span>(<span class="string">"出现异常了"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p> 当我们自己定义异常类时，我们需要注意一下三点：</p>
<ul>
<li>如果你没有更合理的理由使用其他的异常类作为基类，那么就使用Exception作为基类。</li>
<li>你定义的异常类至少定义了两个构造器——一个默认构造器，一个拥有String参数的构造器。通常情况下，自己定义的异常类都要保留getMessage方法。</li>
<li><p>在每一个构造器中，你应该以对基类构造器的调用作为开始，使用super调用。</p>
<blockquote>
<p>如果你在写代码时就已经清楚可能会抛出异常，那么最后自己定义一个异常，这样当出现异常时，我们就更容易区分你的异常和预定义类中的异常。</p>
</blockquote>
</li>
</ul>
<h2 id="声明异常"><a href="#声明异常" class="headerlink" title="声明异常"></a>声明异常</h2><p> 有时候我们需要延迟处理异常。比如你有一个代码块可能会抛出异常，但你并不想在这个代码块中捕获异常。因为可能某些程序调用该方法抛出异常后应该简单的终止程序，而另一程序调用该方法抛出异常后要做一些其他的处理。所以，当出现类似这种情况时，我们需要在在方法头部声明异常。代码如下：<br> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">LearnException</span><span class="params">(<span class="keyword">int</span> i)</span> throws DivideByZeroException </span>&#123;</div><div class="line">	<span class="function">Code_To_Try</span></div><div class="line">	<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title">DivideByZeroException</span><span class="params">()</span>;</div><div class="line">	More_Code</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p> 如果方法抛出了异常，方法调用立即结束。在方法的首部声明异常的一个好处是，我们可以清楚的区分可能有异常的方法和没有异常的方法，易于阅读。</p>
<blockquote>
<p>关键字throw用于抛出异常，throws用于声明异常。</p>
</blockquote>
<h2 id="异常的种类"><a href="#异常的种类" class="headerlink" title="异常的种类"></a>异常的种类</h2><p>所有的java异常可以分为两类：可控异常，不可控异常。上述的异常属于可控异常，即：异常必须在catch快中捕获或者在方法的首部声明。不可控异常也称为运行时异常（RuntimeException），当出现此类异常时，通常我们应该修正自己的代码，而不是添加catch语句块。</p>
<h2 id="多重捕获和finally"><a href="#多重捕获和finally" class="headerlink" title="多重捕获和finally"></a>多重捕获和finally</h2><ul>
<li>多重捕获。一个try语句块可以抛出任意数量的异常，这些异常可以是不同的类型，因为一个catch语句块只能捕获一种异常，所以一个try语句块可以使用多个catch语句块。</li>
<li>finally关键字 。无论代码是否发生异常，finally中的代码块总会被执行。<br>代码如下：<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    <span class="comment">// do sth</span></div><div class="line">&#125; <span class="keyword">catch</span> (DivideByZeroException e1) &#123;</div><div class="line">    <span class="comment">// do sth</span></div><div class="line">&#125; <span class="keyword">catch</span> (IOException) &#123;</div><div class="line">    <span class="comment">// do sth</span></div><div class="line">&#125; <span class="keyword">finally</span> &#123;</div><div class="line">    <span class="comment">// do sth</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><img src="/images/102.png"></p>
<ul>
<li>我们应该在什么时候抛出异常呢？在 <a href="https://stackoverflow.com/questions/77127/when-to-throw-an-exception" target="_blank" rel="external">When to throw an exception?</a> 中，推荐：当发现当前代码块的基本假设是错误时，应该抛出异常。</li>
<li>对于所有的异常都捕获Exception是否可行？可行但是不推荐。最好catch更为精确的异常。</li>
<li>在catch语句块中使用<code>e.printStackTrace()</code>是一个好的习惯么？并不推荐使用这种方法，很多情况下，并不能正确的提示代码出错的位置和相关信息。最好使用在控制台打印的方法。</li>
</ul>
<blockquote>
<p>error—错误 ： 是指程序无法处理的错误.比如内存溢出、端口占用、断言错误等。</p>
</blockquote>
<p>参考文献：</p>
<ol>
<li>《Java程序设计与问题解决》</li>
<li><a href="http://www.runoob.com/java/java-exceptions.html" target="_blank" rel="external">Java 异常处理</a> </li>
<li><a href="https://stackoverflow.com/questions/77127/when-to-throw-an-exception" target="_blank" rel="external">When to throw an exception?</a> </li>
<li><a href="https://stackoverflow.com/questions/7469316/why-is-exception-printstacktrace-considered-bad-practice" target="_blank" rel="external">Why is exception.printStackTrace() considered bad practice?</a> </li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在开发 程序的过程中，我们可能经常会和异常打交道，那么出现异常时我们应该怎么处理呢，我们一起来学习一下。&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://chuhang123.github.io/categories/java/"/>
    
    
      <category term="exception" scheme="https://chuhang123.github.io/tags/exception/"/>
    
      <category term="throw" scheme="https://chuhang123.github.io/tags/throw/"/>
    
      <category term="catch" scheme="https://chuhang123.github.io/tags/catch/"/>
    
      <category term="try" scheme="https://chuhang123.github.io/tags/try/"/>
    
      <category term="error" scheme="https://chuhang123.github.io/tags/error/"/>
    
  </entry>
  
  <entry>
    <title>ArrayList、LinkedList和HashSet的学习总结</title>
    <link href="https://chuhang123.github.io/2017/11/15/java-dynamic-data-structure/"/>
    <id>https://chuhang123.github.io/2017/11/15/java-dynamic-data-structure/</id>
    <published>2017-11-15T01:00:51.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>java中，一旦程序定义了数组的长度，就不能修改这个数组的长度了。如果我们需要修改数组的长度，我们可以使用ArrayList，以达到改变数组长度的目的。</p>
<h2 id="类ArrayList"><a href="#类ArrayList" class="headerlink" title="类ArrayList"></a>类ArrayList</h2><p>ArrayList的缺点：</p>
<ul>
<li>ArrayList比数组的效率低</li>
<li>ArrayList只能存储对象，不能包含基本类型，比如int、double。</li>
</ul>
<p>ArrayList的语法：<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ArrayList &lt;Base_Type&gt; <span class="keyword">Variable</span> = new <span class="comment">ArrayList&lt;Base_Type&gt;(Capacity)</span>;</div></pre></td></tr></table></figure></p>
<p>其中，Base_Type必须为类类型，不能为基本类型。Capacity（容量）表示为这个数据项分配内存空间，如果不传值，默认初始容量为10个数据项。如果初始化给了足够大的初始容量，那么系统就不需要频繁的分配内存了，程序将会运行的更快。反之，如果你吧初始容量弄得太大，就会浪费储存空间。<br>我们对是否分配容量做一个测试，代码实例：<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> class ListDemo &#123;</div><div class="line"></div><div class="line">	<span class="keyword">static</span> <span class="keyword">long</span> timeList(List&lt;<span class="keyword">String</span>&gt; st) &#123;</div><div class="line">		<span class="keyword">long</span> start = System.currentTimeMillis();</div><div class="line">		<span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</div><div class="line">			st.<span class="built_in">add</span>(<span class="keyword">String</span>.valueOf(i));</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">return</span> System.currentTimeMillis() - start;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main (<span class="keyword">String</span> args[]) &#123;</div><div class="line">		System.out.<span class="built_in">println</span>(<span class="string">"assign capacity ArrayList = "</span></div><div class="line">		 + timeList(<span class="keyword">new</span> ArrayList&lt;<span class="keyword">String</span>&gt;(<span class="number">100000</span>)));</div><div class="line"></div><div class="line">		System.out.<span class="built_in">println</span>(<span class="string">"default ArrayList = "</span></div><div class="line">		 + timeList(<span class="keyword">new</span> ArrayList&lt;<span class="keyword">String</span>&gt;()));</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>结果如下：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">assign capacity ArrayList = <span class="number">22</span></div><div class="line"><span class="section">default</span> ArrayList = <span class="number">13</span></div></pre></td></tr></table></figure></p>
<p>jdk7之前，我们应该这样实例化ArrayList<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">List</span>&lt;<span class="built_in">Integer</span>&gt; integers = <span class="literal">new</span> ArrayList&lt;<span class="built_in">Integer</span>&gt;();</div></pre></td></tr></table></figure></p>
<p>jdk7开始，我们可以这样<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">List</span>&lt;<span class="built_in">Integer</span>&gt; integers = <span class="literal">new</span> ArrayList&lt;&gt;();</div></pre></td></tr></table></figure></p>
<p>不仅方便了我们书写，也使代码有更强的可读性。</p>
<h2 id="类LinkedList"><a href="#类LinkedList" class="headerlink" title="类LinkedList"></a>类LinkedList</h2><p>类LinkedList的基本用法同上，但是LinkedList内部使用双向链表的数据结构，只有在需要时才分配内存，删除元素时随即释放内存。</p>
<h2 id="类ArrayList和类LinkedList的比较"><a href="#类ArrayList和类LinkedList的比较" class="headerlink" title="类ArrayList和类LinkedList的比较"></a>类ArrayList和类LinkedList的比较</h2><ul>
<li>类LinkedList插入元素效率高，但访问元素效率低。</li>
<li>类ArrayList访问元素效率高，但插入效率低。<br>他们的效率相差多少，我们通过实例来了解（仅修改main方法）：<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main (<span class="keyword">String</span> args[]) &#123;</div><div class="line">	System.out.<span class="built_in">println</span>(<span class="string">"time for ArrayList = "</span></div><div class="line">	 + timeList(<span class="keyword">new</span> ArrayList&lt;<span class="keyword">String</span>&gt;()));</div><div class="line"></div><div class="line">	System.out.<span class="built_in">println</span>(<span class="string">"time for LinkedList = "</span></div><div class="line">	 + timeList(<span class="keyword">new</span> LinkedList&lt;<span class="keyword">String</span>&gt;()));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>运行结果：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">time</span> <span class="keyword">for</span> ArrayList = <span class="number">22</span></div><div class="line"><span class="selector-tag">time</span> <span class="keyword">for</span> LinkedList = <span class="number">13</span></div></pre></td></tr></table></figure></p>
<p>如果我们指定位置添加元素，将第六行代码<code>st.add(String.valueOf(i));</code>修改为<code>st.add(0, String.valueOf(i));</code><br>运行结果为：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">time</span> <span class="keyword">for</span> ArrayList = <span class="number">915</span></div><div class="line"><span class="selector-tag">time</span> <span class="keyword">for</span> LinkedList = <span class="number">11</span></div></pre></td></tr></table></figure></p>
<p>为什么会差这么多呢，因为每插入一个元素，arraylist都要吧所有的元素都后移，而LinkedList指需要增加一个新的结点，并调整一下对应关系就可以了。<br>我们进行一次新增元素，再进行一次查看元素，他们的效率相差多少呢？将<code>timeList</code>修改为如下所示：<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> <span class="keyword">long</span> timeList(List&lt;<span class="keyword">String</span>&gt; st) &#123;</div><div class="line">	<span class="keyword">long</span> start = System.currentTimeMillis();</div><div class="line">	<span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</div><div class="line">		st.<span class="built_in">add</span>(<span class="keyword">String</span>.valueOf(i));</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</div><div class="line">		st.<span class="built_in">get</span>(i);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> System.currentTimeMillis() - start;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>结果如下<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">time</span> <span class="keyword">for</span> ArrayList = <span class="number">17</span></div><div class="line"></div><div class="line"><span class="selector-tag">time</span> <span class="keyword">for</span> LinkedList = <span class="number">156</span></div></pre></td></tr></table></figure></p>
<p>因此，我们在进行相同次数的查找和添加元素的情况下，ArrayList效率较高。因此，我们使用ArrayList的次数会更多一些。</p>
<h2 id="Collection-API的层次结构"><a href="#Collection-API的层次结构" class="headerlink" title="Collection API的层次结构"></a>Collection API的层次结构</h2><p>通过上面的学习，我们对动态数据结构有了基本的认识，那么java中关于数组的接口和实现类的层次结构是什么样的呢？如下图：<br><img src="/images/101.png"><br>由上图可知，Iterable接口、Collection接口中定义的方法，几个实现类都实现了，只不过他们的具体实现方法会有所差异。同样的，ArrayList和LinkedList都是List接口的实现类，所以他们的方法名都是一样的，但是具体的实现方法有所差异。</p>
<h2 id="Set接口和List接口"><a href="#Set接口和List接口" class="headerlink" title="Set接口和List接口"></a>Set接口和List接口</h2><p>1.Set对应的中文名是集合，有两个特点：</p>
<ul>
<li>不含重复元素</li>
<li>无序</li>
</ul>
<p>2.List接口类似于书续重的序列，也有两个特点：</p>
<ul>
<li>可含重复的元素</li>
<li>有序</li>
</ul>
<h2 id="类HashSet"><a href="#类HashSet" class="headerlink" title="类HashSet"></a>类HashSet</h2><p>HashSet继承了Set接口的特性，值得注意的是，当一个对象被存储进HashSet集合中以后，就不能修改这个对象中的那些参与计算哈希值的字段了，否则，对象修改后的哈希值与最初存储进HashSet集合中时的哈希值就不同了，在这种情况下，即使在contains方法中使用该对象的当前引用作为的参数去HashSet集合中检索对象，也将返回找不到对象的结果。因为new一个HashSet，实际上是new HashMap，并以这个对象的hashCode为key，这个对象本身为value储存。当对象的hashcode改变后，我们可以使用迭代器进行删除的操作，代码如下：<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="type">Iterator</span>&lt;<span class="type">MandatoryInstrument</span>&gt; <span class="keyword">iterator</span> = mandatoryInstrumentList.<span class="keyword">iterator</span>();</div><div class="line"><span class="keyword">while</span> (<span class="keyword">iterator</span>.hasNext()) &#123;</div><div class="line">    <span class="type">MandatoryInstrument</span> mandatoryInstrument = <span class="keyword">iterator</span>.next();</div><div class="line">    <span class="keyword">if</span> (mandatoryInstrument.getCheckDepartment() == null) &#123;</div><div class="line">        <span class="keyword">iterator</span>.remove();</div><div class="line">        <span class="keyword">continue</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="iterator"><a href="#iterator" class="headerlink" title="iterator"></a>iterator</h2><p>iterator（迭代器）是什么？eg：<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (int <span class="built_in">i</span> = <span class="number">0</span>; <span class="built_in">i</span> &lt; <span class="number">10000</span>; <span class="built_in">i</span>++) &#123;</div><div class="line">   st.get(i);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>那么，i就是一个迭代器——能够以合理的方式一次访问一个元素、遍历整个数组或者链表的变量。从一个元素走到另一个元素的过程就是是迭代（iterable）</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;java中，一旦程序定义了数组的长度，就不能修改这个数组的长度了。如果我们需要修改数组的长度，我们可以使用ArrayList，以达到改变数组长度的目的。&lt;/p&gt;
&lt;h2 id=&quot;类ArrayList&quot;&gt;&lt;a href=&quot;#类ArrayList&quot; class=&quot;headerl
    
    </summary>
    
      <category term="java" scheme="https://chuhang123.github.io/categories/java/"/>
    
    
      <category term="ArrayList" scheme="https://chuhang123.github.io/tags/ArrayList/"/>
    
      <category term="LinkedList" scheme="https://chuhang123.github.io/tags/LinkedList/"/>
    
      <category term="HashSet" scheme="https://chuhang123.github.io/tags/HashSet/"/>
    
      <category term="iterator" scheme="https://chuhang123.github.io/tags/iterator/"/>
    
      <category term="数组" scheme="https://chuhang123.github.io/tags/%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>angular和springmvc实现批量删除</title>
    <link href="https://chuhang123.github.io/2017/10/21/angular-spring-batch-delete/"/>
    <id>https://chuhang123.github.io/2017/10/21/angular-spring-batch-delete/</id>
    <published>2017-10-21T12:14:05.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>昨天实现了批量删除的功能，看到了stackoverflow和百度上均有相关的问题，于是决定记录一下。前台angularjs，后台SpringMvc。</p>
<a id="more"></a>
<h2 id="checkbox使用"><a href="#checkbox使用" class="headerlink" title="checkbox使用"></a>checkbox使用</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">tr</span> ng-<span class="built_in">repeat</span>=<span class="string">"(key, object) in data.content"</span>&gt;</div><div class="line">     <span class="symbol">&lt;td&gt;</span>&lt;<span class="built_in">input</span> icheck <span class="built_in">type</span>=<span class="string">"checkbox"</span> ng-model=<span class="string">"object._checked"</span>&gt;&lt;/td&gt;</div><div class="line">&lt;/<span class="keyword">tr</span>&gt;</div></pre></td></tr></table></figure>
<p>当用户勾选复选框后，对象的_checked属性值为true，我们通过下面这个函数获取勾选的object,可以把这个函数放在公共service中，方便框架的其他地方调用。类似的，我们也可以根据自己的需求，修改_checked属性。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 由某个数组中 筛选中被选中的元素，组成新的数组并返回</div><div class="line"> * <span class="doctag">@param</span>    &#123;array&#125;                 lists 原数组</div><div class="line"> * <span class="doctag">@param</span>    &#123;string&#125;                 key   健值 默认为 _checked</div><div class="line"> * <span class="doctag">@return</span>   &#123;array&#125;                       选中元素组成的数组</div><div class="line"> * <span class="doctag">@author</span> 梦云智 http://www.mengyunzhi.com</div><div class="line"> * <span class="doctag">@DateTime</span> 2017-10-17T15:05:18+0800</div><div class="line"> */</div><div class="line"><span class="keyword">self</span>.getCheckedElementsByListsAndKey = <span class="function"><span class="keyword">function</span><span class="params">(lists, key)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (typeof(key) === <span class="string">'undefined'</span>) &#123;</div><div class="line">        key = <span class="string">'_checked'</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> tempList = [];</div><div class="line">    angular.<span class="keyword">forEach</span>(lists, <span class="function"><span class="keyword">function</span><span class="params">(list)</span> </span>&#123;</div><div class="line">    	<span class="keyword">if</span> (typeof(<span class="keyword">list</span>[key]) !== <span class="string">'undefined'</span> &amp;&amp; <span class="keyword">list</span>[key] === <span class="keyword">true</span>) &#123;</div><div class="line">    		tempList.push(<span class="keyword">list</span>);</div><div class="line">    	&#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> tempList;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2 id="前后台对接"><a href="#前后台对接" class="headerlink" title="前后台对接"></a>前后台对接</h2><p>前台http请求<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var data =  [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>];		// 假设要删除id为<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>的记录</div><div class="line">$http.delete(<span class="string">'/FromMessage/batchDelete/'</span> + data)</div><div class="line">	.<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span> <span class="title">success</span><span class="params">(response)</span></span>&#123;</div><div class="line">	  <span class="keyword">if</span> (callback) &#123;callback(response.<span class="built_in">status</span>);&#125;</div><div class="line">	&#125;, <span class="function"><span class="keyword">function</span> <span class="title">error</span><span class="params">(response)</span></span>&#123;</div><div class="line">	  alert(<span class="string">'FromMessage.batchDelete error: '</span>, response);</div><div class="line">	  <span class="keyword">if</span> (callback) &#123;callback(response.<span class="built_in">status</span>);&#125;</div><div class="line">	&#125;);</div></pre></td></tr></table></figure></p>
<p>后台代码<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="variable">@ResponseStatus</span>(HttpStatus.NO_CONTENT)</div><div class="line">    <span class="variable">@DeleteMapping</span>(<span class="string">"/batchDelete/&#123;fromMessageIds&#125;"</span>)</div><div class="line">    public void batchDelete(<span class="variable">@ApiParam</span>(value = <span class="string">"消息id数组"</span>) <span class="variable">@PathVariable</span> List&lt;Integer&gt; fromMessageIds) &#123;</div><div class="line">        <span class="selector-tag">fromMessageService</span><span class="selector-class">.batchDelete</span>(fromMessageIds);</div><div class="line">        <span class="selector-tag">return</span>;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>后台接受到的是一个数组。如果把数组放到delete方法的body中，由于不符合api规范，会被tomcat或这spring丢弃，后台就不能正确的接受body信息。</p>
<h2 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h2><p>功能实现后，为了降低代码的维护成本，我们进行单元测试。这里给出示例代码：<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">logger.info(<span class="string">"模拟请求"</span>);</div><div class="line"><span class="keyword">this</span>.mockMvc.perform(<span class="keyword">delete</span>(<span class="string">"/FromMessage/batchDelete/"</span> + fromMessage.getId() + <span class="string">','</span> + fromMessage1.getId())</div><div class="line">.header(<span class="string">"x-auth-token"</span>, xAuthToken))</div><div class="line">.andDo(<span class="built_in">document</span>(<span class="string">"FromMessage_batchDelete"</span>, preprocessResponse(prettyPrint())))</div><div class="line">.andExpect(status().<span class="keyword">is</span>(<span class="number">204</span>));</div></pre></td></tr></table></figure></p>
<p>注意请求的url<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/FromMessage/batchDelete/<span class="number">2</span>,<span class="number">3</span></div></pre></td></tr></table></figure></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在进行开发的时候，实现复选框选中、后台接收数组等功能，感觉之前都实现过，但是由于记得不清楚，测试了多次也没能通过，还是及时的google能够节约解决问题的时间。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;昨天实现了批量删除的功能，看到了stackoverflow和百度上均有相关的问题，于是决定记录一下。前台angularjs，后台SpringMvc。&lt;/p&gt;
    
    </summary>
    
      <category term="angularjs" scheme="https://chuhang123.github.io/categories/angularjs/"/>
    
    
      <category term="http" scheme="https://chuhang123.github.io/tags/http/"/>
    
      <category term="SpringMVC" scheme="https://chuhang123.github.io/tags/SpringMVC/"/>
    
      <category term="batch" scheme="https://chuhang123.github.io/tags/batch/"/>
    
      <category term="delete" scheme="https://chuhang123.github.io/tags/delete/"/>
    
      <category term="checkbox" scheme="https://chuhang123.github.io/tags/checkbox/"/>
    
  </entry>
  
  <entry>
    <title>java中json和object相互转换</title>
    <link href="https://chuhang123.github.io/2017/10/21/how-to-convert-json-to-from-object-Gson/"/>
    <id>https://chuhang123.github.io/2017/10/21/how-to-convert-json-to-from-object-Gson/</id>
    <published>2017-10-21T08:45:14.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>我们经常会用到json和oject类型的相互转换，这篇文章记录了通过gson进行object和json的相互转换。</p>
<a id="more"></a>
<h2 id="gson-依赖"><a href="#gson-依赖" class="headerlink" title="gson 依赖"></a>gson 依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="object转换为json"><a href="#object转换为json" class="headerlink" title="object转换为json"></a>object转换为json</h2><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// <span class="number">1</span>.新建一个对象</div><div class="line">FromMessage <span class="keyword">from</span>Message = new FromMessage();</div><div class="line"><span class="keyword">from</span>Message.<span class="built_in">set</span>Content(<span class="string">"test"</span>);</div><div class="line"><span class="keyword">from</span>Message.<span class="built_in">set</span>IsRead(Boolean.FALSE);</div><div class="line"></div><div class="line">// <span class="number">2</span>.将对象转化为json字符串</div><div class="line">Gson gson = new Gson();</div><div class="line">String jsonString = gson.<span class="keyword">to</span>Json(<span class="keyword">from</span>Message);</div><div class="line">System.<span class="keyword">out</span>.println(jsonString);			// &#123;<span class="string">"content"</span>:<span class="string">"test"</span>,<span class="string">"isRead"</span>:false&#125;</div></pre></td></tr></table></figure>
<h2 id="json转化为object"><a href="#json转化为object" class="headerlink" title="json转化为object"></a>json转化为object</h2><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Gson <span class="attr">gson</span> = new Gson();</div><div class="line">String <span class="attr">jsonString</span> = <span class="string">"&#123;\"</span>content\<span class="string">":\"</span>test\<span class="string">",\"</span>isRead\<span class="string">":false&#125;"</span>;</div><div class="line">FromMessage <span class="attr">fromMessage1</span> = gson.fromJson(jsonString, FromMessage.class);</div><div class="line">System.out.println(fromMessage1);  		//Message&#123;<span class="attr">id=null,</span> <span class="attr">content='test',</span> <span class="attr">title='null',</span> <span class="attr">isRead=false,</span> <span class="attr">fromDepartment=null,</span> <span class="attr">toDepartment=null,</span> <span class="attr">firstReadTime=null,</span> <span class="attr">firstReadUser=null,</span> <span class="attr">createUser=null,</span> <span class="attr">createTime=null&#125;</span></div></pre></td></tr></table></figure>
<p>参考文章：<br><a href="https://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/" target="_blank" rel="external">How to convert Java object to JSON string</a> </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我们经常会用到json和oject类型的相互转换，这篇文章记录了通过gson进行object和json的相互转换。&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://chuhang123.github.io/categories/java/"/>
    
    
      <category term="json" scheme="https://chuhang123.github.io/tags/json/"/>
    
      <category term="object" scheme="https://chuhang123.github.io/tags/object/"/>
    
      <category term="gson" scheme="https://chuhang123.github.io/tags/gson/"/>
    
  </entry>
  
  <entry>
    <title>学习hebinate继承映射关系</title>
    <link href="https://chuhang123.github.io/2017/10/17/Learning-to-use-entity-inheritance-with-JPA-and-Hibernate/"/>
    <id>https://chuhang123.github.io/2017/10/17/Learning-to-use-entity-inheritance-with-JPA-and-Hibernate/</id>
    <published>2017-10-17T09:18:58.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>做计量项目我的消息模块时，消息分为接收消息和发送消息，如果把消息放在一个实体中，当删除发送消息时，对应的接受消息也被删除了，因此决定使用继承的方法。我们通过这个问题学习ＪＰＡ主要的三种映射策略。</p>
<h2 id="问题还原"><a href="#问题还原" class="headerlink" title="问题还原"></a>问题还原</h2><p>假设有三个类animal、cat、dog。cat、dog继承animal类<br><img src="/images/96.png"><br>那我们应该通过什么方法生成数据表，生成几张数据表呢，哪种方法最优呢？</p>
<h2 id="单表继承策略"><a href="#单表继承策略" class="headerlink" title="单表继承策略"></a>单表继承策略</h2><p>单表继承，就是这几个类共用一个数据表。代码如下：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="meta">@Inheritance</span>(strategy = <span class="type">InheritanceType</span>.<span class="type">SINGLE_TABLE</span>) <span class="comment">// 继承（策略 = 单表继承）</span></div><div class="line"><span class="meta">@DiscriminatorColumn</span>(name = <span class="string">"DB_TYPE"</span>)  <span class="comment">// 鉴别的列名为 DB_TYPE，将在数据表中生成该字段，用与区分子表类型</span></div><div class="line">public <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> <span class="title">implements</span> <span class="title">Serializable</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> static <span class="keyword">final</span> long serialVersionUID = <span class="number">1</span>L;</div><div class="line">    <span class="meta">@Id</span></div><div class="line">    <span class="meta">@GeneratedValue</span>(strategy = <span class="type">GenerationType</span>.<span class="type">AUTO</span>)</div><div class="line">    <span class="keyword">private</span> <span class="type">Long</span> id;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="type">String</span> age;</div><div class="line">    <span class="comment">// 省略constructor 、getters、setters</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="meta">@DiscriminatorValue</span>(<span class="string">"Cat"</span>)</div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="type">String</span> weight;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="meta">@DiscriminatorValue</span>(<span class="string">"Dog"</span>)</div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="type">String</span> height;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>生成了一张数据表：<br><img src="/images/97.png"></p>
<p>这种方法不仅简单，而且性能也是最优的。因为每个子类使用了@Entity注解，子类的属性都会被映射到Animal表的列中。</p>
<blockquote>
<p>这种方法在子类中使用@NotNull注解会被hibernate忽略，因为如果你定义了Dog类的height属性不能为null，但是当保存cat类的数据时，height必然为null。</p>
</blockquote>
<h2 id="JOINED策略"><a href="#JOINED策略" class="headerlink" title="JOINED策略"></a>JOINED策略</h2><p>代码如下：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="meta">@Inheritance</span>(strategy = <span class="type">InheritanceType</span>.<span class="type">JOINED</span>) <span class="comment">// 继承（策略 = TABLE_PER_CLASS）</span></div><div class="line">public <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="meta">@Id</span></div><div class="line">    <span class="meta">@GeneratedValue</span>(strategy = <span class="type">GenerationType</span>.<span class="type">AUTO</span>)   <span class="comment">// 不能使用自动生成主键策略</span></div><div class="line">    <span class="keyword">private</span> <span class="type">Long</span> id;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="type">String</span> age;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Entity</span></div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="type">String</span> height;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Entity</span></div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="type">String</span> weight;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>此时生成了三张表<br><img src="/images/100.png"><br>我们可以看到dog和cat表中并没有age属性当我们想获取age属性时，我们通过左链接的方式取值。</p>
<h2 id="TABLE-PER-CLASS策略"><a href="#TABLE-PER-CLASS策略" class="headerlink" title="TABLE_PER_CLASS策略"></a>TABLE_PER_CLASS策略</h2><p>这种策略不能使用自动生成主键的策略，代码如下：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="meta">@Inheritance</span>(strategy = <span class="type">InheritanceType</span>.<span class="type">TABLE_PER_CLASS</span>) <span class="comment">// 继承（策略 = TABLE_PER_CLASS）</span></div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="meta">@Id</span></div><div class="line">    <span class="comment">//@GeneratedValue(strategy = GenerationType.AUTO)   // 不能使用自动生成主键策略</span></div><div class="line">    <span class="keyword">private</span> <span class="type">Long</span> id;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="type">String</span> age;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Entity</span></div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="type">String</span> weight;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Entity</span></div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="type">String</span> height;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>生成了三张数据表：<br><img src="/images/98.png"><br>如果把Animal改为abstract类，则只会生成两张表<br><img src="/images/99.png"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>学习了以上三种方式，那么我们在什么情况下使用他们呢？</p>
<ul>
<li>当父类的属性较多时，我们使用<code>InheritanceType.SINGLE_TABLE</code>策略，已达到最少可为空的列的数量。</li>
<li>当父类的属性较少，而子类的属性较多时，我们使用<code>InheritanceType.JOINED</code>策略。</li>
<li>当我们很少对父类进行操作时，我们使用<code>InheritanceType.TABLE_PER_CLASS</code>策略，这种方法倾向于把每一个类对应一个具体的表。</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;做计量项目我的消息模块时，消息分为接收消息和发送消息，如果把消息放在一个实体中，当删除发送消息时，对应的接受消息也被删除了，因此决定使用继承的方法。我们通过这个问题学习ＪＰＡ主要的三种映射策略。&lt;/p&gt;
&lt;h2 id=&quot;问题还原&quot;&gt;&lt;a href=&quot;#问题还原&quot; class
    
    </summary>
    
      <category term="Hibernate" scheme="https://chuhang123.github.io/categories/Hibernate/"/>
    
    
      <category term="JPA" scheme="https://chuhang123.github.io/tags/JPA/"/>
    
      <category term="inheritance" scheme="https://chuhang123.github.io/tags/inheritance/"/>
    
      <category term="entity" scheme="https://chuhang123.github.io/tags/entity/"/>
    
      <category term="map" scheme="https://chuhang123.github.io/tags/map/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVC+Angularjs上传图片</title>
    <link href="https://chuhang123.github.io/2017/10/10/SpringMVC-Angularjs-upload-image/"/>
    <id>https://chuhang123.github.io/2017/10/10/SpringMVC-Angularjs-upload-image/</id>
    <published>2017-10-10T07:24:23.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>最近，完成了图片上传的功能，中间也遇到了一些问题，本文记录了上传图片的代码段，希望下次开发相同的功能时尽可能的节约时间。环境：后台SpringMvc，前台angularjs，前台插件<a href="https://www.npmjs.com/package/angular-file-upload" target="_blank" rel="external">angular-file-upload </a> 。</p>
<a id="more"></a>
<h2 id="开发思路"><a href="#开发思路" class="headerlink" title="开发思路"></a>开发思路</h2><ul>
<li>开发顺序：先开发前台，再开发后台。从而避免开发后台的功能后，前台不需要此功能的情况。</li>
<li>前台开发：我们把图片作为一个指令，以方便在各个模块中的使用。引入angular-file-upload插件。</li>
<li>后台应该建立图片相关实体，后台获取到图片后，对文件流进行sha1或md5加密，判断如果后台服务器已经存在相同的图片，则不在上传该图片，直接引用之前上传的图片，以节约服务器资源。类似地，删除图片时，也应该判断是否改图片被引用多次，如果被引用多次，则不需要删除服务器中的图片，只删除图片实体中的那一条记录即可。如果用户要删除的图片只被引用一次，则删除图片实体中的记录，并删除服务器中的图片，释放服务器资源。同时，参考<a href="https://spring.io/guides/gs/uploading-files/" target="_blank" rel="external">官方文档</a> ，并根据前台需求，完成后台功能代码。<blockquote>
<p>通过这种方法，如果用户上传较大的文件，且服务器之前已经上传过相同的文件，那么就可以实现秒传，同时节约了服务器的资源。所以，有时我们在一些平台上（如迅雷）上传几百兆或者几个Ｇ的文件，也可秒传，并不是网速很快，而是因为服务器上已经存在相同的文件。</p>
</blockquote>
</li>
<li>给出附件实体实例<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="meta">@ApiModel(value = <span class="meta-string">"Attachment (附件)"</span>, description = <span class="meta-string">"附件"</span>)</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Attachment</span> <span class="title">implements</span> <span class="title">Serializable</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> static <span class="keyword">final</span> long serialVersionUID = <span class="number">1</span>L;</div><div class="line"></div><div class="line">    <span class="meta">@Id</span></div><div class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.AUTO)</span></div><div class="line">    <span class="keyword">private</span> <span class="built_in">Long</span> id;</div><div class="line"></div><div class="line">    <span class="meta">@ManyToOne</span></div><div class="line">    <span class="meta">@ApiModelProperty(<span class="meta-string">"操作用户"</span>)</span></div><div class="line">    <span class="keyword">private</span> User <span class="keyword">operator</span>;</div><div class="line"></div><div class="line">    <span class="meta">@ApiModelProperty(<span class="meta-string">"sha1值"</span>)</span></div><div class="line">    <span class="keyword">private</span> String sha1;</div><div class="line"></div><div class="line">    <span class="meta">@ApiModelProperty(<span class="meta-string">"md5值"</span>)</span></div><div class="line">    <span class="keyword">private</span> String md5;</div><div class="line"></div><div class="line">    <span class="meta">@ApiModelProperty(<span class="meta-string">"附件扩展名"</span>)</span></div><div class="line">    <span class="keyword">private</span> String ext;</div><div class="line"></div><div class="line">    <span class="meta">@ApiModelProperty(<span class="meta-string">"附件大小"</span>)</span></div><div class="line">    <span class="keyword">private</span> String size;</div><div class="line"></div><div class="line">    <span class="meta">@ApiModelProperty(<span class="meta-string">"附件上传时间"</span>)</span></div><div class="line">    <span class="keyword">private</span> <span class="built_in">Long</span> createTime;</div><div class="line"></div><div class="line">    <span class="meta">@ApiModelProperty(<span class="meta-string">"附件更新时间"</span>)</span></div><div class="line">    <span class="keyword">private</span> <span class="built_in">Long</span> updateTime;</div><div class="line"></div><div class="line">    <span class="meta">@ApiModelProperty(<span class="meta-string">"附件名称"</span>)</span></div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">    <span class="meta">@ApiModelProperty(<span class="meta-string">"附件存储路径"</span>)</span></div><div class="line">    <span class="keyword">private</span> String savePath;</div><div class="line"></div><div class="line">    <span class="meta">@ApiModelProperty(<span class="meta-string">"附件存储名称"</span>)</span></div><div class="line">    <span class="keyword">private</span> String saveName;</div><div class="line"></div><div class="line">    <span class="meta">@ApiModelProperty(<span class="meta-string">"MIME类型"</span>)</span></div><div class="line">    <span class="keyword">private</span> String MIME;</div><div class="line">    <span class="comment">// 省略constructor、getters、setters</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="前台代码"><a href="#前台代码" class="headerlink" title="前台代码"></a>前台代码</h2><p>界面的效果图如下：<br><img src="/images/94.png"></p>
<blockquote>
<p>前台代码放在github上，代码地址：<a href="https://github.com/chuhang123/blog/tree/master/2017/uploadImage" target="_blank" rel="external">https://github.com/chuhang123/blog/tree/master/2017/uploadImage</a> 。</p>
</blockquote>
<p>在前台代码中，我们需要对图片标题<a href="https://github.com/chuhang123/blog/blob/master/2017/uploadImage/imagetitle.js" target="_blank" rel="external">长度过滤</a> ，代码如下：<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 长度为２０</span></div><div class="line"><span class="keyword">return</span> function (<span class="keyword">input</span>) &#123;</div><div class="line">    <span class="keyword">var</span> r=/[^\x00-\xff]/<span class="keyword">g</span>;</div><div class="line">    <span class="keyword">if</span>(<span class="keyword">input</span>.<span class="keyword">replace</span>(r,<span class="string">"mm"</span>).length&lt;=20)&#123;<span class="keyword">return</span> <span class="keyword">input</span>;&#125;</div><div class="line">    <span class="keyword">var</span> <span class="keyword">m</span>=Math.<span class="built_in">floor</span>(20/2);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="keyword">m</span>;i&lt;<span class="keyword">input</span>.length;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">input</span>.<span class="built_in">substr</span>(0,i).<span class="keyword">replace</span>(r,<span class="string">"mm"</span>).length&gt;=20)&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">input</span>.<span class="built_in">substr</span>(0,i)+<span class="string">"..."</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">input</span>;</div><div class="line"></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>显示图片的<a href="https://github.com/chuhang123/blog/blob/master/2017/uploadImage/yunzhithumb.js" target="_blank" rel="external">缩略图</a> ，并根据项目需求请求后台代码。</p>
<h2 id="后台代码"><a href="#后台代码" class="headerlink" title="后台代码"></a>后台代码</h2><p>在后台的附件控制器中建立三个请求借口：删除、上传、图片访问入口。同时参考<a href="https://spring.io/guides/gs/uploading-files/" target="_blank" rel="external">官方文档</a> 。</p>
<p><img src="/images/95.png"></p>
<ul>
<li>如上图所示，需要注意４个地方：</li>
</ul>
<ol>
<li>预览图片时，我们要根据图片的保存名称来浏览图片，我们要使用<code>{saveName:.+}</code>获取图片的名称，否则不能正确获取图片的名称。</li>
<li>参考官方教程浏览图片时，控制台会抛出<code>HttpMessageNotWritableException</code>异常，我们需要设置响应信息的内容类型，就把这个异常给解决了。</li>
<li>官方文档是把文件流放在响应信息中，但这种方式相当消耗服务器的资源，假设一个图片１Ｍ，有１００个并发请求，那么就要消耗服务器１００Ｍ的内存，那么如果有更多的并发请求，那么就非常消耗资源。所以等项目上线后把开放图片路径，以节约服务器资源。</li>
<li>上传的图片类型为<code>MultipartFile</code>, 所以前台的请求内容类型应该为<code>Content-Type:multipart/form-data</code>，请求实例如下：<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> formData = <span class="literal">new</span> FormData();</div><div class="line">formData.append(<span class="string">'attachment'</span>, image);</div><div class="line"></div><div class="line">$http.post(url, formData, &#123;</div><div class="line">transformRequest: angular.identity,</div><div class="line">headers: &#123;<span class="string">'Content-Type'</span>: undefined&#125;</div><div class="line">&#125;)<span class="params">...</span><span class="params">...</span>..</div></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>设置图片大小上限，在配置文件中增加如下代码：</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 设置图片最大为３Ｍ</span></div><div class="line">spring<span class="selector-class">.http</span><span class="selector-class">.multipart</span><span class="selector-class">.max-file-size</span>=<span class="number">3072</span>KB　</div><div class="line">spring<span class="selector-class">.http</span><span class="selector-class">.multipart</span><span class="selector-class">.max-request-size</span>=<span class="number">3072</span>KB</div></pre></td></tr></table></figure>
<ul>
<li><p>当其他实体和附件相关时，比如强检申请：附件=1：n，因为可能还会有很多实体和附件相关联，因此在强检申请实体中使用@OneToMany单向映射较为合适。为了操作方便，通过使用 @JoinColumn不再建立中间表。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">@OneToMany</span></div><div class="line"> <span class="variable">@JoinColumn</span>(name = <span class="string">"mandatoryInstrumentApply_id"</span>)</div></pre></td></tr></table></figure>
</li>
<li><p>因为我们需要对MultipartFile类型的文件进行sha1、md5加密，所以这里给出hash加密算法：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">     * 根据指定的算法加密文件数据, 返回固定长度的十六进制小写哈希值</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> multipartFile 需要加密的文件</div><div class="line">     * <span class="doctag">@param</span> algorithm 加密算法, 例如: MD5, SHA-1, SHA-256, SHA-512 等</div><div class="line">     */</div><div class="line">    <span class="keyword">static</span> String encrypt(MultipartFile multipartFile, String algorithm) <span class="keyword">throws</span> Exception &#123;</div><div class="line">        InputStream <span class="keyword">in</span> = <span class="literal">null</span>;</div><div class="line"></div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            <span class="comment">// 1. 根据算法名称获实现了算法的加密实例</span></div><div class="line">            MessageDigest digest = MessageDigest.getInstance(algorithm);</div><div class="line"></div><div class="line">            <span class="keyword">in</span> = multipartFile.getInputStream();</div><div class="line">            <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">            <span class="keyword">int</span> len = <span class="number">-1</span>;</div><div class="line">            <span class="keyword">while</span> ((len = <span class="keyword">in</span>.read(buf)) != <span class="number">-1</span>) &#123;</div><div class="line">                <span class="comment">// 2. 文件数据通常比较大, 使用 update() 方法逐步添加</span></div><div class="line">                digest.update(buf, <span class="number">0</span>, len);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">// 3. 计算数据的哈希值, 添加完数据后 digest() 方法只能被调用一次</span></div><div class="line">            <span class="keyword">byte</span>[] cipher = digest.digest();</div><div class="line"></div><div class="line">            <span class="comment">// 4. 将结果转换为十六进制小写</span></div><div class="line">            <span class="keyword">return</span> bytesToString(cipher);</div><div class="line"></div><div class="line">        &#125; <span class="keyword">finally</span> &#123;</div><div class="line">            <span class="keyword">if</span> (<span class="keyword">in</span> != <span class="literal">null</span>) &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    <span class="keyword">in</span>.close();</div><div class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                    <span class="comment">// nothing</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 将字节转为字符串</span></div><div class="line">    <span class="keyword">static</span> String bytesToString(<span class="keyword">byte</span>[] bytes) &#123;</div><div class="line">        <span class="keyword">if</span> (bytes == <span class="literal">null</span> || bytes.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">byte</span> <span class="string">b :</span> bytes) &#123;</div><div class="line">            stringBuilder.append(HEXES[(b &gt;&gt; <span class="number">4</span>) &amp; <span class="number">0x0F</span>]);</div><div class="line">            stringBuilder.append(HEXES[b &amp; <span class="number">0x0F</span>]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> stringBuilder.toString();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 十六进制字符数组</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">char</span>[] HEXES = &#123;</div><div class="line">            <span class="string">'0'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>,</div><div class="line">            <span class="string">'4'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, <span class="string">'7'</span>,</div><div class="line">            <span class="string">'8'</span>, <span class="string">'9'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>,</div><div class="line">            <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span></div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这次附件上传花费了较长的时间，一方面水平不够，一方面有些追求完美，从而耽误了时间，所以完成任务是第一位的，切忌追求完美。望以后注意。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近，完成了图片上传的功能，中间也遇到了一些问题，本文记录了上传图片的代码段，希望下次开发相同的功能时尽可能的节约时间。环境：后台SpringMvc，前台angularjs，前台插件&lt;a href=&quot;https://www.npmjs.com/package/angular-file-upload&quot;&gt;angular-file-upload &lt;/a&gt; 。&lt;/p&gt;
    
    </summary>
    
      <category term="SpringMvc" scheme="https://chuhang123.github.io/categories/SpringMvc/"/>
    
    
      <category term="angular" scheme="https://chuhang123.github.io/tags/angular/"/>
    
      <category term="js" scheme="https://chuhang123.github.io/tags/js/"/>
    
      <category term="upload" scheme="https://chuhang123.github.io/tags/upload/"/>
    
      <category term="image" scheme="https://chuhang123.github.io/tags/image/"/>
    
      <category term="angularFileUpload" scheme="https://chuhang123.github.io/tags/angularFileUpload/"/>
    
  </entry>
  
  <entry>
    <title>学习JPA的@OneToMany注解</title>
    <link href="https://chuhang123.github.io/2017/10/09/Learning-JPA-OneToMany/"/>
    <id>https://chuhang123.github.io/2017/10/09/Learning-JPA-OneToMany/</id>
    <published>2017-10-09T07:05:43.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>在JPA中，最常用的关系大概就是一对多了。假设实体A、B的关系为A:B=1:n，通常情况下，我们会在B实体中使用@ManyToOne的注解。但是有时我们需要在A实体中使用@OneToMany的注解，那么我们应该怎么办呢？</p>
<blockquote>
<p>以下代码中，假设实体One和Many的关系为One:Many=1:n</p>
</blockquote>
<h2 id="单向映射-OneToMany"><a href="#单向映射-OneToMany" class="headerlink" title="单向映射@OneToMany"></a>单向映射@OneToMany</h2><p>我们只在One实体中使用注解，代码如下<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">One</span> </span>&#123;</div><div class="line">    <span class="meta">@Id</span></div><div class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.AUTO)</span> <span class="keyword">private</span> <span class="built_in">Long</span> id;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    </div><div class="line">    <span class="meta">@OneToMany</span></div><div class="line">    <span class="keyword">private</span> List&lt;Many&gt; manys = new ArrayList&lt;&gt;();</div><div class="line">    <span class="comment">// 省略构造函数，getters and setters</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Many</span> </span>&#123;</div><div class="line">    <span class="meta">@Id</span></div><div class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.AUTO)</span> <span class="keyword">private</span> <span class="built_in">Long</span> id;</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>生成的数据表如下：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">MariaDB [springmvc]&gt; select * from one;</div><div class="line"><span class="code">+----+</span>------+</div><div class="line"><span class="section">| id | name |</span></div><div class="line">+----+------+</div><div class="line"><span class="section">|  1 | test |</span></div><div class="line">+----+------+</div><div class="line">1 row in set (0.00 sec)</div><div class="line"></div><div class="line">MariaDB [springmvc]&gt; select * from many;</div><div class="line"><span class="code">+----+</span>------+</div><div class="line"><span class="section">| id | name |</span></div><div class="line">+----+------+</div><div class="line"><span class="section">|  1 | test |</span></div><div class="line">+----+------+</div><div class="line">1 row in set (0.00 sec)</div><div class="line"></div><div class="line">MariaDB [springmvc]&gt; select * from one<span class="emphasis">_manys;</span></div><div class="line">+--------+----------+</div><div class="line">| one_id | manys<span class="emphasis">_id |</span></div><div class="line">+--------+----------+</div><div class="line">|      1 |        1 |</div><div class="line">+--------+----------+</div><div class="line">1 row in set (0.00 sec)</div></pre></td></tr></table></figure></p>
<ul>
<li>现在，我们如果想要在中间表中存一条记录，就必须先要保证many实体中存在一条记录，然后保存one对象时设置和many的关联关系？代码如下：<figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">logger.info(<span class="string">"新建One实体"</span>)<span class="comment">;</span></div><div class="line">One one = new One()<span class="comment">;</span></div><div class="line"></div><div class="line">logger.info(<span class="string">"新建并保存Many实体"</span>)<span class="comment">;</span></div><div class="line">Many many = new Many(<span class="string">"test"</span>)<span class="comment">;</span></div><div class="line">manyRepository.save(many)<span class="comment">;	// 能不能省略这行代码呢？</span></div><div class="line"></div><div class="line">logger.info(<span class="string">"保存"</span>)<span class="comment">;</span></div><div class="line">List&lt;Many&gt; manies = new ArrayList&lt;&gt;()<span class="comment">;</span></div><div class="line">manies.add(many)<span class="comment">;</span></div><div class="line">one.setManys(manies)<span class="comment">;</span></div><div class="line">oneRepository.save(one)<span class="comment">;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>我们能不能省略<code>manyRepository.save(many);</code>，答案是可以的。直接在One实体中的@OneToMany注解后面加入括号(cascade = CascadeType.ALL, orphanRemoval = true)，JPA仍然会自动保存many实体。</p>
<ul>
<li>此时，如果我们把Many实体表中id为1的记录删除，会报一个外键约束的错误，我们需要先把one_manys表中的记录删除，才可以删除Many实体表中id为1的记录。这样是不是有点麻烦呢？有没有办法直接删除Many实体中的记录呢？我们在One实体中增加一个注解@JoinColumn就可以了，代码如下：</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">One</span> </span>&#123;</div><div class="line">    <span class="meta">@Id</span></div><div class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.AUTO)</span> <span class="keyword">private</span> <span class="built_in">Long</span> id;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="meta">@OneToMany</span></div><div class="line">    <span class="meta">@JoinColumn(name = <span class="meta-string">"many_id"</span>)</span></div><div class="line">    <span class="keyword">private</span> List&lt;Many&gt; manys = new ArrayList&lt;&gt;();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>数据表的结构如下：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">MariaDB [springmvc]&gt; select * from one;</div><div class="line"><span class="code">+----+</span>------+</div><div class="line"><span class="section">| id | name |</span></div><div class="line">+----+------+</div><div class="line"><span class="section">|  1 | test |</span></div><div class="line">+----+------+</div><div class="line">1 row in set (0.00 sec)</div><div class="line"></div><div class="line">MariaDB [springmvc]&gt; select * from many;</div><div class="line"><span class="code">+----+</span>------<span class="code">+---------+</span></div><div class="line"><span class="section">| id | name | many_id |</span></div><div class="line">+----+------+---------+</div><div class="line"><span class="section">|  1 | test |       1 |</span></div><div class="line">+----+------+---------+</div><div class="line">1 row in set (0.00 sec)</div><div class="line"></div><div class="line">MariaDB [springmvc]&gt; select * from one<span class="emphasis">_manys;</span></div><div class="line">ERROR 1146 (42S02): Table 'springmvc.one_manys' doesn't exist</div></pre></td></tr></table></figure></p>
<p>这样就不会增加中间表了，此时我们可以直接删除many实体中的记录了。</p>
<h2 id="双向映射-OneToMany"><a href="#双向映射-OneToMany" class="headerlink" title="双向映射@OneToMany"></a>双向映射@OneToMany</h2><p>代码如下：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Many</span> </span>&#123;</div><div class="line">    <span class="meta">@Id</span></div><div class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.AUTO)</span> <span class="keyword">private</span> <span class="built_in">Long</span> id;</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">    <span class="meta">@ManyToOne</span></div><div class="line">    <span class="keyword">private</span> One one;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">One</span> </span>&#123;</div><div class="line">    <span class="meta">@Id</span></div><div class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.AUTO)</span> <span class="keyword">private</span> <span class="built_in">Long</span> id;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="meta">@OneToMany</span></div><div class="line">    <span class="keyword">private</span> List&lt;Many&gt; manys = new ArrayList&lt;&gt;();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>生成的数据表如下：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">MariaDB [springmvc]&gt; select * from one<span class="emphasis">_manys;</span></div><div class="line">+--------+----------+</div><div class="line">| one_id | manys<span class="emphasis">_id |</span></div><div class="line">+--------+----------+</div><div class="line">|      1 |        1 |</div><div class="line">+--------+----------+</div><div class="line">1 row in set (0.00 sec)</div><div class="line"></div><div class="line">MariaDB [springmvc]&gt; select * from many;</div><div class="line"><span class="code">+----+</span>------<span class="code">+--------+</span></div><div class="line"><span class="section">| id | name | one_id |</span></div><div class="line">+----+------+--------+</div><div class="line"><span class="section">|  1 | test |      1 |</span></div><div class="line">+----+------+--------+</div><div class="line">1 row in set (0.00 sec)</div><div class="line"></div><div class="line">MariaDB [springmvc]&gt; select * from one;</div><div class="line"><span class="code">+----+</span>------+</div><div class="line"><span class="section">| id | name |</span></div><div class="line">+----+------+</div><div class="line"><span class="section">|  1 | test |</span></div><div class="line">+----+------+</div><div class="line">1 row in set (0.00 sec)</div></pre></td></tr></table></figure></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>我们经常会用到实体间的关系，但是往往在实际的项目中，由于项目过于庞大，增加了学习成本。因此，比较好的学习方法就是在一个测试的项目中学习，减少学习成本。</p>
<p>参考链接：<br><a href="https://vladmihalcea.com/2017/03/29/the-best-way-to-map-a-onetomany-association-with-jpa-and-hibernate/" target="_blank" rel="external">The best way to map a @OneToMany relationship with JPA and Hibernate</a> </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在JPA中，最常用的关系大概就是一对多了。假设实体A、B的关系为A:B=1:n，通常情况下，我们会在B实体中使用@ManyToOne的注解。但是有时我们需要在A实体中使用@OneToMany的注解，那么我们应该怎么办呢？&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;以下代码中，
    
    </summary>
    
      <category term="Hibernate" scheme="https://chuhang123.github.io/categories/Hibernate/"/>
    
    
      <category term="JPA" scheme="https://chuhang123.github.io/tags/JPA/"/>
    
      <category term="OneToMany" scheme="https://chuhang123.github.io/tags/OneToMany/"/>
    
      <category term="映射" scheme="https://chuhang123.github.io/tags/%E6%98%A0%E5%B0%84/"/>
    
      <category term="单向" scheme="https://chuhang123.github.io/tags/%E5%8D%95%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>js的浅拷贝和深拷贝学习</title>
    <link href="https://chuhang123.github.io/2017/10/08/js-deep-copy-and-shallow-copy/"/>
    <id>https://chuhang123.github.io/2017/10/08/js-deep-copy-and-shallow-copy/</id>
    <published>2017-10-08T08:31:00.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>最近做项目时，发现把A赋值给B，当我改变B时，A也随之改变了。google了一下，了解到在js中，当一个变量复制另一个变量时，其实复制的是一个地址，改变其中一个变量，另一个也会随之改变。</p>
<p>这种复制分两种情况：拷贝引用（浅拷贝）和拷贝实例（深拷贝）<br><a id="more"></a></p>
<h2 id="浅copy"><a href="#浅copy" class="headerlink" title="浅copy"></a>浅copy</h2><ul>
<li><p>拷贝原对象的引用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o1 = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;;</div><div class="line"><span class="keyword">var</span> o2 = o1;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(o1 === o2);  <span class="comment">// =&gt;true</span></div><div class="line">o2.a = <span class="number">2</span>; </div><div class="line"><span class="built_in">console</span>.log(o1.a); <span class="comment">// =&gt; 2</span></div></pre></td></tr></table></figure>
</li>
<li><p>拷贝原对象的实例，但是对其内部的引用类型值，拷贝的是其引用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o1 = [<span class="string">'darko'</span>, &#123;<span class="attr">age</span>: <span class="number">22</span>&#125;];</div><div class="line"><span class="keyword">var</span> o2 = o1.slice(); <span class="comment">// 根据Array.prototype.slice()的特性，这里会返回一个o1的浅拷贝对象</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(o1 === o2); <span class="comment">// =&gt; false，说明o2拷贝的是o1的一个实例</span></div><div class="line"></div><div class="line">o2[<span class="number">0</span>] = <span class="string">'lee'</span>;</div><div class="line"><span class="built_in">console</span>.log(o1[<span class="number">0</span>]); <span class="comment">// =&gt; "darko" o1和o2内部包含的基本类型值，复制的是其实例，不会相互影响</span></div><div class="line"></div><div class="line">o2[<span class="number">1</span>].age = <span class="number">23</span>;</div><div class="line"><span class="built_in">console</span>.log(o1[<span class="number">1</span>].age); <span class="comment">// =&gt;23 o1和o2内部包含的引用类型值，复制的是其引用，会相互影响</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>浅copy实现<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">shallowClone</span>(<span class="params">source</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!source || <span class="keyword">typeof</span> source !== <span class="string">'object'</span>) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'error arguments'</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> targetObj = source.constructor === <span class="built_in">Array</span> ? [] : &#123;&#125;;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> keys <span class="keyword">in</span> source) &#123;</div><div class="line">        <span class="keyword">if</span> (source.hasOwnProperty(keys)) &#123;</div><div class="line">            targetObj[keys] = source[keys];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> targetObj;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="深copy"><a href="#深copy" class="headerlink" title="深copy"></a>深copy</h2><p>深copy有两种方法</p>
<ul>
<li>使用JSON.stringify和JSON.parse。<br><code>JSON.parse(JSON.stringify(object))</code>。这种方法只能copy对象的属性，不能copy对象的方法。</li>
<li>使用递归的方法实现<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">function deepClone(<span class="keyword">source</span>)&#123;</div><div class="line">   <span class="keyword">if</span>(!<span class="keyword">source</span> || typeof <span class="keyword">source</span> !== <span class="string">'object'</span>)&#123;</div><div class="line">     <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'error arguments'</span>, <span class="string">'shallowClone'</span>);</div><div class="line">   &#125;</div><div class="line">   var targetObj = <span class="keyword">source</span>.constructor === Array ? [] : &#123;&#125;;</div><div class="line">   <span class="keyword">for</span>(var keys in <span class="keyword">source</span>)&#123;</div><div class="line">      <span class="keyword">if</span>(<span class="keyword">source</span>.hasOwnProperty(keys))&#123;</div><div class="line">         <span class="keyword">if</span>(<span class="keyword">source</span>[keys] &amp;&amp; typeof <span class="keyword">source</span>[keys] === <span class="string">'object'</span>)&#123;</div><div class="line">           targetObj[keys] = <span class="keyword">source</span>[keys].constructor === Array ? [] : &#123;&#125;;</div><div class="line">           targetObj[keys] = deepClone(<span class="keyword">source</span>[keys]);</div><div class="line">         &#125;<span class="keyword">else</span>&#123;</div><div class="line">           targetObj[keys] = <span class="keyword">source</span>[keys];</div><div class="line">         &#125;</div><div class="line">      &#125; </div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> targetObj;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>参考链接：</p>
<ol>
<li><a href="https://segmentfault.com/a/1190000008637489" target="_blank" rel="external">JavaScript中的浅拷贝和深拷贝</a> </li>
<li><a href="https://www.zhihu.com/question/23031215" target="_blank" rel="external">javascript中的深拷贝和浅拷贝？</a> </li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近做项目时，发现把A赋值给B，当我改变B时，A也随之改变了。google了一下，了解到在js中，当一个变量复制另一个变量时，其实复制的是一个地址，改变其中一个变量，另一个也会随之改变。&lt;/p&gt;
&lt;p&gt;这种复制分两种情况：拷贝引用（浅拷贝）和拷贝实例（深拷贝）&lt;br&gt;
    
    </summary>
    
      <category term="js" scheme="https://chuhang123.github.io/categories/js/"/>
    
    
      <category term="deep" scheme="https://chuhang123.github.io/tags/deep/"/>
    
      <category term="shallow" scheme="https://chuhang123.github.io/tags/shallow/"/>
    
      <category term="copy" scheme="https://chuhang123.github.io/tags/copy/"/>
    
      <category term="clone" scheme="https://chuhang123.github.io/tags/clone/"/>
    
      <category term="assignment" scheme="https://chuhang123.github.io/tags/assignment/"/>
    
  </entry>
  
  <entry>
    <title>windows10/ubuntu双系统安装记录</title>
    <link href="https://chuhang123.github.io/2017/09/18/windows-ubuntu-double-system-install-record/"/>
    <id>https://chuhang123.github.io/2017/09/18/windows-ubuntu-double-system-install-record/</id>
    <published>2017-09-18T06:00:01.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>因为要换硬盘，所以要重新安装win10和ubuntu系统。把中间遇到的一些问题记录了下来。</p>
<h2 id="安装win10系统"><a href="#安装win10系统" class="headerlink" title="安装win10系统"></a>安装win10系统</h2><p>首先，下载了一个win10的iso文件，通过UltraISO刻录到U盘中。把新的硬盘装进电脑，启动，按下F12，把U盘作为第一启动项，然后界面一直循环出现如下代码<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">No Systemdisk. Booting <span class="keyword">from</span> harddisk.</div><div class="line">Start booting <span class="keyword">from</span> USB device...</div><div class="line">Disk formatted <span class="keyword">with</span> UltraISO <span class="number">9.0</span>(c) <span class="number">2002</span><span class="number">-2008</span> EZB System,Inc</div></pre></td></tr></table></figure></p>
<p>然后google了这个问题，有说是写入方式不对，或者没有把U盘作为第一启动项等，或者是iso文件的问题。我感觉可能行较大的是写入方式不对，刻录了多次，换了多种的写入方式，然而还是不行。最后，去网吧使用韩博士安装系统的方式，重新下载了一个iso文件，win10系统就重装成功了。</p>
<h2 id="安装ubuntu系统"><a href="#安装ubuntu系统" class="headerlink" title="安装ubuntu系统"></a>安装ubuntu系统</h2><p>安装ubuntu同样使用UltraISO刻录到U盘的方法，重启电脑一切正常，然后开始搭建java、maven、node、git等环境，配置完之后，以为大功告成。然而发现不能重启ubuntu系统了，此时心情是崩溃的，最终发现可以从高级选项中进入ubuntu系统，进入系统后，google了一番，决定使用boot repair修理一下，修理完之后，发现ubuntu、win10系统都进不去了，直接显示grub命令行。这是很揪心的，毕竟平时的一些资料都在里面。查找了一些解决办法，并没有解决。只能再次重装系统。</p>
<h2 id="再次重装系统"><a href="#再次重装系统" class="headerlink" title="再次重装系统"></a>再次重装系统</h2><p>但是应该重装那个呢。因为是后装的ubuntu系统，所以启动的时候win10是通过ubuntu启动的，问了下老师，如果重装win10系统，win10系统有一个启动修复的方法，挽救会win10系统，ubuntu系统就废掉了。</p>
<blockquote>
<p>当时比较纠结如果直接重装ubuntu系统，还能不能通过新装的ubuntu系统进入到之前安装的win10系统，经过实践之后发现是可以的。</p>
</blockquote>
<p>当时有ubuntu的iso文件，就先装了ubuntu系统试试，按照上一次安装ubuntu的方法，装完后，很是担心重复出现上一次的情况。老师问了下我的安装方式，说我安装类型哪一步有错误。我选择的是默认安装，所以ubuntu系统可能出问题，应该手动进行分区。于是就参考<a href="http://www.jianshu.com/p/2eebd6ad284d" target="_blank" rel="external">Windows10+Ubuntu双系统安装[多图]</a> （手动的进行分区）又重新安装了一下ubuntu系统，之后一切顺利。</p>
<p>参考链接：<br>1.<a href="http://www.jianshu.com/p/2eebd6ad284d" target="_blank" rel="external">Windows10+Ubuntu双系统安装[多图]</a> </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;因为要换硬盘，所以要重新安装win10和ubuntu系统。把中间遇到的一些问题记录了下来。&lt;/p&gt;
&lt;h2 id=&quot;安装win10系统&quot;&gt;&lt;a href=&quot;#安装win10系统&quot; class=&quot;headerlink&quot; title=&quot;安装win10系统&quot;&gt;&lt;/a&gt;安装win1
    
    </summary>
    
      <category term="basis" scheme="https://chuhang123.github.io/categories/basis/"/>
    
    
      <category term="ubuntu" scheme="https://chuhang123.github.io/tags/ubuntu/"/>
    
      <category term="win10" scheme="https://chuhang123.github.io/tags/win10/"/>
    
  </entry>
  
  <entry>
    <title>java 常见异常及原因收集</title>
    <link href="https://chuhang123.github.io/2017/09/07/java-exception-and-cause/"/>
    <id>https://chuhang123.github.io/2017/09/07/java-exception-and-cause/</id>
    <published>2017-09-07T02:21:57.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<ul>
<li>InvalidDataAccessApiUsageException: 单元测试时关联的实体未保存。</li>
<li>java.nio.file.NoSuchFileException:因为目录不存在，通过    <code>Files.createDirectories(imageLocation);</code>创建目录</li>
<li>JpaSystemException: 重建数据表</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;InvalidDataAccessApiUsageException: 单元测试时关联的实体未保存。&lt;/li&gt;
&lt;li&gt;java.nio.file.NoSuchFileException:因为目录不存在，通过    &lt;code&gt;Files.createDirec
    
    </summary>
    
      <category term="Spring" scheme="https://chuhang123.github.io/categories/Spring/"/>
    
    
      <category term="java" scheme="https://chuhang123.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>GLib-GIO-ERROR **: Settings schema xxx  is not installed</title>
    <link href="https://chuhang123.github.io/2017/08/27/GLib-GIO-ERROR-Settings-schema-xxx-is-not-installed/"/>
    <id>https://chuhang123.github.io/2017/08/27/GLib-GIO-ERROR-Settings-schema-xxx-is-not-installed/</id>
    <published>2017-08-27T03:08:24.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>今天安装peek的时候，报了这么一行错误<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(peek:<span class="number">11612</span>): GLib-GIO-<span class="built_in">ERROR</span> **: Settings schema 'com.uploadedlobster.peek' is <span class="keyword">not</span> installed</div><div class="line"></div><div class="line"><span class="keyword">Trace</span>/breakpoint <span class="keyword">trap</span> (core dumped)</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>首先对问题简单分析一下，大致是com.uploadedlobster.peek这个包没有没安装，或者安装了找不到，可是这个包应该怎么安装呢。</p>
<ul>
<li>第一步，还是老方法，把这行代码放到谷歌上，但并没有找到问题的解决方案。</li>
<li>接下来，就是找类似问题的解决方案，<code>Settings schema is not installed</code>，但是由于英文阅读能力不行，没有发现问题的解决方案。</li>
<li>然后卸载，尝试<code>sudo apt install -f peek</code>，安装相关的依赖，并没有什么用。</li>
<li>一番无奈之后，以<code>Settings schema is not installed 解决方案</code>为关键字，解决了该问题。</li>
</ul>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">glib-<span class="keyword">compile</span>-schemas <span class="regexp">/usr/</span>share<span class="regexp">/glib-2.0/</span>schemas</div></pre></td></tr></table></figure>
<p>执行完上述命令，peek就可以用了。可能和<code>/usr/share/glib-2.0/schemas</code>文件下的<code>com.uploadedlobster.peek.gschema.xml</code>文件有关系。</p>
<p>参考文献：<a href="http://blog.csdn.net/wshish920907/article/details/72730370" target="_blank" rel="external"> ubuntu的Files资源管理器打不开解决方案</a> </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天安装peek的时候，报了这么一行错误&lt;br&gt;&lt;figure class=&quot;highlight gauss&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;(peek:&lt;span class=&quot;number&quot;&gt;11612&lt;/span&gt;): GLib-GIO-&lt;span class=&quot;built_in&quot;&gt;ERROR&lt;/span&gt; **: Settings schema &#39;com.uploadedlobster.peek&#39; is &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; installed&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Trace&lt;/span&gt;/breakpoint &lt;span class=&quot;keyword&quot;&gt;trap&lt;/span&gt; (core dumped)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="install" scheme="https://chuhang123.github.io/tags/install/"/>
    
  </entry>
  
  <entry>
    <title>HTTP常见状态码 200 301 302 404 500</title>
    <link href="https://chuhang123.github.io/2017/08/09/http-staus-code/"/>
    <id>https://chuhang123.github.io/2017/08/09/http-staus-code/</id>
    <published>2017-08-09T12:29:58.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>一些常见的状态码为：</p>
<h2 id="1开头"><a href="#1开头" class="headerlink" title="1开头"></a>1开头</h2><p>1xx(临时响应)表示临时响应并需要请求者继续执行操作的状态代码。代码 说明<br>100 (继续) 请求者应当继续提出请求。 服务器返回此代码表示已收到请求的第一部分，正在等待其余部分。</p>
<a id="more"></a>
<p>101 (切换协议) 请求者已要求服务器切换协议，服务器已确认并准备切换。</p>
<h2 id="2开头"><a href="#2开头" class="headerlink" title="2开头"></a>2开头</h2><p>2xx (成功)表示成功处理了请求的状态代码。代码 说明</p>
<p>200 (成功) 服务器已成功处理了请求。 通常，这表示服务器提供了请求的网页。</p>
<p>201 (已创建) 请求成功并且服务器创建了新的资源。</p>
<p>202 (已接受) 服务器已接受请求，但尚未处理。</p>
<p>203 (非授权信息) 服务器已成功处理了请求，但返回的信息可能来自另一来源。</p>
<p>204 (无内容) 服务器成功处理了请求，但没有返回任何内容。</p>
<p>205 (重置内容) 服务器成功处理了请求，但没有返回任何内容。</p>
<p>206 (部分内容) 服务器成功处理了部分 GET 请求。</p>
<h2 id="3开头"><a href="#3开头" class="headerlink" title="3开头"></a>3开头</h2><p> 3xx (重定向) 表示要完成请求，需要进一步操作。 通常，这些状态代码用来重定向。代码 说明</p>
<p>300 (多种选择) 针对请求，服务器可执行多种操作。 服务器可根据请求者 (user agent) 选择一项操作，或提供操作列表供请求者选择。</p>
<p>301 (永久移动) 请求的网页已永久移动到新位置。 服务器返回此响应(对 GET 或 HEAD 请求的响应)时，会自动将请求者转到新位置。</p>
<p>302 (临时移动) 服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。</p>
<p>303 (查看其他位置) 请求者应当对不同的位置使用单独的 GET 请求来检索响应时，服务器返回此代码。</p>
<p>304 (未修改) 自从上次请求后，请求的网页未修改过。 服务器返回此响应时，不会返回网页内容。</p>
<p>305 (使用代理) 请求者只能使用代理访问请求的网页。 如果服务器返回此响应，还表示请求者应使用代理。</p>
<p>307 (临时重定向) 服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。</p>
<h2 id="4开头"><a href="#4开头" class="headerlink" title="4开头"></a>4开头</h2><p>4xx(请求错误) 这些状态代码表示请求可能出错，妨碍了服务器的处理。代码 说明</p>
<p>400 (错误请求) 服务器不理解请求的语法。</p>
<p>401 (未授权) 请求要求身份验证。 对于需要登录的网页，服务器可能返回此响应。</p>
<p>403 (禁止) 服务器拒绝请求。</p>
<p>404 (未找到) 服务器找不到请求的网页。</p>
<p>405 (方法禁用) 禁用请求中指定的方法。</p>
<p>406 (不接受) 无法使用请求的内容特性响应请求的网页。</p>
<p>407 (需要代理授权) 此状态代码与 401(未授权)类似，但指定请求者应当授权使用代理。</p>
<p>408 (请求超时) 服务器等候请求时发生超时。</p>
<p>409 (冲突) 服务器在完成请求时发生冲突。 服务器必须在响应中包含有关冲突的信息。</p>
<p>410 (已删除) 如果请求的资源已永久删除，服务器就会返回此响应。</p>
<p>411 (需要有效长度) 服务器不接受不含有效内容长度标头字段的请求。</p>
<p>412 (未满足前提条件) 服务器未满足请求者在请求中设置的其中一个前提条件。</p>
<p>413 (请求实体过大) 服务器无法处理请求，因为请求实体过大，超出服务器的处理能力。</p>
<p>414 (请求的 URI 过长) 请求的 URI(通常为网址)过长，服务器无法处理。</p>
<p>415 (不支持的媒体类型) 请求的格式不受请求页面的支持。</p>
<p>416 (请求范围不符合要求) 如果页面无法提供请求的范围，则服务器会返回此状态代码。</p>
<p>417 (未满足期望值) 服务器未满足”期望”请求标头字段的要求。</p>
<h2 id="5开头"><a href="#5开头" class="headerlink" title="5开头"></a>5开头</h2><p>5xx(服务器错误)这些状态代码表示服务器在尝试处理请求时发生内部错误。 这些错误可能是服务器本身的错误，而不是请求出错。代码 说明</p>
<p>500 (服务器内部错误) 服务器遇到错误，无法完成请求。</p>
<p>501 (尚未实施) 服务器不具备完成请求的功能。 例如，服务器无法识别请求方法时可能会返回此代码。</p>
<p>502 (错误网关) 服务器作为网关或代理，从上游服务器收到无效响应。</p>
<p>503 (服务不可用) 服务器目前无法使用(由于超载或停机维护)。 通常，这只是暂时状态。</p>
<p>504 (网关超时) 服务器作为网关或代理，但是没有及时从上游服务器收到请求。</p>
<p>505 (HTTP 版本不受支持) 服务器不支持请求中所用的 HTTP 协议版本。</p>
<blockquote>
<p>转自：<a href="http://www.cnblogs.com/starof/p/5035119.html" target="_blank" rel="external">HTTP常见状态码 200 301 302 404 500</a> </p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一些常见的状态码为：&lt;/p&gt;
&lt;h2 id=&quot;1开头&quot;&gt;&lt;a href=&quot;#1开头&quot; class=&quot;headerlink&quot; title=&quot;1开头&quot;&gt;&lt;/a&gt;1开头&lt;/h2&gt;&lt;p&gt;1xx(临时响应)表示临时响应并需要请求者继续执行操作的状态代码。代码 说明&lt;br&gt;100 (继续) 请求者应当继续提出请求。 服务器返回此代码表示已收到请求的第一部分，正在等待其余部分。&lt;/p&gt;
    
    </summary>
    
    
      <category term="http" scheme="https://chuhang123.github.io/tags/http/"/>
    
  </entry>
  
  <entry>
    <title>spring装配bean——自动化装配、java显式装配</title>
    <link href="https://chuhang123.github.io/2017/08/01/spring-wiring-bean/"/>
    <id>https://chuhang123.github.io/2017/08/01/spring-wiring-bean/</id>
    <published>2017-08-01T03:00:39.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>当我们在使用Spring框架时，您可能会见到<code>@bean</code>注解，初学者可能会疑惑<code>@bean</code>是如何发挥作用的？带着这个疑问我们来探究spring装配bean的相关知识。</p>
<a id="more"></a>
<h2 id="Spring配置bean的可选方案"><a href="#Spring配置bean的可选方案" class="headerlink" title="Spring配置bean的可选方案"></a>Spring配置bean的可选方案</h2><p>spring提供了三种主要的装配机制</p>
<ul>
<li>隐式的自动化装配bean</li>
<li>在java中显式的配置</li>
<li>在XML中显式的配置</li>
</ul>
<p>spring实战书中，建议在实际的项目中尽可能的使用自动配置的机制，显示配置越少越好。当必须要使用显示的配置时，建议优先使用JavaConfig，只有在你想使用便利的xml命名空间时，才应该使用xml。</p>
<h2 id="自动化装配bean"><a href="#自动化装配bean" class="headerlink" title="自动化装配bean"></a>自动化装配bean</h2><ul>
<li><p>定义一个接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> soundsystem;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CompactDisc</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>定义一个带有@Component注解的CompactDisc实现类SgtPeppers</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> soundsystem;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>  <span class="comment">//表明该类为组件类，并告知Spring为这个类创建bean</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SgtPeppers</span> <span class="keyword">implements</span> <span class="title">CompactDisc</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</div><div class="line">    System.out.println(<span class="string">"this is a test"</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>Spring会为SgtPeppers的bean设置ID为sgtPeppers，我们也可以指定bean的ID，比如我们要指定bean的ID为mengyunzhi，那么应该@Component(“mengyunzhi”)。</p>
<ul>
<li>@ComponentScan注解启用了组件扫描<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> soundsystem;</div><div class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.ComponentScan;</div><div class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</div><div class="line"></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@ComponentScan</span>		<span class="comment">//启用组件扫描。注意：需要和@Configuration注解一起使用</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CDPlayerConfig</span> </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>@ComponentScan默认会扫面与CDPlayerConfig（配置类）相同的包。即扫描soundsystem包以及这个包下的所有子包。那么他是怎么扫描的呢？他会查找带有@Component注解的类，并会在Spring中自动创建一个bean。<br>如果要需要设置组件扫描的包，可以使用@ComponentScan(“com.my.package.first”)，如果要扫描多个包，可以修改为@ComponentScan({“com.my.package.first”,”com.my.package.second”})</p>
<h2 id="通过java代码装配bean"><a href="#通过java代码装配bean" class="headerlink" title="通过java代码装配bean"></a>通过java代码装配bean</h2><p>去除上例中的@ComponentScan注解和@Component注解，我们使用java代码显示声明bean。<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> soundsystem;</div><div class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</div><div class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</div><div class="line"></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CDPlayerConfig</span> </span>&#123;</div><div class="line">  </div><div class="line">  <span class="meta">@Bean</span></div><div class="line">  <span class="keyword">public</span> CompactDisc compactDisc() &#123;</div><div class="line">    <span class="keyword">return</span> new SgtPeppers();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>@Bean注解会告诉spring该方法会返回一个对象，该对象即为产生的bean实例。默认bean的ID为方法名，我们也可以使用@Bean(name=”xxxx”)设置bean的ID。</p>
<h2 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h2><ul>
<li>如果我们同时创建两个相同的bean，会怎么样呢？<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Bean</span></div><div class="line">  <span class="keyword">public</span> <span class="function">CompactDisc <span class="title">compactDisc</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SgtPeppers();</div><div class="line">  &#125;</div><div class="line">  <span class="meta">@Bean</span></div><div class="line">  <span class="keyword">public</span> <span class="function">CompactDisc <span class="title">anotherCompactDisc</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SgtPeppers();</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>Spring不会创建两个完全相同的bean。所以，当我们创建第二个bean时，spring会拦截并返回已经创建的bean。</p>
<ul>
<li>如果您使用了SpringBoot框架，你可能会疑惑并没有看到@Configuration、@ComponentScan注解，那是因为我们经常会一起使用@Configuration, @EnableAutoConfiguration 和 @ComponentScan，所以@SpringBootApplication等同于@Configuration, @EnableAutoConfiguration and @ComponentScan。另外，当我们使用@Service, @Repository, @Controller注解时，spring会认为该类为组件类，spring也会为我们创建bean。</li>
<li>当我们打开idea的spring来查看项目为我们创建的bean时，我们会发现一些接口如WorkRepository，并没有使用任何注解，但是生成了bean，这是为什么呢？那是因为 @EnableAutoConfiguration也有@EnableJpaRepositories的功能，basePackage配置项会自动扫描当前包下的Repository并生成bean。</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;当我们在使用Spring框架时，您可能会见到&lt;code&gt;@bean&lt;/code&gt;注解，初学者可能会疑惑&lt;code&gt;@bean&lt;/code&gt;是如何发挥作用的？带着这个疑问我们来探究spring装配bean的相关知识。&lt;/p&gt;
    
    </summary>
    
      <category term="Spring" scheme="https://chuhang123.github.io/categories/Spring/"/>
    
    
      <category term="bean" scheme="https://chuhang123.github.io/tags/bean/"/>
    
      <category term="装配" scheme="https://chuhang123.github.io/tags/%E8%A3%85%E9%85%8D/"/>
    
      <category term="自动化" scheme="https://chuhang123.github.io/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>https初步学习之——原理、性能</title>
    <link href="https://chuhang123.github.io/2017/07/16/http-and-https/"/>
    <id>https://chuhang123.github.io/2017/07/16/http-and-https/</id>
    <published>2017-07-16T01:51:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>一直听说https比http安全，https 是加过密的http。但是https具体是怎样加<a href="http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html" target="_blank" rel="external">SSL/TLS协议运行机制的概述</a> 密认证的？http和https的安全性区别在哪里？https对服务器性能有什么影响？带着这些疑问查阅了相关资料，并记录。</p>
<a id="more"></a>
<h2 id="http和https的区别"><a href="#http和https的区别" class="headerlink" title="http和https的区别"></a>http和https的区别</h2><p>不使用SSL/TLS的通信，就是我们所说的http通信，有以下三种风险：</p>
<ul>
<li>窃听风险（eavesdropping）：第三方可以获知通信内容。</li>
<li>篡改风险（tampering）：第三方可以修改通信内容。</li>
<li>冒充风险（pretending）：第三方可以冒充他人身份参与通信。</li>
</ul>
<p>当我们对http通信使用SSL/TLS协议后，就是我们所说的https通信，希望达到：</p>
<ul>
<li>所有信息都是加密传播，第三方无法窃听。</li>
<li>具有校验机制，一旦被篡改，通信双方会立刻发现。</li>
<li>配备身份证书，防止身份被冒充。</li>
</ul>
<h2 id="https通信过程"><a href="#https通信过程" class="headerlink" title="https通信过程"></a>https通信过程</h2><p>时序图如下<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/选区_093.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>说明：</p>
<ul>
<li>步骤1中的证书包含了公钥、颁证机构、网址、过期时间。</li>
<li>如果服务器端需要客户端提供证书，则会在步骤1中的返回信息中增加一个参数（要求客户端提供证书），那么步骤4中也会增加一个参数（客户端证书）。</li>
<li>客户端和服务器端生成对称密钥后，之后所有的通信都使用对称秘钥加密。</li>
</ul>
<h2 id="结合实例"><a href="#结合实例" class="headerlink" title="结合实例"></a>结合实例</h2><p>当一个人（小明）登录一个网站后，该网站的服务器会为小明分配一个sessionId，发送给客户端，当小明再次请求这个服务器时，携带着上次分配的sessionId，这样服务器就知道是小明访问的网站了。</p>
<ul>
<li>假设这个请求是http请求。那么，第三方就可以获取这个请求的信息，获取sessionId。然后携带着这个sessionId模拟http请求，那么服务器就会认为是小明发送的请求，第三方就可以获取、修改小明的数据等。</li>
<li>假设这个请求是https请求。同样的，第三方获取到了请求的相关信息，但是并不知道这里面的内容是什么，因为这些数据都是经过加密的。如果别人修改了数据，服务器也会知道这个数据被别人修改了，因为SSL/TLS协议对数据通过hash算法（如sha1、md5）加密，加密结果不一致，就会被认为内容被篡改过了。<br>通过上面两个实例，你会不会认为使用https就一定安全呢？如果是，那你就错了。https只能保证内容在传输的过程中不会被别人篡改或者窃取。但是，如果数据在客户端或者服务器端被窃取或者修改，也一样存在风险。</li>
</ul>
<h2 id="http和https对服务器性能的影响"><a href="#http和https对服务器性能的影响" class="headerlink" title="http和https对服务器性能的影响"></a>http和https对服务器性能的影响</h2><p>网站实现https，国外比较普及，但是在国内很多网站并没有使用https，其中一个比较重要的原因是网站的用户体验和性能下降明。那么使用https对网站的性能到底有多大的影响呢？<br> http使用TCP 三次握手建立连接，客户端和服务器需要交换3个包，https除了 TCP 的三个包，还要加上 ssl握手需要的9个包，所以一共是12个包。一个链接测试，http是114毫秒；https建立连接，耗费436毫秒。ssl 部分花费322毫秒。<br>你可能会问，每一次请求都需要那么多时间么？答案是否定的，第一次进行https通信时握手阶段生成的对称秘钥后，接下来，客户端与服务器进入加密通信，就完全是使用普通的HTTP协议，只不过用”会话密钥”加密内容。<br>在<a href="https://gxnotes.com/article/62484.html" target="_blank" rel="external">HTTP与HTTPS性能</a> 文章中，提出了具体的优化方案，期待将来有机会在项目实战中使用到。</p>
<p>参考文献：</p>
<ol>
<li><a href="https://buzzorange.com/techorange/2015/08/31/https-importance/" target="_blank" rel="external">HTTP 必死：先知 Google 唿吁大家升级 HTTPS， 网页浏览更有保障</a> </li>
<li><a href="https://www.zhihu.com/question/19577317" target="_blank" rel="external">http 和 https 有何区别？如何灵活使用？</a> </li>
<li><a href="https://blog.wilddog.com/?p=210" target="_blank" rel="external">扒一扒HTTPS网站的内幕</a> </li>
<li><a href="http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html" target="_blank" rel="external">SSL/TLS协议运行机制的概述</a> </li>
<li><a href="https://www.processon.com/view/59292a5ee4b0265ca26f78c9" target="_blank" rel="external">https时序图</a> </li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一直听说https比http安全，https 是加过密的http。但是https具体是怎样加&lt;a href=&quot;http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html&quot;&gt;SSL/TLS协议运行机制的概述&lt;/a&gt; 密认证的？http和https的安全性区别在哪里？https对服务器性能有什么影响？带着这些疑问查阅了相关资料，并记录。&lt;/p&gt;
    
    </summary>
    
    
      <category term="https" scheme="https://chuhang123.github.io/tags/https/"/>
    
      <category term="安全" scheme="https://chuhang123.github.io/tags/%E5%AE%89%E5%85%A8/"/>
    
      <category term="服务器" scheme="https://chuhang123.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
      <category term="性能" scheme="https://chuhang123.github.io/tags/%E6%80%A7%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>SpringMVC实现session分布式管理</title>
    <link href="https://chuhang123.github.io/2017/07/06/Using-session-in-SpringMVC/"/>
    <id>https://chuhang123.github.io/2017/07/06/Using-session-in-SpringMVC/</id>
    <published>2017-07-05T19:48:23.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>在程序开发中不可避免的要和session打交道，那么我们如何在Spring项目使用session呢？本文记录了在项目中使用session的流程和遇到的问题。</p>
<blockquote>
<p>环境：SpringMVC，tomcat，redis，Spring session</p>
</blockquote>
<a id="more"></a>
<h2 id="配置spring-session"><a href="#配置spring-session" class="headerlink" title="配置spring session"></a>配置spring session</h2><ul>
<li><p>安装jar包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.session<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-session<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>安装redis，安装方式请自行google。下面附几条常用的命令。</p>
<ul>
<li>启动<code>redis-server.exe redis.windows.conf</code></li>
<li>运行<code>redis-cli.exe -h 127.0.0.1 -p 6379</code></li>
<li>设置密码<code>config set requirepass test123</code></li>
<li>授权<code>auth test123</code></li>
<li>查询<code>keys  *</code></li>
</ul>
</li>
<li><p>配置spring</p>
<ul>
<li><p>创建spring配置</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="variable">@Configuration</span></div><div class="line"><span class="variable">@EnableRedisHttpSession</span> </div><div class="line">public class HttpSessionConfig &#123;</div><div class="line">	<span class="comment">// 设置HttpSession策略。默认读取header中的X-Auth-Token,作为sessionId。</span></div><div class="line">        <span class="variable">@Bean</span></div><div class="line">        public HttpSessionStrategy httpSessionStrategy() &#123;</div><div class="line">                <span class="selector-tag">return</span> <span class="selector-tag">new</span> <span class="selector-tag">HeaderHttpSessionStrategy</span>(); </div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> @EnableRedisHttpSession注解创建了springSessionRepositoryFilter来实现过滤功能，将所有的session都放在了redis中。</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>在.properties或者.yml文件中配置redis<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">spring<span class="selector-class">.session</span><span class="selector-class">.store-type</span>=redis</div><div class="line">spring<span class="selector-class">.redis</span><span class="selector-class">.host</span>=localhost</div><div class="line">spring<span class="selector-class">.redis</span><span class="selector-class">.password</span>=test123</div><div class="line">spring<span class="selector-class">.redis</span><span class="selector-class">.port</span>=<span class="number">6379</span></div><div class="line">server.session-timeout=<span class="number">86400</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="如何获取session"><a href="#如何获取session" class="headerlink" title="如何获取session"></a>如何获取session</h2><p>我们可以通过一下方式通过键值对的形式储存设置session。<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">HttpSession session = request.getSession()<span class="comment">;</span></div><div class="line">session.setAttribute(key, value)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>运行后，我们可以看到redis中多了一条记录。但是我们如何把这条记录取出来呢，这个问题似乎难倒了很多人。在上面配置spring时，我们加入了以下代码<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 设置HttpSession策略。默认读取header中的X-Auth-Token,作为sessionId。</span></div><div class="line"><span class="meta">@Bean</span></div><div class="line"><span class="keyword">public</span> <span class="function">HttpSessionStrategy <span class="title">httpSessionStrategy</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HeaderHttpSessionStrategy(); </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这段代码的作用是，当我们接收到http请求时，响应头信息会有<code>x-auth-token</code>，当我们你发送请求时，头信息中也会有<code>x-auth-token</code>。回到问题，接下来如何具体实现呢，时序图如下<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/选区_083.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>当我们第一次发送请求后，响应头信息中会有一项<code>x-auth-token</code>，再发送下一次请求时，把第一次请求的<code>x-auth-token</code>及对应的值放在头信息中，那么HttpSession就认为是同一个客户发送的请求，我们就可以通过<code>getAttribute</code>方法获取session信息了。</p>
<blockquote>
<p>时序图中的长方形表示激活，代表时序图中对象执行一项操作的时期。</p>
</blockquote>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>通过时序图屡一下关系<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/选区_084.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>通过时序图可以知道，我们把session信息储存在过滤器中，这样session就不依赖于各个节点的服务器，直接从高性能的键值对数据库redis中获取session信息。</p>
<p>参考文献：1.<a href="https://docs.spring.io/spring-session/docs/current/reference/html5/guides/rest.html" target="_blank" rel="external">https://docs.spring.io/spring-session/docs/current/reference/html5/guides/rest.html</a> </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在程序开发中不可避免的要和session打交道，那么我们如何在Spring项目使用session呢？本文记录了在项目中使用session的流程和遇到的问题。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;环境：SpringMVC，tomcat，redis，Spring session&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="SpringMvc" scheme="https://chuhang123.github.io/categories/SpringMvc/"/>
    
    
      <category term="session" scheme="https://chuhang123.github.io/tags/session/"/>
    
  </entry>
  
  <entry>
    <title>JS异步编程解决方法实例</title>
    <link href="https://chuhang123.github.io/2017/07/05/Solve-js-asynchronously/"/>
    <id>https://chuhang123.github.io/2017/07/05/Solve-js-asynchronously/</id>
    <published>2017-07-05T15:04:07.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>在js中，如果函数B需要A的返回值，由于js的异步执行，我们会得到一个undefined，本文通过代码实例记录了js异步编程的4中解决方案。<br><a id="more"></a></p>
<h2 id="问题实例"><a href="#问题实例" class="headerlink" title="问题实例"></a>问题实例</h2><p>函数A比较耗时，但是函数B需要函数A的返回结果，如果按我们正常的写法，应该是这样的<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="keyword">self</span> = this;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span> <span class="params">(arg)</span> </span>&#123;</div><div class="line">	setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">　　　　　　	<span class="keyword">self</span>.numA = <span class="number">3</span> * arg;</div><div class="line">	 	console.log(<span class="string">"A的值是"</span> + <span class="keyword">self</span>.numA);</div><div class="line">　　　　&#125;, <span class="number">500</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span> <span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">var</span> numB = <span class="keyword">self</span>.numA * <span class="number">4</span>;</div><div class="line">	console.log(<span class="string">"B的值是"</span> + numB);</div><div class="line">&#125;</div><div class="line">A(<span class="number">2</span>);</div><div class="line">B(<span class="number">3</span>);</div></pre></td></tr></table></figure></p>
<p>但是执行结果确实这样的<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">B的值是NaN</span></div><div class="line">A的值是<span class="number">6</span></div></pre></td></tr></table></figure></p>
<p>如果我们使用嵌套的方法，代码是横向扩展，很不美观，且不易阅读。有以下几种解决方案。</p>
<h2 id="方案一：回调函数"><a href="#方案一：回调函数" class="headerlink" title="方案一：回调函数"></a>方案一：回调函数</h2><p>代码如下：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="keyword">self</span> = this;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span> <span class="params">(arg, callback)</span> </span>&#123;</div><div class="line">	setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">　　　　　　	<span class="keyword">self</span>.numA = <span class="number">3</span> * arg;</div><div class="line">	 	console.log(<span class="string">"A的值是"</span> + <span class="keyword">self</span>.numA);</div><div class="line">	 	callback();</div><div class="line">　　　　&#125;, <span class="number">1000</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span> <span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">var</span> numB = <span class="keyword">self</span>.numA * <span class="number">4</span>;</div><div class="line">	console.log(<span class="string">"B的值是"</span> + numB);</div><div class="line">&#125;</div><div class="line">A(<span class="number">2</span>, B);</div></pre></td></tr></table></figure></p>
<p>输出结果如下：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">A的值是<span class="number">6</span></div><div class="line">B的值是<span class="number">24</span></div></pre></td></tr></table></figure></p>
<p>是我们的期望结果</p>
<blockquote>
<p>如果你想在函数A执行完setTimeout之后再执行函数B，那么通过回调函数是无法事项的。可以通过下面的方法实现。</p>
</blockquote>
<h2 id="方案二：Promises对象"><a href="#方案二：Promises对象" class="headerlink" title="方案二：Promises对象"></a>方案二：Promises对象</h2><p>还是按照上面的顺序，函数A需要在B前面执行。Promises对象的大致意思是没执行一个异步任务就返回一个promise对象，对象有then方法，允许有回调函数，可以这样写<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">      	setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">　　　　　  self.numA = <span class="number">3</span>;</div><div class="line">	   <span class="built_in">console</span>.log(<span class="string">"A的值是"</span> + self.numA);</div><div class="line">	   resolve(<span class="string">'Async Hello world'</span>);</div><div class="line">　　　　&#125;, <span class="number">500</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">A().then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</div><div class="line">  	<span class="keyword">var</span> numB = self.numA * <span class="number">4</span>;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"B的值是"</span> + numB);</div><div class="line">        <span class="built_in">console</span>.log(value);    <span class="comment">// =&gt; 'Async Hello world'</span></div><div class="line">&#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(error);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>Promise 的写法只是回调函数的改进，使用then方法以后，异步任务的两段执行看得更清楚了，除此以外，并无新意。在不同的js框架中使用会有所差别。</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>除了以上两种方法，我们还可以通过事件的监听、发布/订阅等方法实现异步编程，但是不同的框架实现方法可能会有所差别。但是，作为一个初学者，我们应该抱着学习的心态使用回调函数，有助于理解js。</p>
<p> 参考文献：</p>
<ol>
<li><a href="http://www.ruanyifeng.com/blog/2012/12/asynchronous%EF%BC%BFjavascript.html" target="_blank" rel="external">Javascript异步编程的4种方法</a> </li>
<li><a href="http://liubin.org/promises-book/" target="_blank" rel="external">JavaScript Promise迷你书（中文版）</a> </li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在js中，如果函数B需要A的返回值，由于js的异步执行，我们会得到一个undefined，本文通过代码实例记录了js异步编程的4中解决方案。&lt;br&gt;
    
    </summary>
    
      <category term="js" scheme="https://chuhang123.github.io/categories/js/"/>
    
    
      <category term="asynchronously" scheme="https://chuhang123.github.io/tags/asynchronously/"/>
    
  </entry>
  
  <entry>
    <title>净水器API</title>
    <link href="https://chuhang123.github.io/2017/06/29/WaterPurifier-API/"/>
    <id>https://chuhang123.github.io/2017/06/29/WaterPurifier-API/</id>
    <published>2017-06-29T02:30:09.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>净水器方提供API接口，负责处理单个净水器的请求信息。如获取充值信息，用户使用饮水机信息等。</p>
<a id="more"></a>
<h1 id="API列表"><a href="#API列表" class="headerlink" title="API列表"></a>API列表</h1><ul>
<li><a href="./#getCurrentTime">getCurrentTime</a>  ，获取服务器当前时间</li>
<li><a href="./#getRechargeInfo">getRechargeInfo</a> ， 获取充值信息</li>
<li><a href="./#isRechargeOk">isRechargeOk</a>  ，是否充值成功</li>
<li><a href="./#useInfo">useInfo</a> ，净水器使用信息</li>
</ul>
<h1 id="getCurrentTime"><a href="#getCurrentTime" class="headerlink" title="getCurrentTime"></a>getCurrentTime</h1><p>获取服务器当前时间</p>
<h2 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h2><p><a href="https://api.water.mengyunzhi.com/getCurrentTime" target="_blank" rel="external">https://api.water.mengyunzhi.com/getCurrentTime</a> </p>
<h2 id="支持格式"><a href="#支持格式" class="headerlink" title="支持格式"></a>支持格式</h2><p>JSON</p>
<h2 id="HTTP请求方式"><a href="#HTTP请求方式" class="headerlink" title="HTTP请求方式"></a>HTTP请求方式</h2><p>GET</p>
<h2 id="请求参数"><a href="#请求参数" class="headerlink" title="请求参数"></a>请求参数</h2><p>无</p>
<h2 id="请求示例"><a href="#请求示例" class="headerlink" title="请求示例"></a>请求示例</h2><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">GET</span> <span class="string">/api/getCurrentTime</span> HTTP/1.1</div><div class="line"><span class="attribute">Content-Type</span>: application/x-www-form-urlencoded;charset=UTF-8</div><div class="line"><span class="attribute">Host</span>: https://api.water.mengyunzhi.com</div></pre></td></tr></table></figure>
<h2 id="响应结果示例"><a href="#响应结果示例" class="headerlink" title="响应结果示例"></a>响应结果示例</h2><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 <span class="number">200</span> OK</div><div class="line"><span class="attribute">Content-Type</span>: text/plain;charset=ISO-8859-1</div><div class="line"><span class="attribute">Content-Length</span>: 10</div><div class="line">  </div><div class="line"><span class="attribute">1498891791</span></div></pre></td></tr></table></figure>
<h1 id="getRechargeInfo"><a href="#getRechargeInfo" class="headerlink" title="getRechargeInfo"></a>getRechargeInfo</h1><p>获取充值水量</p>
<h2 id="URL-1"><a href="#URL-1" class="headerlink" title="URL"></a>URL</h2><p><a href="https://api.water.mengyunzhi.com/getRechargeInfo" target="_blank" rel="external">https://api.water.mengyunzhi.com/getRechargeInfo</a></p>
<h2 id="支持格式-1"><a href="#支持格式-1" class="headerlink" title="支持格式"></a>支持格式</h2><p>JSON</p>
<h2 id="HTTP请求方式-1"><a href="#HTTP请求方式-1" class="headerlink" title="HTTP请求方式"></a>HTTP请求方式</h2><p>GET</p>
<h2 id="请求参数-1"><a href="#请求参数-1" class="headerlink" title="请求参数"></a>请求参数</h2><ul>
<li>id。类型：Long。说明：净水器编号。</li>
<li>timestamp。类型：String。说明：时间戳。</li>
<li>randomString。类型：String。说明：随机生成的字符串。</li>
<li>encryptionInfo。类型：String。将timestamp、randomString、”mengyunzhi”进行字符串拼接（格式：timestamp + randomString + “mengyunzhi”），并对拼接结果进行sha1加密，生成encryptionInfo。</li>
</ul>
<h2 id="请求示例-1"><a href="#请求示例-1" class="headerlink" title="请求示例"></a>请求示例</h2><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">GET</span> <span class="string">/api/getRechargeInfo?id=23213&amp;timestamp=1497457292548&amp;randomString=unzdtggyopn1fl7sx68b8olxr&amp;encryptionInfo=37cde59cfa3384c84d9bf7545be348bc880c79bd</span> HTTP/1.1</div><div class="line"><span class="attribute">Content-Type</span>: application/x-www-form-urlencoded;charset=UTF-8</div><div class="line"><span class="attribute">Host</span>: https://api.water.mengyunzhi.com</div></pre></td></tr></table></figure>
<h2 id="响应结果示例-1"><a href="#响应结果示例-1" class="headerlink" title="响应结果示例"></a>响应结果示例</h2><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 <span class="number">200</span> OK</div><div class="line"><span class="attribute">Content-Type</span>: application/json;charset=UTF-8</div><div class="line"><span class="attribute">Content-Length</span>: 2</div><div class="line">   </div><div class="line"><span class="attribute">20</span></div></pre></td></tr></table></figure>
<h1 id="isRechargeOk"><a href="#isRechargeOk" class="headerlink" title="isRechargeOk"></a>isRechargeOk</h1><p>是否充值成功</p>
<h2 id="URL-2"><a href="#URL-2" class="headerlink" title="URL"></a>URL</h2><p><a href="https://api.water.mengyunzhi.com/isRechargeOk" target="_blank" rel="external">https://api.water.mengyunzhi.com/isRechargeOk</a></p>
<h2 id="支持格式-2"><a href="#支持格式-2" class="headerlink" title="支持格式"></a>支持格式</h2><p>JSON</p>
<h2 id="HTTP请求方式-2"><a href="#HTTP请求方式-2" class="headerlink" title="HTTP请求方式"></a>HTTP请求方式</h2><p>POST</p>
<h2 id="请求参数-2"><a href="#请求参数-2" class="headerlink" title="请求参数"></a>请求参数</h2><ul>
<li>id。类型：Long。说明：净水器编号。</li>
<li>shouldRecharge.。类型：int。说明：应该充值水量。</li>
<li>actualRecharge。类型：int。说明：实际充值水量。</li>
</ul>
<h2 id="请求头信息"><a href="#请求头信息" class="headerlink" title="请求头信息"></a>请求头信息</h2><ul>
<li>timestamp。类型：String。说明：时间戳。</li>
<li>randomString。类型：String。说明：随机生成的字符串。</li>
<li>encryptionInfo。类型：String。将timestamp、randomString、”mengyunzhi”进行字符串拼接（格式：timestamp + randomString + “mengyunzhi”），并对拼接结果进行sha1加密，生成encryptionInfo。</li>
</ul>
<h2 id="请求示例-2"><a href="#请求示例-2" class="headerlink" title="请求示例"></a>请求示例</h2><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">POST</span> <span class="string">/api/isRechargeOk</span> HTTP/1.1</div><div class="line"></div><div class="line"><span class="groovy">Content-<span class="string">Type:</span> application/json;charset=UTF<span class="number">-8</span></span></div><div class="line"><span class="string">Host:</span> <span class="string">https:</span><span class="comment">//api.water.mengyunzhi.com</span></div><div class="line"><span class="string">Timestamp:</span> <span class="number">1497457292548</span></div><div class="line"><span class="string">RandomString:</span> unzdtggyopn1fl7sx68b8olxr</div><div class="line"><span class="string">EncryptionInfo:</span> <span class="number">37</span>cde59cfa3384c84d9bf7545be348bc880c79bd</div><div class="line">   </div><div class="line">&#123;</div><div class="line">	<span class="string">"id"</span>: <span class="number">1</span>,</div><div class="line">	<span class="string">"shouldRecharge"</span>: <span class="number">200</span>,</div><div class="line">	<span class="string">"actualRecharge"</span>: <span class="number">200</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="响应结果示例-2"><a href="#响应结果示例-2" class="headerlink" title="响应结果示例"></a>响应结果示例</h2><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 <span class="number">200</span> OK</div></pre></td></tr></table></figure>
<h1 id="useInfo"><a href="#useInfo" class="headerlink" title="useInfo"></a>useInfo</h1><p>净水器使用信息</p>
<h2 id="URL-3"><a href="#URL-3" class="headerlink" title="URL"></a>URL</h2><p><a href="https://api.water.mengyunzhi.com/useInfo" target="_blank" rel="external">https://api.water.mengyunzhi.com/useInfo</a></p>
<h2 id="支持格式-3"><a href="#支持格式-3" class="headerlink" title="支持格式"></a>支持格式</h2><p>JSON</p>
<h2 id="HTTP请求方式-3"><a href="#HTTP请求方式-3" class="headerlink" title="HTTP请求方式"></a>HTTP请求方式</h2><p>POST</p>
<h2 id="请求参数-3"><a href="#请求参数-3" class="headerlink" title="请求参数"></a>请求参数</h2><ul>
<li>id。类型：Long。说明：净水器编号。</li>
<li>usedBeforeWaterQuality。类型：int。说明：净水前水质。</li>
<li>usedAfterWaterQuality。类型：int。说明：净水后水质。</li>
<li>usedWaterQuantity。类型：int。说明：用水量。</li>
<li>lastInteractTime。类型：Long。说明：上次交互的时间戳。</li>
</ul>
<h2 id="请求头信息-1"><a href="#请求头信息-1" class="headerlink" title="请求头信息"></a>请求头信息</h2><ul>
<li>timestamp。类型：String。说明：时间戳。</li>
<li>randomString。类型：String。说明：随机生成的字符串。</li>
<li>encryptionInfo。类型：String。将timestamp、randomString、”mengyunzhi”进行字符串拼接（格式：timestamp + randomString + “mengyunzhi”），并对拼接结果进行sha1加密，生成encryptionInfo。</li>
</ul>
<h2 id="请求示例-3"><a href="#请求示例-3" class="headerlink" title="请求示例"></a>请求示例</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">POST <span class="regexp">/api/</span>useInfo HTTP/<span class="number">1.1</span></div><div class="line">Content-<span class="string">Type:</span> application/json;charset=UTF<span class="number">-8</span></div><div class="line"><span class="string">Host:</span> <span class="string">https:</span><span class="comment">//api.water.mengyunzhi.com</span></div><div class="line"><span class="string">Timestamp:</span> <span class="number">1497457292548</span></div><div class="line"><span class="string">RandomString:</span> unzdtggyopn1fl7sx68b8olxr</div><div class="line"><span class="string">EncryptionInfo:</span> <span class="number">37</span>cde59cfa3384c84d9bf7545be348bc880c79bd</div><div class="line">   </div><div class="line">&#123;</div><div class="line">	<span class="string">"id"</span>: <span class="string">"1"</span>,</div><div class="line">	<span class="string">"usedBeforeWaterQuality"</span>: <span class="number">200</span>,</div><div class="line">	<span class="string">"usedAfterWaterQuality"</span>: <span class="number">2030</span>,</div><div class="line">	<span class="string">"usedWaterQuantity"</span>: <span class="number">2200</span>,</div><div class="line">	<span class="string">"lastInteractTime"</span>: <span class="number">1497457292548</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="响应结果示例-3"><a href="#响应结果示例-3" class="headerlink" title="响应结果示例"></a>响应结果示例</h2><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 <span class="number">200</span> OK</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;净水器方提供API接口，负责处理单个净水器的请求信息。如获取充值信息，用户使用饮水机信息等。&lt;/p&gt;
    
    </summary>
    
    
      <category term="API" scheme="https://chuhang123.github.io/tags/API/"/>
    
  </entry>
  
  <entry>
    <title>git常用指令</title>
    <link href="https://chuhang123.github.io/2017/06/26/git-command/"/>
    <id>https://chuhang123.github.io/2017/06/26/git-command/</id>
    <published>2017-06-26T14:39:45.000Z</published>
    <updated>2018-01-10T01:07:35.980Z</updated>
    
    <content type="html"><![CDATA[<p>在日常的开发中，经常会用到一些git指令，但是有些git指令不是太常用，用的时候经常忘记，每次都要重新google。于是，就把一些时常会用到的git 指令记录下来，方便以后使用。</p>
<a id="more"></a>
<blockquote>
<p>假设以下所有分支名为test</p>
</blockquote>
<h2 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h2><ul>
<li>删除本地分支<code>git branch -d test</code></li>
<li>删除远程分支<code>git branch -r -f  test</code>，<code>git push origin :test</code></li>
</ul>
<h2 id="查看分支"><a href="#查看分支" class="headerlink" title="查看分支"></a>查看分支</h2><ul>
<li>查看本地分支 <code>git branch</code></li>
<li>查看远程分支和本地分支<code>git branch -a</code></li>
<li>查看所有远程分支<code>git branch -r</code></li>
</ul>
<h2 id="新建分支"><a href="#新建分支" class="headerlink" title="新建分支"></a>新建分支</h2><ul>
<li>新建，但不切换<code>git branch test</code></li>
<li>新建并且换<code>git checkout -b test</code></li>
</ul>
<h2 id="将代码添加至暂存区并提交"><a href="#将代码添加至暂存区并提交" class="headerlink" title="将代码添加至暂存区并提交"></a>将代码添加至暂存区并提交</h2><ul>
<li>添加当前目录的所有文件到暂存区<code>git add ..</code></li>
<li>提交代码<code>git commit -m &#39;commit info&#39;</code></li>
</ul>
<h2 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h2><ul>
<li>合并分支<code>git merge test</code></li>
<li>合并后，如果有冲突，显示冲突文件<code>git status</code></li>
</ul>
<h2 id="配置用户名密码"><a href="#配置用户名密码" class="headerlink" title="配置用户名密码"></a>配置用户名密码</h2><p>对于私有项目，我们每次对远程仓库操作，都需要输入用户名密码。解决方法</p>
<ul>
<li><code>git config credential.helper store</code></li>
<li><code>git pull</code>,输入用户名密码后，用户名密码将会被存储。</li>
<li><code>git pull -u</code>改变用户名密码</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li>最近5次commit<code>git log -5 --pretty --oneline</code></li>
<li>切换到某节点<code>git checkout bd26839</code></li>
<li>新建一个commit，用来撤销指定commit<code>git revert bd26839</code></li>
<li>撤销上一次的提交，相当于github中的undo操作<code>git reset HEAD~</code></li>
<li>回复上次的提交代码<code>git revert bd26839</code></li>
<li>强制更新远程分支：git push -f <remote> <branch></branch></remote></li>
<li>将某个文件夹下的文件切换到某分支： git checkout development Webapp/app/index.html</li>
<li>查看正则匹配的分支<code>git branch |grep &#39;1&#39;</code>(名称包含1的分支)</li>
<li>删除正则匹配的所有分支<code>git branch |grep &#39;1&#39;|xargs git branch -D</code>(名称包含1的分支)</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在日常的开发中，经常会用到一些git指令，但是有些git指令不是太常用，用的时候经常忘记，每次都要重新google。于是，就把一些时常会用到的git 指令记录下来，方便以后使用。&lt;/p&gt;
    
    </summary>
    
    
      <category term="git" scheme="https://chuhang123.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>在SpringMVC中启用https协议</title>
    <link href="https://chuhang123.github.io/2017/06/26/Enable-https-in-Spring-Boot/"/>
    <id>https://chuhang123.github.io/2017/06/26/Enable-https-in-Spring-Boot/</id>
    <published>2017-06-26T08:02:03.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>由于项目需求，笔者使用SpringMVC开发的后台必须使用https协议。经过一番折腾后，终于完成了这一需求。但是由于刚接触spirng，水平有限，从中走了许多弯路，本文记录了问题的解决方案，并对从中踩过坑进行反思。</p>
<a id="more"></a>
<h2 id="获取SSL证书"><a href="#获取SSL证书" class="headerlink" title="获取SSL证书"></a>获取SSL证书</h2><p>获取SSL证书的方式有两种</p>
<ul>
<li>通过keytool生成在（需要java环境），打开终端输入下面的命令<figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">keytool -genkey -<span class="keyword">alias</span> tomcat  -storetype PKCS12 -keyalg RSA -keysize <span class="number">2048</span>  -keystore keystore.p12 -validity <span class="number">3650</span></div><div class="line"></div><div class="line">Enter keystore password:</div><div class="line">Re-enter new password:</div><div class="line">What <span class="keyword">is</span> your first <span class="keyword">and</span> last <span class="keyword">name</span>?</div><div class="line">[Unknown]:</div><div class="line">What <span class="keyword">is</span> the <span class="keyword">name</span> <span class="keyword">of</span> your organizational <span class="keyword">unit</span>?</div><div class="line">[Unknown]:</div><div class="line">What <span class="keyword">is</span> the <span class="keyword">name</span> <span class="keyword">of</span> your organization?</div><div class="line">[Unknown]:</div><div class="line">What <span class="keyword">is</span> the <span class="keyword">name</span> <span class="keyword">of</span> your City <span class="keyword">or</span> Locality?</div><div class="line">[Unknown]:</div><div class="line">What <span class="keyword">is</span> the <span class="keyword">name</span> <span class="keyword">of</span> your State <span class="keyword">or</span> Province?</div><div class="line">[Unknown]:</div><div class="line">What <span class="keyword">is</span> the two-letter country code <span class="keyword">for</span> this <span class="keyword">unit</span>?</div><div class="line">[Unknown]:</div><div class="line"><span class="keyword">Is</span> CN=Unknown, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown, C=Unknown correct?</div><div class="line">[no]: yes</div></pre></td></tr></table></figure>
</li>
</ul>
<p>完成后，将会在系统目录下生成 keystore.p12文件，你也可以在指定目录下生成该文件，如果在<code>/home/administrator/下载/installpackage/key</code>路径下生成keystore.p12文件，可使用下面的指令<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -genkey -alias tomcat -storetype PKCS12 -keyalg RSA -keysize <span class="number">2048</span> -keystore <span class="regexp">/home/</span>administrator<span class="regexp">/下载/i</span>nstallpackage<span class="regexp">/key/</span>keystore.p12 -validity <span class="number">3650</span></div></pre></td></tr></table></figure></p>
<p>此方法比较方便快捷，但是浏览器会提示不安全（如下图），比较适用于开发阶段。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/选区_079.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<ul>
<li>另外一种是通过正规渠道购买。</li>
</ul>
<h2 id="在SpringMVC中启用https协议"><a href="#在SpringMVC中启用https协议" class="headerlink" title="在SpringMVC中启用https协议"></a>在SpringMVC中启用https协议</h2><p>首先，在配置文件中引入Spring Boot依赖。Spring Boot内嵌的tomcat服务器会在http服务的8080端口启动。在application.properties文件中通过一下配置可启用https协议：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">server.port=<span class="number">8443</span></div><div class="line">server<span class="selector-class">.ssl</span><span class="selector-class">.key-store</span>=classpath:keystore<span class="selector-class">.p12</span> 		<span class="comment">//把之前生成的证书放在src/main/resources目录下</span></div><div class="line">server<span class="selector-class">.ssl</span><span class="selector-class">.key-store-password</span>=changeit</div><div class="line">server<span class="selector-class">.ssl</span><span class="selector-class">.key-password</span>=changeit</div></pre></td></tr></table></figure></p>
<p>按照以上配置，启动应用程序，即可访问<a href="https://localhost:8443" target="_blank" rel="external">https://localhost:8443</a> 。</p>
<h2 id="将http请求重定向至http"><a href="#将http请求重定向至http" class="headerlink" title="将http请求重定向至http"></a>将http请求重定向至http</h2><p>如果你也想使你的应用程序支持http服务，可以在配置文件中增加一下代码<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">Bean</span></div><div class="line">public EmbeddedServletContainerFactory servletContainer() &#123;</div><div class="line">    TomcatEmbeddedServletContainerFactory tomcat = new TomcatEmbeddedServletContainerFactory() &#123;</div><div class="line">    @Override</div><div class="line">    protected void postProcessContext(<span class="built_in">Context</span> <span class="built_in">context</span>) &#123;</div><div class="line">      SecurityConstraint securityConstraint = new SecurityConstraint()<span class="comment">;</span></div><div class="line">      securityConstraint.setUserConstraint(<span class="string">"CONFIDENTIAL"</span>)<span class="comment">;</span></div><div class="line">      SecurityCollection collection = new SecurityCollection()<span class="comment">;</span></div><div class="line">      collection.<span class="keyword">addPattern("/*");</span></div><div class="line">      securityConstraint.<span class="keyword">addCollection(collection);</span></div><div class="line">      <span class="built_in">context</span>.<span class="keyword">addConstraint(securityConstraint);</span></div><div class="line">    &#125;</div><div class="line">  &#125;<span class="comment">;</span></div><div class="line"></div><div class="line">  tomcat.<span class="keyword">addAdditionalTomcatConnectors(initiateHttpConnector());</span></div><div class="line">  return tomcat<span class="comment">;</span></div><div class="line">&#125;</div><div class="line">private Connector initiateHttpConnector() &#123;</div><div class="line">  Connector connector = new Connector(<span class="string">"org.apache.coyote.http11.Http11NioProtocol"</span>)<span class="comment">;</span></div><div class="line">  connector.setScheme(<span class="string">"http"</span>)<span class="comment">;</span></div><div class="line">  connector.setPort(<span class="number">8080</span>)<span class="comment">;</span></div><div class="line">  connector.setSecure(false)<span class="comment">;</span></div><div class="line">  connector.setRedirectPort(<span class="number">8443</span>)<span class="comment">;</span></div><div class="line"></div><div class="line">  return connector<span class="comment">;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>配置完成后，如果您访问<a href="http://localhost8080" target="_blank" rel="external">http://localhost8080</a> ,浏览器将会跳转至<a href="https://localhost:8443/" target="_blank" rel="external">https://localhost:8443/</a> 。</p>
<h2 id="所犯的错误"><a href="#所犯的错误" class="headerlink" title="所犯的错误"></a>所犯的错误</h2><ul>
<li>最开始google这个问题时，看到starkoverflow中有人说使用https服务的前提条件就是配置tomcat支持https。但是之前认为每次应用程序能在tomcat服务器上启动，是因为idea自带的tomcat。后来看了一篇<a href="https://spring.io/blog/2014/03/07/deploying-spring-boot-applications" target="_blank" rel="external">官方文档</a> ，才知道是spring boot集成了tomcat。</li>
<li>有时候过于追求完美，在linux、windows系统下分别配置tomcat多个版本，然后在idea中集成tomcat时windows系统一直出问题，也耽误了一些时间。也因此有了<a href="https://chuhang123.github.io/2017/06/23/%E5%9C%A8IDEA%E4%B8%AD%E9%83%A8%E7%BD%B2tomcat/">这篇博客</a> </li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>解决这个问题花费了较长时间，主要原因是平时看文档看的太少，对很多东西都不了解。解决问题的过程中很多情况是不知道把代码放在那，不清楚是否适用于本项目。解决的问题中下载了多个实例，对sping的架构有了进一步的认识。</p>
<blockquote>
<p>参考文献：</p>
<ol>
<li><a href="https://drissamri.be/blog/java/enable-https-in-spring-boot/" target="_blank" rel="external">Enable HTTPS in Spring Boot</a> </li>
<li><a href="https://spring.io/blog/2014/03/07/deploying-spring-boot-applications" target="_blank" rel="external">https://spring.io/blog/2014/03/07/deploying-spring-boot-applications</a></li>
<li><a href="https://spring.io/guides/gs/securing-web/" target="_blank" rel="external">https://spring.io/guides/gs/securing-web/</a></li>
</ol>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;由于项目需求，笔者使用SpringMVC开发的后台必须使用https协议。经过一番折腾后，终于完成了这一需求。但是由于刚接触spirng，水平有限，从中走了许多弯路，本文记录了问题的解决方案，并对从中踩过坑进行反思。&lt;/p&gt;
    
    </summary>
    
      <category term="SpringMvc" scheme="https://chuhang123.github.io/categories/SpringMvc/"/>
    
    
      <category term="https" scheme="https://chuhang123.github.io/tags/https/"/>
    
  </entry>
  
  <entry>
    <title>http请求的封装与过滤</title>
    <link href="https://chuhang123.github.io/2017/06/23/http%E8%AF%B7%E6%B1%82%E7%9A%84%E5%B0%81%E8%A3%85%E4%B8%8E%E8%BF%87%E6%BB%A4/"/>
    <id>https://chuhang123.github.io/2017/06/23/http请求的封装与过滤/</id>
    <published>2017-06-23T14:15:49.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>最近做的净水器项目，前台需要对发送的请求进行统一的封装，后台需要对请求进行统一的验证。本文记录了前台进行的http请求的封装及后台进行的http请求的过滤。前台：小程序，后台：SpringMvc.</p>
<a id="more"></a>
<h2 id="小程序对http请求进行封装"><a href="#小程序对http请求进行封装" class="headerlink" title="小程序对http请求进行封装"></a>小程序对http请求进行封装</h2><p>在微信小程序<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/api/network-request.html" target="_blank" rel="external">wx.request官网</a> 中的http请求是这样的：<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">wx</span><span class="selector-class">.request</span>(&#123;</div><div class="line">  <span class="attribute">url</span>: <span class="string">'test.php'</span>, <span class="comment">//仅为示例，并非真实的接口地址</span></div><div class="line">  <span class="attribute">data</span>: &#123;</div><div class="line">     <span class="attribute">x</span>: <span class="string">''</span> ,</div><div class="line">     <span class="attribute">y</span>: <span class="string">''</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attribute">header</span>: &#123;</div><div class="line">      <span class="string">'content-type'</span>: <span class="string">'application/json'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attribute">success</span>: function(res) &#123;</div><div class="line">    console.log(res.data)</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>由于请求的地址及参数是改变的，所以封装后的请求至少需要地址、请求参数。封装后代码是这样的<br><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//发送http请求</span></div><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"../../utils/httpUtil.js"</span>);	<span class="comment">//引入封装http的文件</span></div><div class="line"><span class="keyword">var</span> params = &#123;</div><div class="line">    <span class="attribute">id:</span><span class="string"> app.number</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> api = <span class="string">"WaterPurifier/"</span>;</div><div class="line"></div><div class="line">http.GET(api, params, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(res.data);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>由以上代码可知，封装的http请求是在util文件夹中建立httpUtil.js文件，可以根据自己的实际需求，对参数作统一的处理，比如统一加密之类的，也可以直接对get、post方法的header信息作统一处理。总之，对http请求封装之后，不仅实现了我们的业务需求，而且也使代码更简洁了。</p>
<blockquote>
<p>参考文献：<a href="https://ywxv.github.io/wxapp-http-request.html" target="_blank" rel="external">微信小程序中对网络请求的封装</a> </p>
</blockquote>
<h2 id="SpringMvc使用zuul过滤"><a href="#SpringMvc使用zuul过滤" class="headerlink" title="SpringMvc使用zuul过滤"></a>SpringMvc使用zuul过滤</h2><p>在SpringMvc中，使用zuul可以对请求进行过滤，使用请参考<a href="http://spring.io/guides/gs/routing-and-filtering/" target="_blank" rel="external">官方文档</a><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/7.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>由上图可知，前台请求的地址实际上是zuul过滤器的地址，然后再由zuul过滤器进行转发到后台的逻辑层。在项目上线后，我们可以吧zuul过滤器放在一个服务器中，把后台的逻辑层代码放在另外一个服务器中，从而减轻了服务器的负担。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//获取请求</span></div><div class="line">RequestContext ctx = RequestContext.getCurrentContext();</div><div class="line">HttpServletRequest request = ctx.getRequest();</div></pre></td></tr></table></figure></p>
<ul>
<li>我们可以根据ctx对象来设置请求的状态码、请求的头信息、拦截请求等一系列操作。查找的途径是直接看RequestContext包中的方法。</li>
<li>我们可以根据request对象来获取请求的参数。我们可以直接浏览HttpServletRequest接口中的方法。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>最开始对前台的请求进行加密，后台的请求进行解密时，感觉也不麻烦。但是老师让我对请求进行封装，内心是抗拒的，当时可能感觉封装请求是个麻烦的过程。但是对前台的请求进行封装后 ，发现确实方便了很多。所以在以后的项目中，如果需要对某一类东西做统一的处理，就要封装，不仅规范，而且方便。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近做的净水器项目，前台需要对发送的请求进行统一的封装，后台需要对请求进行统一的验证。本文记录了前台进行的http请求的封装及后台进行的http请求的过滤。前台：小程序，后台：SpringMvc.&lt;/p&gt;
    
    </summary>
    
      <category term="SpringMvc" scheme="https://chuhang123.github.io/categories/SpringMvc/"/>
    
    
      <category term="小程序" scheme="https://chuhang123.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>时序图使用记录</title>
    <link href="https://chuhang123.github.io/2017/06/23/%E6%97%B6%E5%BA%8F%E5%9B%BE%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
    <id>https://chuhang123.github.io/2017/06/23/时序图使用记录/</id>
    <published>2017-06-23T12:43:02.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>如果我们想清楚的表示两个类的交互过程，可以通过使用时序图来表示。本文从时序图在实际项目中的应用入手，从不规范到较为规范的过程。以及对时序图的简单学习。   </p>
<a id="more"></a>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>本文的实例中，主要表示净水器和服务器之间的交互过程。需要注意的是，此实例主要表示净水器和服务器之间进行http请求。净水器的有效参数：上次交互时间、创建时间、净水前水质、净水后水质、净水器编号、用水量、充值信息。</p>
<h2 id="不规范的时序图"><a href="#不规范的时序图" class="headerlink" title="不规范的时序图"></a>不规范的时序图</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/8.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h2 id="时序图的相关知识"><a href="#时序图的相关知识" class="headerlink" title="时序图的相关知识"></a>时序图的相关知识</h2><ul>
<li>时序图的定义：描述了对象之间传递消息的时间顺序, 用来表示用例中的行为顺序, 是强调消息时间顺序的交互图。</li>
<li>时序图组成 : 时序图包括四个元素 对象(Object), 生命线(Lifeline), 激活(Activation), 消息(Message);</li>
</ul>
<h2 id="规范后的时序图"><a href="#规范后的时序图" class="headerlink" title="规范后的时序图"></a>规范后的时序图</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/9.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h2 id="错误之处"><a href="#错误之处" class="headerlink" title="错误之处"></a>错误之处</h2><ul>
<li>请求成功的表示方法为200</li>
<li>返回信息为虚线，且返回消息后相应的对象不再处于激活状态</li>
<li>一般情况下，每发送一次消息，对方会进行回复，发送方从而判断发送的消息接收方是否接收到。</li>
<li>逻辑错误。（本文不予描述）</li>
</ul>
<blockquote>
<p>参考文献：<a href="http://blog.csdn.net/doniexun/article/details/38317537" target="_blank" rel="external">UML入门 之 交互图 – 时序图 协作图详解</a> </p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;如果我们想清楚的表示两个类的交互过程，可以通过使用时序图来表示。本文从时序图在实际项目中的应用入手，从不规范到较为规范的过程。以及对时序图的简单学习。   &lt;/p&gt;
    
    </summary>
    
    
      <category term="时序图" scheme="https://chuhang123.github.io/tags/%E6%97%B6%E5%BA%8F%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>在IDEA中部署tomcat</title>
    <link href="https://chuhang123.github.io/2017/06/23/%E5%9C%A8IDEA%E4%B8%AD%E9%83%A8%E7%BD%B2tomcat/"/>
    <id>https://chuhang123.github.io/2017/06/23/在IDEA中部署tomcat/</id>
    <published>2017-06-23T03:21:35.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>最近要开发一个小程序的项目，必须要使用https协议，idea自带的tomcat不知道怎么配置成https协议的，就想着在idea中部署自己电脑中的tomcat。下面是在idea中部署tomcat的过程。环境：2017版的idea，tomcat8，jdk1.8。</p>
<a id="more"></a>
<p>1.file-&gt;setting-&gt;Application Servers，添加本机的tomcat,起一个名字，选则tomcat所在的路径。<br> <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/选区_072.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br> 2.Run-&gt;Edit Configurations,点击左上角的加号<br>  <img src="/images/选区_073.png" alt=""><br>  起一个名字，然后点击右下角的apply。<br>  3.打开Project Structure（ctrl+Alt+shift+s）<br>  <img src="/images/选区_074.png" alt=""><br>  选择artifacts，然后选择红色方框中的web appliscation: Exploded.<br>    <img src="/images/选区_075.png" alt=""><br>    然后点击加号，选择directory contentl，选择项目中的一个目录即可，因为我的项目中暂时没有视图层，因此暂时选择c层的目录。然后保存运行即可。</p>
<p>4.这时点击运行，发现会在浏览器中访问localhost,但是服务器没有响应，会出现这样的界面<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/选区_080.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br> 依次点击run-&gt;Debug Configurations<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/选区_076.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br> 勾选方框中的内容，tomcat就能正常的运行了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近要开发一个小程序的项目，必须要使用https协议，idea自带的tomcat不知道怎么配置成https协议的，就想着在idea中部署自己电脑中的tomcat。下面是在idea中部署tomcat的过程。环境：2017版的idea，tomcat8，jdk1.8。&lt;/p&gt;
    
    </summary>
    
      <category term="SpringMvc" scheme="https://chuhang123.github.io/categories/SpringMvc/"/>
    
    
  </entry>
  
  <entry>
    <title>Spring-Idea-Ubuntu环境搭建</title>
    <link href="https://chuhang123.github.io/2017/06/16/Spring-Idea-Ubuntu%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <id>https://chuhang123.github.io/2017/06/16/Spring-Idea-Ubuntu环境搭建/</id>
    <published>2017-06-16T01:51:34.000Z</published>
    <updated>2018-01-05T01:49:21.384Z</updated>
    
    <content type="html"><![CDATA[<p>近几天学习springMVC，但是发现一直比较卡，就尝试在ubuntu系统下搭建springMVC环境，看看效果。首先搭建java环境，安装jdk，下载idea，安装xampp，打开xampp的mysql控制台，创建数据库，进本的环境就起来了。</p>
<a id="more"></a>
<h2 id="增加内存、swaf空间"><a href="#增加内存、swaf空间" class="headerlink" title="增加内存、swaf空间"></a>增加内存、swaf空间</h2><p>碰到的第一个问题是开始安装ubuntu时分配的内存有点小了，想增加磁盘空间，并提高ubuntu系统的性能。</p>
<ul>
<li>增加ubuntu磁盘空间，请参考<a href="https://help.ubuntu.com/community/ResizeandDuplicateWubiDisk" target="_blank" rel="external">这里</a> ，</li>
<li>增加swaf空间,不了解swaf的，请戳<a href="http://baike.baidu.com/item/Swap/2666174" target="_blank" rel="external">这里</a> ，执行下面的9条语句，增加2G的swaf空间。<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">sudo su</div><div class="line">swapoff -<span class="selector-tag">a</span></div><div class="line">cd /host/ubuntu/disks/</div><div class="line">mv swap<span class="selector-class">.disk</span> swap<span class="selector-class">.disk</span><span class="selector-class">.bak</span></div><div class="line"><span class="selector-tag">dd</span> <span class="keyword">if</span>=/dev/zero of=swap<span class="selector-class">.disk</span> bs=<span class="number">1024</span> count=<span class="number">2097152</span></div><div class="line">mkswap swap<span class="selector-class">.disk</span></div><div class="line">swapon -<span class="selector-tag">a</span></div><div class="line">free -m</div><div class="line">rm swap<span class="selector-class">.disk</span><span class="selector-class">.bak</span></div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>笔者使用的wubi装的windows、ubuntu双系统，故如果相对ubuntu系统进行改动的话，请参考<a href="https://wiki.ubuntu.com/WubiGuide#How_do_I_resize_the_virtual_disks.3F" target="_blank" rel="external">官方文档</a> ，一定是最节约时间的方法。</p>
</blockquote>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><p>启动xampp<code>sudo /opt/lampp/lampp start</code><br>启动mysql<code>sudo /opt/lampp/lampp startmysql</code><br>打开sql控制台<code>/opt/lampp/bin/mysql -u root</code><br>显示数据库<code>show databases;</code><br>删除数据库<code>drop database  name;</code></p>
<h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><ul>
<li>用户目录下的 .bashrc 文件<code>gedit ~/.bashrc</code>该文件编辑保存后，可立即在新打开的终端窗口内生效。该方式添加的变量只能当前用户使用。</li>
<li>系统目录下的 profile 文件<code>sudo gedit /etc/profile</code></li>
<li>系统目录下的 environment 文件<code>sudo gedit /etc/environment</code></li>
</ul>
<h2 id="查看内存相关信息"><a href="#查看内存相关信息" class="headerlink" title="查看内存相关信息"></a>查看内存相关信息</h2><ul>
<li>查看磁盘空间<code>df -h</code></li>
<li>查看cup使用率<code>top</code></li>
<li>查看内存<code>free</code></li>
<li>杀死进程<code>killall -9 name</code>，name表示进程的名字，如<code>killall -9 shutter</code></li>
</ul>
<h2 id="配置tomcat"><a href="#配置tomcat" class="headerlink" title="配置tomcat"></a>配置tomcat</h2><ul>
<li><p>启动 </p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sh <span class="regexp">/usr/</span>program<span class="regexp">/tomcat8/</span>bin<span class="regexp">/startup.sh ; tail -200f /u</span>sr<span class="regexp">/program/</span>tomcat8<span class="regexp">/logs/</span>catalina.out</div></pre></td></tr></table></figure>
</li>
<li><p>停止 <code>sh /usr/program/tomcat8/bin/shutdown.sh</code></p>
</li>
<li>编辑server.xml文件<code>sudo gedit /usr/program/tomcat8/conf/server.xml</code></li>
<li>安装见<a href="http://wiki.jikexueyuan.com/project/linux-in-eye-of-java/Tomcat-Install-And-Settings.html" target="_blank" rel="external">极客学院</a> </li>
</ul>
<h2 id="安装node"><a href="#安装node" class="headerlink" title="安装node"></a>安装node</h2><p>ubuntu直接安装node，默认安装4.x版本的，所以要安装新版本的node，安装犯法如下：</p>
<ul>
<li>6.x版本的node</li>
</ul>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">curl -sL http<span class="variable">s:</span>//<span class="keyword">deb</span>.nodesource.<span class="keyword">com</span>/setup_6.<span class="keyword">x</span> | sudo -E bash -</div><div class="line">sudo apt-<span class="built_in">get</span> install -<span class="keyword">y</span> nodejs</div></pre></td></tr></table></figure>
<ul>
<li>8.x版本的node<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">curl -sL http<span class="variable">s:</span>//<span class="keyword">deb</span>.nodesource.<span class="keyword">com</span>/setup_8.<span class="keyword">x</span> | sudo -E bash -</div><div class="line">sudo apt-<span class="built_in">get</span> install -<span class="keyword">y</span> nodejs</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h2><p>如果软件为.deb的软件包，那么就直接安装：<code>sudo dpkg -i xxx.deb</code>,如果出现需要安装xxx依赖，那么就运行<code>sudo apt-get install -f</code>，就安装相关的依赖了。</p>
<h2 id="经常断网"><a href="#经常断网" class="headerlink" title="经常断网"></a>经常断网</h2><p>使用ubuntu的时候，发现每隔一段时间就会断一次网，感觉很不爽，解决办法如下：</p>
<ul>
<li><p>执行<code>sudo lshw -class network</code>命令。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="string">chuhang@chuhang:~$</span> <span class="string">sudo</span> <span class="string">lshw</span> <span class="bullet">-class</span> <span class="string">network</span></div><div class="line"><span class="string">[sudo]</span> <span class="string">chuhang</span> <span class="string">的密码：</span> </div><div class="line">  <span class="string">*-network</span>               </div><div class="line"><span class="attr">       description:</span> <span class="string">Ethernet</span> <span class="string">interface</span></div><div class="line"><span class="attr">       product:</span> <span class="string">RTL8101/2/6E</span> <span class="string">PCI</span> <span class="string">Express</span> <span class="string">Fast/Gigabit</span> <span class="string">Ethernet</span> <span class="string">controller</span></div><div class="line"><span class="attr">       vendor:</span> <span class="string">Realtek</span> <span class="string">Semiconductor</span> <span class="string">Co.,</span> <span class="string">Ltd.</span></div><div class="line">       <span class="string">physical</span> <span class="attr">id:</span> <span class="number">0</span></div><div class="line">       <span class="string">bus</span> <span class="attr">info:</span> <span class="string">pci@0000:01:00.0</span></div><div class="line">       <span class="string">logical</span> <span class="attr">name:</span> <span class="string">enp1s0</span></div><div class="line"><span class="attr">       version:</span> <span class="number">07</span></div><div class="line"><span class="attr">       serial:</span> <span class="number">34</span><span class="string">:17:eb:6c:8a:d1</span></div><div class="line"><span class="attr">       size:</span> <span class="number">10</span><span class="string">Mbit/s</span></div><div class="line"><span class="attr">       capacity:</span> <span class="number">100</span><span class="string">Mbit/s</span></div><div class="line"><span class="attr">       width:</span> <span class="number">64</span> <span class="string">bits</span></div><div class="line"><span class="attr">       clock:</span> <span class="number">33</span><span class="string">MHz</span></div><div class="line"><span class="attr">       capabilities:</span> <span class="string">pm</span> <span class="string">msi</span> <span class="string">pciexpress</span> <span class="string">msix</span> <span class="string">vpd</span> <span class="string">bus_master</span> <span class="string">cap_list</span> <span class="string">ethernet</span> <span class="string">physical</span> <span class="string">tp</span> <span class="string">mii</span> <span class="number">10</span><span class="string">bt</span> <span class="number">10</span><span class="string">bt-fd</span> <span class="number">100</span><span class="string">bt</span> <span class="number">100</span><span class="string">bt-fd</span> <span class="string">autonegotiation</span></div><div class="line"><span class="attr">       configuration:</span> <span class="string">autonegotiation=on</span> <span class="string">broadcast=yes</span> <span class="string">driver=r8169</span> <span class="string">driverversion=2.3LK-NAPI</span> <span class="string">duplex=half</span> <span class="string">firmware=rtl8106e-1_0.0.1</span> <span class="number">06</span><span class="string">/29/12</span> <span class="string">latency=0</span> <span class="string">link=no</span> <span class="string">multicast=yes</span> <span class="string">port=MII</span> <span class="string">speed=10Mbit/s</span></div><div class="line"><span class="attr">       resources:</span> <span class="attr">irq:44</span> <span class="attr">ioport:4000(size=256)</span> <span class="attr">memory:b0b00000-b0b00fff</span> <span class="attr">memory:b0800000-b0803fff</span></div><div class="line">  <span class="string">*-network</span></div><div class="line"><span class="attr">       description:</span> <span class="string">Wireless</span> <span class="string">interface</span></div><div class="line"><span class="attr">       product:</span> <span class="string">Wireless</span> <span class="number">3160</span></div><div class="line"><span class="attr">       vendor:</span> <span class="string">Intel</span> <span class="string">Corporation</span></div><div class="line">       <span class="string">physical</span> <span class="attr">id:</span> <span class="number">0</span></div><div class="line">       <span class="string">bus</span> <span class="attr">info:</span> <span class="string">pci@0000:02:00.0</span></div><div class="line">       <span class="string">logical</span> <span class="attr">name:</span> <span class="string">wlp2s0</span></div><div class="line"><span class="attr">       version:</span> <span class="number">83</span></div><div class="line"><span class="attr">       serial:</span> <span class="attr">a0:88:69:a8:1f:fb</span></div><div class="line"><span class="attr">       width:</span> <span class="number">64</span> <span class="string">bits</span></div><div class="line"><span class="attr">       clock:</span> <span class="number">33</span><span class="string">MHz</span></div><div class="line"><span class="attr">       capabilities:</span> <span class="string">pm</span> <span class="string">msi</span> <span class="string">pciexpress</span> <span class="string">bus_master</span> <span class="string">cap_list</span> <span class="string">ethernet</span> <span class="string">physical</span> <span class="string">wireless</span></div><div class="line"><span class="attr">       configuration:</span> <span class="string">broadcast=yes</span> <span class="string">driver=iwlwifi</span> <span class="string">driverversion=4.10.0-28-generic</span> <span class="string">firmware=17.459231.0</span> <span class="string">ip=10.20.103.9</span> <span class="string">latency=0</span> <span class="string">link=yes</span> <span class="string">multicast=yes</span> <span class="string">wireless=IEEE</span> <span class="number">802.11</span></div><div class="line"><span class="attr">       resources:</span> <span class="attr">irq:50</span> <span class="attr">memory:b0a00000-b0a01fff</span></div></pre></td></tr></table></figure>
</li>
<li><p>新建并编辑config文件，<code>sudo vi /etc/pm/config.d/config</code>，在文件中输入<code>SUSPEND_MODULES=&quot;iwlwifi wlp2s0&quot;</code>,iwlwifi对应的时driver，enp1s0对应的是 logical name。</p>
</li>
<li>重新连接网络<code>sudo service network-manager restart</code><blockquote>
<p>适用于ubuntu16.04.参考：<a href="https://grenangen.se/node/86" target="_blank" rel="external">Ubuntu 16.04 WiFi issues - How to perhaps fix it for you as well… </a> </p>
</blockquote>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;近几天学习springMVC，但是发现一直比较卡，就尝试在ubuntu系统下搭建springMVC环境，看看效果。首先搭建java环境，安装jdk，下载idea，安装xampp，打开xampp的mysql控制台，创建数据库，进本的环境就起来了。&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://chuhang123.github.io/categories/java/"/>
    
    
      <category term="ubuntu" scheme="https://chuhang123.github.io/tags/ubuntu/"/>
    
      <category term="enviroment" scheme="https://chuhang123.github.io/tags/enviroment/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序wx.request请求服务器配置问题</title>
    <link href="https://chuhang123.github.io/2017/06/14/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8Fwx-request%E8%AF%B7%E6%B1%82%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/"/>
    <id>https://chuhang123.github.io/2017/06/14/微信小程序wx-request请求服务器配置问题/</id>
    <published>2017-06-14T14:45:24.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>最近开发小程序，需要前后台对接，当使用wx.request方法向后台发送http请求时，控制台报错，随后就google了一下，本文主要讲述此问题及解决方案。</p>
<a id="more"></a>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>控制台报错截图：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/1.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>看到控制台报错，提示要配置域名，google了一下，确实有很多关于wx.request请求配置服务器的文章，就配置了服务器（当时并没有服务器）。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/4.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>难道在开发阶段每次测试都要吧代码推送到服务器么？有这么麻烦么？于是就开始尝试通过第三方平台，以便利前后台对接的测试，如leancloud等，然而效果并不理想。</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><ul>
<li>首先，控制台虽然报错了，但是依然可以正确的发送请求，点击请求的地址即可得到请求的返回值（如果请求地址正确的话，地址可以是本地的）。在测试阶段是可以正确的发送http请求，但是项目上线后就需要配置服务器了。</li>
<li>端口问题。wx,request文档中说明了请求的地址不能带有端口号，笔着使用SpringMvc后台开发，端口号是8080，讲端口号改为80即可省略端口号。</li>
<li>在本地开发，如果想配置服务器的话，可以通过修改host文件的方法。将本地与配置的域名进行绑定。配置方法如下：<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/2.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
红色方框中的代码作用是，当我们访问api.water.mengyunzhi.com服务器时，实际上访问的地址是localhost。DNS的作用就是对ip地址进行解析，使其和域名相对应。而hosts文件是用来提高效率的，在进行dns请求前，系统会先检查自己的hosts文件中是否有这个地址的映射关系，如果有，则直接调用这个映射关系，如果没有再向dns服务器提出域名解析。也就是说 Hosts 的请求级别比 DNS 高。当你的 Hosts 文件里面有对应的 IP 时，它就会直接访问那个 IP，而不用通过 DNS。相应的，在小程序的后台配置这个域名即可：<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/3.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
实际上访问的是localhost，这样就方便了我们前后台对接。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在这个问题上，笔者开始的时候犯了一个严重的错误：在软件开发中，相信大多时候第三方平台都会尽力满足开发者的需求，方便我们开发测试。而不至于发送一个请求就要配置服务器这样繁琐的操作。</p>
<blockquote>
<p>如有错误，欢迎指正！</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近开发小程序，需要前后台对接，当使用wx.request方法向后台发送http请求时，控制台报错，随后就google了一下，本文主要讲述此问题及解决方案。&lt;/p&gt;
    
    </summary>
    
    
      <category term="服务器" scheme="https://chuhang123.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
      <category term="小程序" scheme="https://chuhang123.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
      <category term="wx.request" scheme="https://chuhang123.github.io/tags/wx-request/"/>
    
  </entry>
  
  <entry>
    <title>验证信息真伪加密算法记录</title>
    <link href="https://chuhang123.github.io/2017/06/13/%E9%AA%8C%E8%AF%81%E4%BF%A1%E6%81%AF%E7%9C%9F%E4%BC%AA%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E8%AE%B0%E5%BD%95/"/>
    <id>https://chuhang123.github.io/2017/06/13/验证信息真伪加密算法记录/</id>
    <published>2017-06-13T15:42:25.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>最近做的项目后台需要验证是不是我们的用户发送的请求。起初，考虑的是使用rsa算法通过公钥、私钥的方法进行加密解密，老师给我讲了另外一种比较简单的算法，却比较实用。</p>
<a id="more"></a>
<h2 id="问题场景"><a href="#问题场景" class="headerlink" title="问题场景"></a>问题场景</h2><p>前台需要向后台发送http请求，参数是<code>编号</code>，并根据编号获取相应的信息。那么后台如何辨别这个请求是不是我们的用户发送的呢？</p>
<h2 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h2><p>将发送http请求的header信息中增加几个参数，增加<code>时间戳</code>、<code>随机字符串</code>、<code>加密信息</code>三个参数，<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">timestamp: timestamp,	<span class="comment">//时间戳</span></div><div class="line">randomString: randomString,		<span class="comment">//随机字符串</span></div><div class="line">encryptionInfo: encryptionInfo	<span class="comment">//加密信息</span></div></pre></td></tr></table></figure></p>
<p>加密信息指的是讲编号、时间戳、随机字符串、特定的字符串通过不可解密的方法加密，如sha1、md5算法，如果一次不放心的多加密几次。实例如下<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">var encryptionString</span> = timestamp + randomString + <span class="string">'xiaoming'</span>;</div><div class="line"><span class="attribute">var encryptionInfo</span> = app.sha1(encryptionString);</div></pre></td></tr></table></figure></p>
<p>后台对接受到的参数以及我们约定好的特定的字符串，按照同样的方法加密，如果加密后生成的字符串和前台发送的加密信息（encryptionInfo）相同，那么我们就认为这个http请求是我们的用户发送的请求。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近做的项目后台需要验证是不是我们的用户发送的请求。起初，考虑的是使用rsa算法通过公钥、私钥的方法进行加密解密，老师给我讲了另外一种比较简单的算法，却比较实用。&lt;/p&gt;
    
    </summary>
    
    
      <category term="加密" scheme="https://chuhang123.github.io/tags/%E5%8A%A0%E5%AF%86/"/>
    
      <category term="算法" scheme="https://chuhang123.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>mysql下hebinate使用sql关键字报错问题</title>
    <link href="https://chuhang123.github.io/2017/06/06/sql%E5%85%B3%E9%94%AE%E5%AD%97%E6%8A%A5%E9%94%99/"/>
    <id>https://chuhang123.github.io/2017/06/06/sql关键字报错/</id>
    <published>2017-06-06T12:04:52.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>今天建立订单实体的时，不能生成sql文件，一直报错。当时挺无语的，开始的时候一点点吧字段都注释掉，怀疑字段名太长等，最终发现是数据表名是sql关键字。环境：mysql，hebinate，springMvc。</p>
<a id="more"></a>
<h2 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h2><p>报错信息如下<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: <span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> exists <span class="keyword">order</span></div><div class="line">2017-06-06 20:16:58.422 <span class="keyword">ERROR</span> 8020 --- [  restartedMain] org.hibernate.tool.hbm2ddl.SchemaExport  : You have <span class="keyword">an</span> <span class="keyword">error</span> <span class="keyword">in</span> your SQL <span class="keyword">syntax</span>; check the manual that corresponds to your MariaDB server <span class="keyword">version</span> <span class="keyword">for</span> the right <span class="keyword">syntax</span> to <span class="keyword">use</span> near '<span class="keyword">order</span>' at <span class="keyword">line</span> 1</div></pre></td></tr></table></figure></p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><ul>
<li>给实体起一个别名。</li>
<li>将数据表换个名字</li>
</ul>
<h2 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h2><p>之前在php的项目中使用mysql数据库建立订单表就是使用order表，但是并没有错误，所以这个报错应该主要是hebinate的原因。但是疑问的是user也是sql保留的关键字，但是使用hebinate建立user表为什么没有报错呢？所以最终还是要以运行结果为准。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在sql的手册中这样说到，一条通用的规则是：如果你看到任何古怪的分析错，说命令包含任何这里列出的关键字做标识符， 那么你可以先试试用双引号把那个标识符括起来，看看问题是否消失。</p>
<blockquote>
<p><a href="http://www.postgres.cn/docs/9.3/sql-keywords-appendix.html" target="_blank" rel="external">sql中文手册</a> 列出了sql的关键字。</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天建立订单实体的时，不能生成sql文件，一直报错。当时挺无语的，开始的时候一点点吧字段都注释掉，怀疑字段名太长等，最终发现是数据表名是sql关键字。环境：mysql，hebinate，springMvc。&lt;/p&gt;
    
    </summary>
    
    
      <category term="sql" scheme="https://chuhang123.github.io/tags/sql/"/>
    
      <category term="关键字" scheme="https://chuhang123.github.io/tags/%E5%85%B3%E9%94%AE%E5%AD%97/"/>
    
      <category term="hebinate" scheme="https://chuhang123.github.io/tags/hebinate/"/>
    
  </entry>
  
  <entry>
    <title>css浮动流实战</title>
    <link href="https://chuhang123.github.io/2017/06/03/css%E6%B5%AE%E5%8A%A8%E6%B5%81%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E5%8F%8A%E5%AE%9E%E4%BE%8B%E8%AE%B2%E8%A7%A3/"/>
    <id>https://chuhang123.github.io/2017/06/03/css浮动流代码实现及实例讲解/</id>
    <published>2017-06-03T14:47:22.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>前两天看了一个很赞的css浮动流的<a href="http://www.cnblogs.com/iyangyuan/archive/2013/03/27/2983813.html" target="_blank" rel="external">教程</a> ，并对应教程实现了代码，但是仅限于理论的层面 ，今天有了实战的机会，本文将问题界面录制成视频，并以解决视频中的bug作为切入点，学习css浮动流。</p>
<a id="more"></a>
<p>问题界面如下：</p>
<video src="http://oligray7m.bkt.clouddn.com/1496562936371.mp4 " type="video/mp4" controls="controls" width="100%" height="100%"><br></video>

<h2 id="要解决的问题"><a href="#要解决的问题" class="headerlink" title="要解决的问题"></a>要解决的问题</h2><p>随着屏幕缩放比例的改变，video中菜单位置在改变。当屏幕比例为150%，每一个菜单占一行，占据多行。当屏幕比例为65%——75%时，菜单位于顶部。而我们的目标是当屏幕缩放比例超过150%时，隐藏菜单。当屏幕缩放比例小于150%时，位置背景图片底部，保持不变。</p>
<h2 id="问题还原"><a href="#问题还原" class="headerlink" title="问题还原"></a>问题还原</h2><p>div是块状元素，每一个盒子在页面中时独占一行的。很明显，以上三个盒子并不是独占一行，所以，这三个盒子都是浮动的。</p>
<ul>
<li><p>当屏幕缩放为25%——50%和80%——125&amp;时，三个盒子是这样的<br><img src="/images/选区_036.png"><br>div1、div2是左浮动， div3是右浮动，但是由于屏幕宽度不够，所以div3向下移动一行。div1、div2占据第一行，div3占据第二行。效果正常。</p>
</li>
<li><p>当屏幕缩放为67%——75%时<br><img src="/images/选区_037.png"><br>右键查看元素，查看屏幕宽度，此时屏幕的宽度时1714——1929，也就是说，此时，这三个盒子的宽度之和小于屏幕的宽度，所以这三个盒子都在页面的第一行，也就使菜单浮动到了屏幕的右上角。</p>
<blockquote>
<p>解决方案就是增加div2的宽度，因为每个人的屏幕大小可能不一样，因此使用百分比，使得div3向下移动一行。</p>
</blockquote>
</li>
</ul>
<ul>
<li>当屏幕为150%以上时<br><img src="/images/选区_038.png"><br>此时三个盒子都是右浮动，此时屏幕宽度小于857px,字体过大，笔者使用 <a href="http://www.runoob.com/cssref/css3-pr-mediaquery.html" target="_blank" rel="external">@media 查询</a>  ，讲菜单隐藏。当然，也可以使用bootstrap响应式导航显示菜单。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>书写css代码时，当遇到页面布局的问题时，应当及时打开控制台，观察各个盒子之间的关系，搞清楚盒子是不是浮动的，理性的分析原因。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前两天看了一个很赞的css浮动流的&lt;a href=&quot;http://www.cnblogs.com/iyangyuan/archive/2013/03/27/2983813.html&quot;&gt;教程&lt;/a&gt; ，并对应教程实现了代码，但是仅限于理论的层面 ，今天有了实战的机会，本文将问题界面录制成视频，并以解决视频中的bug作为切入点，学习css浮动流。&lt;/p&gt;
    
    </summary>
    
      <category term="css" scheme="https://chuhang123.github.io/categories/css/"/>
    
    
      <category term="浮动" scheme="https://chuhang123.github.io/tags/%E6%B5%AE%E5%8A%A8/"/>
    
      <category term="实战" scheme="https://chuhang123.github.io/tags/%E5%AE%9E%E6%88%98/"/>
    
  </entry>
  
  <entry>
    <title>IDEA性能优化篇</title>
    <link href="https://chuhang123.github.io/2017/05/27/IDEA%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E7%AF%87/"/>
    <id>https://chuhang123.github.io/2017/05/27/IDEA性能优化篇/</id>
    <published>2017-05-27T06:33:41.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>从php转到java后，IDE改用idea了，但是使用idea运行起来比较慢，在网上搜集了一下资料优化idea，并记录如下。</p>
<a id="more"></a>
<h2 id="调整IDEA的启动JVM参数"><a href="#调整IDEA的启动JVM参数" class="headerlink" title="调整IDEA的启动JVM参数"></a>调整IDEA的启动JVM参数</h2><p>打开idea，help-&gt;Edit Custom VM options,idea会自动复制bin目录下的idea64.exe.vmoptions文件（32位的idea.exe.vmoptions），我的运行内存是8g的，作如下调整<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">-<span class="ruby">Xms1g		/<span class="regexp">/JVM初始分配的堆内存</span></span></div><div class="line">-<span class="ruby"><span class="regexp">Xmx4g		/</span><span class="regexp">/JVM最大允许分配的堆内存，按需分配</span></span></div><div class="line">-<span class="ruby"><span class="regexp">XX:ReservedCodeCacheSize=1024m</span></span></div><div class="line">-<span class="ruby"><span class="regexp">XX:PermSize=372M		/</span><span class="regexp">/JVM初始分配的非堆内存</span></span></div><div class="line">-<span class="ruby"><span class="regexp">XX:MaxPermSize=744M		/</span><span class="regexp">/JVM最大允许分配的非堆内存，按需分配</span></span></div><div class="line">-<span class="ruby"><span class="regexp">XX:+UseConcMarkSweepGC</span></span></div><div class="line">-<span class="ruby"><span class="regexp">XX:SoftRefLRUPolicyMSPerMB=50</span></span></div></pre></td></tr></table></figure></p>
<p>改变jvm参数后，如果想了解内存的分布状况，勾选一下信息，可在右下角显示内存分配<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/选区_022.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>官方文档给出了推荐的修改方式，参考文献2讲述了jvm内存管理机制，及参数的详细说明，参考文献3从多个方面讲述了如何分配堆内存能够最有效的提高idea的效率。</p>
<p>参考文献：<br>1.<a href="https://intellij-support.jetbrains.com/hc/en-us/articles/206544869-Configuring-JVM-options-and-platform-properties" target="_blank" rel="external">https://intellij-support.jetbrains.com/hc/en-us/articles/206544869-Configuring-JVM-options-and-platform-properties</a><br>2.<a href="http://www.cnblogs.com/mingforyou/archive/2012/03/03/2378143.html" target="_blank" rel="external">http://www.cnblogs.com/mingforyou/archive/2012/03/03/2378143.html</a><br>3.<a href="http://tomaszdziurko.com/2015/11/1-and-the-only-one-to-customize-intellij-idea-memory-settings/" target="_blank" rel="external">http://tomaszdziurko.com/2015/11/1-and-the-only-one-to-customize-intellij-idea-memory-settings/</a> </p>
<h2 id="自动编译"><a href="#自动编译" class="headerlink" title="自动编译"></a>自动编译</h2><ul>
<li>全部勾选红色方框中的部分<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/选区_021.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></li>
<li><code>ctrl + shift + alt + /</code>快捷键<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/选区_094.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
</li>
</ul>
<blockquote>
<p>在Edit Configuration中，查看Before launch中是否有太多设置，耽误运行时间。</p>
</blockquote>
<h2 id="jrebel热部署"><a href="#jrebel热部署" class="headerlink" title="jrebel热部署"></a>jrebel热部署</h2><p>（待破解）</p>
<p>参考文献：<br><a href="http://www.jianshu.com/p/d177316890e3" target="_blank" rel="external">http://www.jianshu.com/p/d177316890e3</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;从php转到java后，IDE改用idea了，但是使用idea运行起来比较慢，在网上搜集了一下资料优化idea，并记录如下。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>hexo+Github Pages搭建个人博客详解</title>
    <link href="https://chuhang123.github.io/2017/05/19/%E6%89%8B%E6%8A%8A%E6%89%8Bhexo%E5%BB%BA%E7%AB%99/"/>
    <id>https://chuhang123.github.io/2017/05/19/手把手hexo建站/</id>
    <published>2017-05-19T00:01:54.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>github Pages是托管在github上的静态网页，有300M的免费空间。Hexo 是一个快速、简洁且高效的博客框架。因为hexo是静态页面，不涉及到和数据库的交互等复杂操作，所以github pages的300M空间足以使用。本文将手把手教你在github pages上使用hexo搭建静态博客。您需要一个github账号，<a href="https://nodejs.org/en/" target="_blank" rel="external">Node.js</a> 、<a href="https://git-scm.com/" target="_blank" rel="external">git</a> 应用程序</p>
<a id="more"></a>
<h2 id="hexo建站"><a href="#hexo建站" class="headerlink" title="hexo建站"></a>hexo建站</h2><ul>
<li>安裝hexo <code>npm install -g hexo-cli</code></li>
<li>初始化博客<code>hexo init &lt;folder&gt;</code></li>
<li>切換到对应的目录<code>cd &lt;folder&gt;</code></li>
<li>检查是否有未安装的依赖<code>npm install</code></li>
<li>配置_config.yml文件，参考<a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="external">官网</a> ，配置文件信息务必要填写正确。eg：<code>timezone: Asia/Shanghai</code>，如出现拼写错误将影响文章发表的日期。</li>
<li>在本地预览博客<code>hexo s</code></li>
<li>发布文章<code>hexo new &quot;My New Post&quot;</code>，终端会显示文章生成的路径，按照对应的路径即可编辑文章。</li>
</ul>
<h2 id="将博客部署到github-pages上"><a href="#将博客部署到github-pages上" class="headerlink" title="将博客部署到github pages上"></a>将博客部署到github pages上</h2><ul>
<li>进入github官网，创建一个github仓库，命名为<code>username.github.io</code>。eg：chuhang123.github.io</li>
<li><p>修改_config.yml文件的部署地址，实例如下：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">deploy</span>:</div><div class="line">  <span class="attribute">type</span>: git </div><div class="line">  <span class="attribute">repo</span>: <span class="attribute">https</span>:<span class="comment">//github.com/chuhang123/chuhang123.github.io.git</span></div><div class="line">  <span class="attribute">branch </span>: master</div></pre></td></tr></table></figure>
</li>
<li><p>将本地的博客推送到服务器上<code>hexo d -g</code></p>
</li>
<li>hexo有很多主题，读者可根据自己的喜好安装自己喜欢的主题，主题一般都会有对应的教程，如笔者使用的<a href="https://github.com/wuchong/jacman" target="_blank" rel="external">jacman主题</a> ，<a href="http://jacman.wuchong.me/2014/11/20/how-to-use-jacman/" target="_blank" rel="external">教程</a> 就很详尽，请读者根据自己所选择的主题自行配置。<blockquote>
<p>如出现博客推送到服务器后，css样式无法显示，执行<code>hexo clean</code>，再次推送即可。</p>
</blockquote>
</li>
</ul>
<h2 id="hexo上传图片、视频"><a href="#hexo上传图片、视频" class="headerlink" title="hexo上传图片、视频"></a>hexo上传图片、视频</h2><ul>
<li>将图片储存在本地，通过<code>![](/images/image.jpg)</code>访问图片，文件夹images和_posts为同一目录。将图片放在images文件夹即可。</li>
<li>将图片储存在七牛云。如果你的博客有大量的图片，可以将图片放在七牛云上，然后复制url，插入即可。</li>
<li><p>上传视频，建议将视频放在七牛云上，<a href="https://chuhang123.github.io/2017/05/13/angular-thinkphp%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/">实例效果</a> ，实例代码</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">video</span> src=<span class="string">'http://oligray7m.bkt.clouddn.com/1490257478069.mp4 '</span> type=<span class="string">'video/mp4'</span> controls=<span class="string">'controls'</span>  <span class="attribute">width</span>=<span class="string">'100%'</span> height=<span class="string">'100%'</span>&gt;</div><div class="line">&lt;/video&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>使用<a href="https://asciinema.org" target="_blank" rel="external">asciinema</a> 在终端录制视频，安装及操作过程请参考<a href="https://asciinema.org/docs/installation" target="_blank" rel="external">这里</a> ，执行<code>asciinema rec</code>命令，开始录制终端，<code>Ctrl-D</code>结束录制，录制结束后会生成录制视频的网址。您也可以注册一个asclinema账号，对录制的视频进行管理。</p>
</li>
</ul>
<h2 id="畅言评论系统"><a href="#畅言评论系统" class="headerlink" title="畅言评论系统"></a>畅言评论系统</h2><p>因为多说评论系统即将关闭,<a href="https://disqus.com/" target="_blank" rel="external">disqus</a> 在国内访问受限，所以本博客转为使用<a href="https://changyan.kuaizhan.com/" target="_blank" rel="external">畅言</a> 。但是很多主题默认的评论系统只有duoshuo或者disqus。所以需要自行安装。登录官网，发现使用畅言必须要有备案才能使用，不过也不用担心，在网上随便找一个域名，在<a href="http://icp.chinaz.com/" target="_blank" rel="external">ICP备案查询</a> 中查找备案号，填入即可，审核通过后（大约要几个小时），进入畅言后台-系统设置-通用设置，进行修改即可，eg：<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/选区_002.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>。</p>
<p>将代码放在comment.ejs文件中<br><img src="/images/选区_001.png" width="85%" height="85%"><br>将博客部署到服务器上，你可能发现电脑端没有畅言评论框，打开控制台，你可能会看到下面的报错提示<br><figure class="highlight llvm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chuhang<span class="number">123</span>.github.io/:<span class="number">211</span> Mixed Content: The page at 'https://chuhang<span class="number">123</span>.github.io/<span class="number">2017</span>/<span class="number">05</span>/<span class="number">19</span>/<span class="symbol">%E6</span><span class="symbol">%89</span><span class="symbol">%8</span>B<span class="symbol">%E6</span><span class="symbol">%8</span>A<span class="symbol">%8</span>A<span class="symbol">%E6</span><span class="symbol">%89</span><span class="symbol">%8</span>Bhexo<span class="symbol">%E5</span><span class="symbol">%BB</span><span class="symbol">%BA</span><span class="symbol">%E7</span><span class="symbol">%AB</span><span class="symbol">%99</span>/' was loaded over HTTPS, but requested an insecure script 'http://assets.changyan.sohu.com/upload/changyan.js?conf=<span class="keyword">c</span><span class="number">245</span>a<span class="number">97</span>f<span class="number">00</span>b<span class="number">9</span>a<span class="number">8889</span>eb<span class="number">374</span>d<span class="number">9</span>a<span class="number">544</span><span class="keyword">c</span><span class="number">127</span>&amp;appid=cyt<span class="number">1</span>izVGM'. This request has been blocked<span class="comment">; the content must be served over HTTPS.</span></div></pre></td></tr></table></figure></p>
<p>大致是说只能使用https请求，不能使用http请求，有以下两种解决方案</p>
<ul>
<li>因为畅言支持https加密站点，直接将js代码中的http请求修改为https即可。</li>
<li>在head标签中加入一下代码，会将博客中http请求自动转化为https请求，但是在本地预览可能有问题,暂时还没找到解决方案<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Security-Policy"</span> <span class="attr">content</span>=<span class="string">"upgrade-insecure-requests"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">content</span>=<span class="string">"chuhang"</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>使用任意一种解决方案后，就可以愉快的使用畅言评论系统了。</p>
<blockquote>
<p>将博客部署到github后，注意博客的访问速度，如果访问过慢，打开控制台，看看是有什么原因导致的，比如使用百度站内搜索，将http修改为https后，访问速度就会变慢。</p>
</blockquote>
<h2 id="markdown基本语法"><a href="#markdown基本语法" class="headerlink" title="markdown基本语法"></a>markdown基本语法</h2><p><a href="https://zh.wikipedia.org/wiki/Markdown" target="_blank" rel="external">Markdown </a> 是一种轻量级标记语言，非常适合写作。现将基本的markdown语法整理如下，方便未使用过markdown的读者参考<br><img src="/images/选区_003.png" width="85%" height="85%"></p>
<blockquote>
<p>如果您发现有的效果没有实现，不防加个空格试试。eg：### 梦云智（最后一个”#”和”梦”之间加空格）。</p>
</blockquote>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>通过以上步骤，一个基本的博客站点就可以搭建起来了。建议每篇博客都要有关键词，提升被搜索引擎的找到的概率。 如果对主题的样式不是特别满意，您可以在themes/themeName/layout文件夹下修改主题页面的整体布局，在themes/themeName/source/css文件夹下修改css属性，打造属于自己的style。</p>
<blockquote>
<p>如有错误，欢迎指正。谢谢！</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;github Pages是托管在github上的静态网页，有300M的免费空间。Hexo 是一个快速、简洁且高效的博客框架。因为hexo是静态页面，不涉及到和数据库的交互等复杂操作，所以github pages的300M空间足以使用。本文将手把手教你在github pages上使用hexo搭建静态博客。您需要一个github账号，&lt;a href=&quot;https://nodejs.org/en/&quot;&gt;Node.js&lt;/a&gt; 、&lt;a href=&quot;https://git-scm.com/&quot;&gt;git&lt;/a&gt; 应用程序&lt;/p&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="https://chuhang123.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>错题本</title>
    <link href="https://chuhang123.github.io/2017/05/16/%E9%94%99%E9%A2%98%E6%9C%AC/"/>
    <id>https://chuhang123.github.io/2017/05/16/错题本/</id>
    <published>2017-05-16T01:51:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>1.一些数据是有API借口的，如航班信息。有时间尝试在tour项目的航班管理中通过API获取航班信息。<br>2.考研机试题<a href="http://ac.jobdu.com/problemset.php" target="_blank" rel="external">九度</a> ，配色网站<a href="http://colorschemedesigner.com/csd-3.5/" target="_blank" rel="external">Color Scheme </a> ，易用框架<a href="http://www.jeasyui.net/" target="_blank" rel="external">easyui</a> ,<br>3.数据库的视图的作用是查询，不能实现增删改的功能，如果多张表关联，查询信息如果比较麻烦，那么，用视图最好不过。</p>
<a id="more"></a>
<p>4.数据表冗余问题，如果个数据表中的字段有多条信息，那么，就需要再建立一张关联的表，而不要为了方便转化成json字符串，一方面产生了数据的冗余，不易管理数据，一方面不符合软件设计的基本思想。<br>5.剑指offer</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;1.一些数据是有API借口的，如航班信息。有时间尝试在tour项目的航班管理中通过API获取航班信息。&lt;br&gt;2.考研机试题&lt;a href=&quot;http://ac.jobdu.com/problemset.php&quot;&gt;九度&lt;/a&gt; ，配色网站&lt;a href=&quot;http://colorschemedesigner.com/csd-3.5/&quot;&gt;Color Scheme &lt;/a&gt; ，易用框架&lt;a href=&quot;http://www.jeasyui.net/&quot;&gt;easyui&lt;/a&gt; ,&lt;br&gt;3.数据库的视图的作用是查询，不能实现增删改的功能，如果多张表关联，查询信息如果比较麻烦，那么，用视图最好不过。&lt;/p&gt;
    
    </summary>
    
    
      <category term="错题" scheme="https://chuhang123.github.io/tags/%E9%94%99%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>数据结构——线性表</title>
    <link href="https://chuhang123.github.io/2017/05/16/%E9%93%BE%E8%A1%A8/"/>
    <id>https://chuhang123.github.io/2017/05/16/链表/</id>
    <published>2017-05-16T01:51:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>选择专业时没能选上技术方向，心痛。以后应该也没有数据结构的课程了，无奈，只能自学数据结构了，不过发现了一个很好的<a href="http://study.163.com/course/courseMain.htm?courseId=468002" target="_blank" rel="external">视频教程</a> ，讲的类似大话数据结构，很赞。因为时间比较紧张，而数据结构的课程有90个课时，所以这次学习的目标是了解数据结构的大致思想，敲写少量的代码加以巩固</p>
<a id="more"></a>
<p><a href="https://zh.wikipedia.org/wiki/%E7%BA%BF%E6%80%A7%E8%A1%A8" target="_blank" rel="external">线性表</a> 是由n个数据元素组成的有限序列。线性表分为<a href="https://zh.wikipedia.org/wiki/%E9%93%BE%E8%A1%A8" target="_blank" rel="external">链表</a> 和<a href="https://zh.wikipedia.org/wiki/%E9%A1%BA%E5%BA%8F%E8%A1%A8" target="_blank" rel="external">顺序表</a> 。</p>
<ul>
<li>顺序表的一般表现形式为数组，顺序表的主要特点就是长度固定，不可避免的浪费一些内存。</li>
<li>链表的长度是不固定的，储存的空间也不是连续的，当增加或者删除元素是也不会影响全局，但是由于链表需要很多次小块的分配内存，而分配内存的操作相对比较耗时。因此，链表不像理论分析的那么美好。</li>
<li>为了弥补链表在内存分配上的不足，出现了静态链表。他会预先分配一个足够长的数组，之后的数据元素都会保存在里面了。静态链表一般是由两个表组成的，一个是保存数据元素的链表，一个是保存空闲节点的链表。由于数据元素都是储存在数组中，所以经常使用数组索引代替指针。由于静态链表不需要很多次的分配内存，所以静态链表的效率和顺序表的效率几乎一样。</li>
</ul>
<blockquote>
<p>参考 <a href="http://www.cnblogs.com/cyjb/p/Lists.html" target="_blank" rel="external">http://www.cnblogs.com/cyjb/p/Lists.html</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;选择专业时没能选上技术方向，心痛。以后应该也没有数据结构的课程了，无奈，只能自学数据结构了，不过发现了一个很好的&lt;a href=&quot;http://study.163.com/course/courseMain.htm?courseId=468002&quot;&gt;视频教程&lt;/a&gt; ，讲的类似大话数据结构，很赞。因为时间比较紧张，而数据结构的课程有90个课时，所以这次学习的目标是了解数据结构的大致思想，敲写少量的代码加以巩固&lt;/p&gt;
    
    </summary>
    
      <category term="数据结构" scheme="https://chuhang123.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="链表" scheme="https://chuhang123.github.io/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>初始cookie与session</title>
    <link href="https://chuhang123.github.io/2017/05/16/%E5%88%9D%E5%A7%8Bcookie%E4%B8%8Esession/"/>
    <id>https://chuhang123.github.io/2017/05/16/初始cookie与session/</id>
    <published>2017-05-16T01:51:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>作为一个程序员，你可能会经常听到cookie和session这一对好兄弟，下面简单介绍一下 他们。</p>
<a id="more"></a>
<h3 id="了解cookie"><a href="#了解cookie" class="headerlink" title="了解cookie"></a>了解cookie</h3><p>当登录一个网站时，网站往往会请求用户输入用户名和密码，并且用户可以勾选“下次自动登录”。如果勾选了，那么下次访问同一网站时，用户会发现没输入用户名和密码就已经登录了。这正是因为前一次登录时，服务器发送了包含登录凭据（用户名加密码的某种加密形式）的Cookie到用户的硬盘上。第二次登录时，（如果该Cookie尚未到期）浏览器会发送该Cookie，服务器验证凭据，于是不必输入用户名和密码就让用户登录了。</p>
<h3 id="cookie分类"><a href="#cookie分类" class="headerlink" title="cookie分类"></a>cookie分类</h3><p>Cookie总是保存在客户端中，按在客户端中的存储位置，可分为内存Cookie和硬盘Cookie。内存Cookie由浏览器维护，保存在内存中，浏览器关闭后就消失了，其存在时间是短暂的。硬盘Cookie保存在硬盘里，有一个过期时间，除非用户手工清理或到了过期时间，硬盘Cookie不会被删除，其存在时间是长期的。所以，按存在时间，可分为非持久Cookie和持久Cookie。</p>
<h3 id="cookie的缺陷"><a href="#cookie的缺陷" class="headerlink" title="cookie的缺陷"></a>cookie的缺陷</h3><ul>
<li>Cookie会被附加在每个HTTP请求中，所以无形中增加了流量。</li>
<li>由于在HTTP请求中的Cookie是明文传递的，所以安全性成问题。（除非用HTTPS）</li>
<li>Cookie的大小限制在4KB左右。对于复杂的存储需求来说是不够用的。[3]</li>
</ul>
<h3 id="session是什么技术"><a href="#session是什么技术" class="headerlink" title="session是什么技术"></a>session是什么技术</h3><p>session采用的是在服务器端保存状态数据的方案。当较多的用户数据长时间的储存在服务器上，会增加服务器的负担，因此session中的数据信息要尽可能的少。</p>
<h3 id="关于session"><a href="#关于session" class="headerlink" title="关于session"></a>关于session</h3><ul>
<li>session_id的名称可以修改么？可以通过session_name()来获取或者设置。</li>
<li>session_id的值可以修改么？可以通过session_id()来获取或者设置。</li>
<li>session文件在计算机中的保存路径可以修改么？可以通过session_save_path()来获取或者设置。windows系统上的默认值为“C:\Windows\Temp”。</li>
<li>启动session会话后怎么做？通过session_start()函数启动回话后，接下来就可以注册session变量，PHP通过预定义数组来注册session变量，并且用isset()函数或者empty（）函数判断session变量是否注册。</li>
</ul>
<h3 id="session和cookie的区别。"><a href="#session和cookie的区别。" class="headerlink" title="session和cookie的区别。"></a>session和cookie的区别。</h3><ul>
<li>cookie机制采用的是在客户端保存的方案，也就是说cookie数据存放在用户的浏览器上，而session机制采用的是在服务器端保存的方案，即session数据存放在服务器端。</li>
<li>单个cookie文件的大小在客户端限制是3字节，而session文件大小在服务器段没有限制。</li>
<li>恶意网站可以通过暗中读取用户cookie的方式来盗取用户的隐私信息，因此，考虑到安全性，应当减少cookie的使用，转而使用session。</li>
<li>session将数据保存在服务器上，当访问增多时，会降低服务器的性能，因此，考虑到减轻服务器的负担，应当减少使用session，转而使用cookie。故建议在实际开发中，将重要的信息使用session保存，其他信息使用cookie保存。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>用户访问一个服务器，服务器首先检客户端是否含有session标识（session id）。如果客户端已经创建过session，则服务器会把他检索出来使用，如果没有，服务器会为他重新创建一个相关联的session id，并返回给客户端。用户浏览器收到这个session id后，会在硬盘的指定目录下生成客户端的session文件。文件的命名格为”sess”+session_id，文件中包含的是回话的具体内容。就这样建立一个回话后，下一次http请求时，用户浏览器会将当前域名下所有的cookie发给服务器，服务器根据cookie 中的session_id来读取保存在计算机中的相应session文件，并从session文件中获取会话的内容。</p>
<blockquote>
<p>如有错误，欢迎指正！</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;作为一个程序员，你可能会经常听到cookie和session这一对好兄弟，下面简单介绍一下 他们。&lt;/p&gt;
    
    </summary>
    
      <category term="php" scheme="https://chuhang123.github.io/categories/php/"/>
    
    
  </entry>
  
  <entry>
    <title>Brief process of building a personal blog</title>
    <link href="https://chuhang123.github.io/2017/05/16/The-brief-process-of-building-a-personal-blog/"/>
    <id>https://chuhang123.github.io/2017/05/16/The-brief-process-of-building-a-personal-blog/</id>
    <published>2017-05-16T01:51:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>The article is a brief statement mainly about the whole process of building personal blog, which is about from building Github Pages, learning hexo, to write blogs by using markdown, achieve the feature of uploading pictures. Tools: github account, node, npm, hexo, Image Uploader, markdown, swiftype.</p>
<a id="more"></a>
<h3 id="Building-Github-Pages"><a href="#Building-Github-Pages" class="headerlink" title="Building Github Pages"></a>Building Github Pages</h3><p>I have built my site by Github Pages, recommond <a href="https://pages.github.com/" target="_blank" rel="external">document </a> . If you only want to write blogs, the 300M space of Github Pages is enough to use. Because now the mainstream blog framework are static page, does not involve the interaction with the database, so do not need too much space.</p>
<h3 id="Learning-Hexo"><a href="#Learning-Hexo" class="headerlink" title="Learning Hexo"></a>Learning Hexo</h3><p>Building hexo environment needs node, npm, and the specific installation steps has been given by hexo <a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-blog-with-hexo-on-ubuntu-14-04" target="_blank" rel="external">official website</a> . I recommend <a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-blog-with-hexo-on-ubuntu-14-04" target="_blank" rel="external">learning materials</a> , if after deploying on server, there are not styles, you can deploy on the site again after executing <code>hexo clean</code> command. I used <a href="https://github.com/wuchong/jacman" target="_blank" rel="external">jacman theme</a> , due to the jacman’s author has written a detail tutorial, you can complete the theme setting by fowllowing it step by step. </p>
<h3 id="Writting-blogs-by-using-markdown"><a href="#Writting-blogs-by-using-markdown" class="headerlink" title="Writting blogs by using markdown"></a>Writting blogs by using markdown</h3><p>I did not know markdown before building blog, so I download a mainstream markdown tool called <a href="https://getremarkable.com/" target="_blank" rel="external">reMarkable</a> . After learning basic grammer, I have sorted out common grammer in markdown. I hope it can help you. <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://p1.bqimg.com/567571/10524bb9033523f6.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure> </p>
<blockquote>
<p>If some of the result is not what you want, you can add a space and try it again. eg: <code>### mengyunzhi</code>（there is a space between the last “#”and”m”). </p>
</blockquote>
<h3 id="Uploading-pictures"><a href="#Uploading-pictures" class="headerlink" title="Uploading pictures"></a>Uploading pictures</h3><p>Because you often need some pictures to explain what you want to express, the feature of uploading pictures is necessary, I used  <a href="https://chrome.google.com/webstore/detail/%E6%9E%81%E7%AE%80%E5%9B%BE%E5%BA%8A/heebflcbemenefckkgfnnklbhdbdkagg?hl=zh-CN" target="_blank" rel="external">Image Uploader</a> to upload pictures. After downloading Image Uploader, uploading a picture and copy the url of picture by using it, you can achieve the feature of uploading pictures. </p>
<h3 id="Searching-in-site"><a href="#Searching-in-site" class="headerlink" title="Searching in site"></a>Searching in site</h3><p>I tried to baidu’s search site and para, but I failed. And I saw <a href="https://swiftype.com/" target="_blank" rel="external">swiftype</a>  by accident, you can try it in my blog. Here is a <a href="http://www.jerryfu.net/post/search-engine-for-hexo-with-swiftype-v2.html" target="_blank" rel="external">tutorial</a> . I recommend swiftype instead baidu and google’s search site. </p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>Above is the process of building a whole personal blog. Before building the blog, maybe you feel that you need to be in a high level. But after you know it, you may find you can build your blog in short time even you are amateur. I believe that if reader have the determine to build your personal blog, you can be able to do as well as you want. Good luck to you!</p>
<p>If there are mistakes, please correct me.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;The article is a brief statement mainly about the whole process of building personal blog, which is about from building Github Pages, learning hexo, to write blogs by using markdown, achieve the feature of uploading pictures. Tools: github account, node, npm, hexo, Image Uploader, markdown, swiftype.&lt;/p&gt;
    
    </summary>
    
      <category term="English" scheme="https://chuhang123.github.io/categories/English/"/>
    
    
  </entry>
  
  <entry>
    <title>Difference between GET and POST</title>
    <link href="https://chuhang123.github.io/2017/05/16/Difference-between-GET-and-POST/"/>
    <id>https://chuhang123.github.io/2017/05/16/Difference-between-GET-and-POST/</id>
    <published>2017-05-16T01:51:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p> According to the online information and the books of PHP, I have sorted out the difference between GET and  POST to deepen memory and share with you. Intrinsical distincetion in them is that GET is used to query information but POST is used to update or save information. </p>
 <a id="more"></a>
<h3 id="security"><a href="#security" class="headerlink" title="security"></a>security</h3><p> We might see some documents  sometimes display that GET is safe but  disply it is not safe sometimes. But whether GET is safe or not ? GET is displayed to be safe in the documents because  we can not change data by using GET.  And GET is displayed to be not safe in the documents because when we use GET to submit data, data will display in url.</p>
<h3 id="The-size-of-the-data-transfer"><a href="#The-size-of-the-data-transfer" class="headerlink" title="The size of the data transfer"></a>The size of the data transfer</h3><ul>
<li>GET<br>url is limited in special browser or server. For example, the length of url in IE browser is limited  as 2k+35 byters. As for other browsers, url might be limited by operating system instead of browsers. So when we use GET to transefer data, the length will be limited.</li>
</ul>
<ul>
<li>POST<br>because POST dose not use url to transfer data, the size of data is not limited theoretically. Actually, web server will limite the size of data of POST(Generally does not affect). So when we upload massive data, we can only use POST.</li>
</ul>
<h3 id="Data-encoding"><a href="#Data-encoding" class="headerlink" title="Data encoding"></a>Data encoding</h3><p>As the GET data is displayed in the url, and url encoding is used in ASCII coding, so the data we submit  must be ASCII coding. If it is not ASCII coding, we need to convert.</p>
<h3 id="Default-form"><a href="#Default-form" class="headerlink" title="Default form"></a>Default form</h3><p>GET is the default action of form.</p>
<h3 id="Relationship-with-server"><a href="#Relationship-with-server" class="headerlink" title="Relationship with server"></a>Relationship with server</h3><p>GET is used to get data from server, while POST is used to transfer data to server.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt; According to the online information and the books of PHP, I have sorted out the difference between GET and  POST to deepen memory and share with you. Intrinsical distincetion in them is that GET is used to query information but POST is used to update or save information. &lt;/p&gt;
    
    </summary>
    
      <category term="English" scheme="https://chuhang123.github.io/categories/English/"/>
    
    
      <category term="GET" scheme="https://chuhang123.github.io/tags/GET/"/>
    
      <category term="POST" scheme="https://chuhang123.github.io/tags/POST/"/>
    
  </entry>
  
  <entry>
    <title>基于链表的C语言信息管理系统</title>
    <link href="https://chuhang123.github.io/2017/05/13/%E5%9F%BA%E4%BA%8E%E9%93%BE%E8%A1%A8%E7%9A%84C%E8%AF%AD%E8%A8%80%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <id>https://chuhang123.github.io/2017/05/13/基于链表的C语言信息管理系统/</id>
    <published>2017-05-13T01:51:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>这两天学习了朋友推荐的<a href="http://study.163.com/course/courseMain.htm?courseId=1003284031" target="_blank" rel="external">C语言链表视频教程</a> ，有了对链表的初步认识。教程用C对单向链表的实现了基本的增删改查操作，以及将数据储存到文件中和从文件中读取的功能。</p>
<a id="more"></a>
<h3 id="认识链表"><a href="#认识链表" class="headerlink" title="认识链表"></a>认识链表</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6d/Singly-linked-list.svg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>上图为单向链表的模型，图中包含三个节点，且每个节点包含两个部分，一部分保存或者显示节点的有关信息，一部分储存下一个节点的地址。从第一个节点依次指向最后一个节点，最后一个节点指向一个空值。如果需要查找链表的节点，则需要依次遍历节点。</p>
<h3 id="功能需求"><a href="#功能需求" class="headerlink" title="功能需求"></a>功能需求</h3><p>基于C语言链表，实现对学生表的基本增删改查操作，将学生数据保存至文件中，从文件中取出。并逐步完善系统，如在链表头和尾及指定位置增加学生信息，恢复删除学生信息等功能。</p>
<h3 id="整体规划"><a href="#整体规划" class="headerlink" title="整体规划"></a>整体规划</h3><p>定义学生节点STUNODE，声明链表的头和尾g_pHead，g_pEnd，使用switch语句，针对不同的指令，执行不同的命令。搭建学生信息管理系统的骨架。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//学生结点</span></div><div class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">STU</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">char</span> arrStuNum[<span class="number">10</span>];</div><div class="line">	<span class="keyword">char</span> arrStuName[<span class="number">10</span>];</div><div class="line">	<span class="keyword">int</span> iStuScore;</div><div class="line">	<span class="class"><span class="keyword">struct</span> _<span class="title">STU</span>* <span class="title">pNext</span>;</span></div><div class="line">&#125; STUNODE;</div><div class="line"></div><div class="line"><span class="comment">//声明链表的头和尾</span></div><div class="line">STUNODE* g_pHead = <span class="literal">NULL</span>;</div><div class="line">STUNODE* g_pEnd = <span class="literal">NULL</span>;</div></pre></td></tr></table></figure></p>
<h3 id="删除功能"><a href="#删除功能" class="headerlink" title="删除功能"></a>删除功能</h3><p>以删除功能为例，具体说明。分成只有一个节点或者多个节点两种情况讨论。</p>
<ul>
<li><p>只有一个节点。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//只有一个节点</span></div><div class="line"><span class="keyword">if</span> (g_pHead == g_pEnd) &#123;</div><div class="line">	<span class="built_in">free</span>(g_pHead);		<span class="comment">//删除节点</span></div><div class="line">	g_pHead = <span class="literal">NULL</span>;		<span class="comment">//把链表头赋值为NULL</span></div><div class="line">	g_pEnd = <span class="literal">NULL</span>;		<span class="comment">//把链表尾赋值为NULL</span></div><div class="line">	<span class="keyword">return</span>;				<span class="comment">//完成</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>有多个节点。这种情况又需要讨论了，分为链表的头、尾、中间三种。</p>
<figure class="highlight xl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//如果是首节点</span></div><div class="line"><span class="keyword">if</span> (g_pHead == pNode) &#123;</div><div class="line">	free(g_pHead);				<span class="comment">//删除节点</span></div><div class="line">	<span class="function"><span class="title">g_pHead</span> = g_pHead-&gt;</span>pNext;	<span class="comment">//指向想一个节点</span></div><div class="line">	return;						<span class="comment">//完成</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//如果是尾节点</span></div><div class="line">STUNODE* pTemp = g_pHead;</div><div class="line"><span class="keyword">if</span> (g_pEnd == pNode) &#123;</div><div class="line">	<span class="comment">//找到倒数第二个节点，并将指向空</span></div><div class="line">	<span class="function"><span class="title">while</span> (pTemp-&gt;</span>pNext != pNode) &#123;</div><div class="line">		<span class="function"><span class="title">pTemp</span> = pTemp-&gt;</span>pNext;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="title">pTemp</span>-&gt;</span>pNext = NULL;		</div><div class="line">	g_pEnd = pTemp;				<span class="comment">//把倒数第二个链表赋值为链表尾</span></div><div class="line">	free(pNode);				<span class="comment">//删除节点</span></div><div class="line">	return;						<span class="comment">//完成</span></div><div class="line">&#125;	</div><div class="line"></div><div class="line"><span class="comment">//如果是中间节点</span></div><div class="line"><span class="keyword">if</span> (pNode != g_pHead &amp;&amp; pNode != g_pEnd &amp;&amp; g_pHead != g_pEnd) &#123;</div><div class="line">	<span class="comment">//找出要删除的节点前一个</span></div><div class="line">	<span class="function"><span class="title">while</span> (pTemp-&gt;</span>pNext != pNode) &#123;</div><div class="line">		<span class="function"><span class="title">pTemp</span> = pTemp-&gt;</span>pNext;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="title">pTemp</span>-&gt;</span><span class="function"><span class="title">pNext</span> = pNode-&gt;</span>pNext;	<span class="comment">//剔除节点</span></div><div class="line">	free(pNode);					<span class="comment">//删除节点</span></div><div class="line">	return;							<span class="comment">//完成</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="实现学生信息管理系统"><a href="#实现学生信息管理系统" class="headerlink" title="实现学生信息管理系统"></a>实现学生信息管理系统</h3><p>完成增删改查后，把链表的节点的属性拼接起来，然后写入制定的文件中。读取时，拆分字符串，再将学生信息存入链表中。<br>效果如下：<br><script type="text/javascript" src="https://asciinema.org/a/5r01vujvrx4b3d1jlpdnui1kb.js" id="asciicast-5r01vujvrx4b3d1jlpdnui1kb" async></script></p>
<p>代码如下：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="comment">//学生结点</span></div><div class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">STU</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">char</span> arrStuNum[<span class="number">10</span>];</div><div class="line">	<span class="keyword">char</span> arrStuName[<span class="number">10</span>];</div><div class="line">	<span class="keyword">int</span> iStuScore;</div><div class="line">	<span class="class"><span class="keyword">struct</span> _<span class="title">STU</span>* <span class="title">pNext</span>;</span></div><div class="line">&#125; STUNODE;</div><div class="line"></div><div class="line"><span class="comment">//声明链表的头和尾</span></div><div class="line">STUNODE* g_pHead = <span class="literal">NULL</span>;</div><div class="line">STUNODE* g_pEnd = <span class="literal">NULL</span>;</div><div class="line"></div><div class="line"><span class="comment">//添加一个学生信息</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddStuMSG</span><span class="params">(<span class="keyword">char</span> arrStuNum[<span class="number">10</span>], <span class="keyword">char</span> arrStuName[<span class="number">10</span>], <span class="keyword">int</span> iStuScore)</span></span>;</div><div class="line"></div><div class="line"><span class="comment">//链表头添加一个节点</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddStuMSGToLinkHead</span><span class="params">(<span class="keyword">char</span> arrStuNum[<span class="number">10</span>], <span class="keyword">char</span> arrStuName[<span class="number">10</span>], <span class="keyword">int</span> iStuScore)</span></span>;</div><div class="line"></div><div class="line"><span class="comment">//清空链表</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">FreeLinkData</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line"><span class="comment">//打印数据</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShowStuData</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line"><span class="comment">//显示指令</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShowOrder</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line"><span class="comment">//指定位置插入节点</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertNode</span><span class="params">(STUNODE* pTemp, <span class="keyword">char</span> arrStuNum[<span class="number">10</span>], <span class="keyword">char</span> arrStuName[<span class="number">10</span>], <span class="keyword">int</span> iStuScore)</span></span>;</div><div class="line"></div><div class="line"><span class="comment">//查找制定学生</span></div><div class="line"><span class="function">STUNODE* <span class="title">FindStuByNum</span><span class="params">(<span class="keyword">char</span>* arrStuNum)</span></span>;</div><div class="line"></div><div class="line"><span class="comment">//删除指定的学生</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DeleteStuNode</span><span class="params">(STUNODE* pNode)</span></span>;</div><div class="line"></div><div class="line"><span class="comment">//保存信息到文件中</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">SaveStuToFile</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line"><span class="comment">//读取文件中的学生信息</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ReadStuFromFile</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> nOrder = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">char</span> arrStuNum[<span class="number">10</span>] = &#123;<span class="string">'\0'</span>&#125;;</div><div class="line">	<span class="keyword">char</span> arrStuName[<span class="number">10</span>] = &#123;<span class="string">'\0'</span>&#125;;</div><div class="line">	<span class="keyword">int</span> iStuScore = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">int</span> nFlag = <span class="number">1</span>;</div><div class="line"></div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***********学生信息管理系统************************\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***********本系统操作指令如下**********************\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  1、增加一个学生信息（尾添加）		***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	 11、增加一个学生信息（头添加）		***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	111、增加一个学生信息（在指定位置添加） ***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  2、查找指定学生的信息（姓名/学号） 	***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  3、修改指定学生的信息			***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  4、保存业主的信息到文件中		***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  5、读取文件的业主信息			***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  6、删除指定学生的信息			***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  7、恢复删除的学生的信息		***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  9、显示所有学生的信息			***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  0、退出系统				***\n"</span>);</div><div class="line"></div><div class="line">	<span class="comment">//读取文件中的学生信息</span></div><div class="line">	ReadStuFromFile();</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (nFlag)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"请输入指令(10查看指令):\n"</span>);</div><div class="line">		<span class="comment">//printf("%p\n", &amp;nOrder);</span></div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;nOrder);</div><div class="line"></div><div class="line">		<span class="keyword">switch</span> (nOrder)</div><div class="line">		&#123;</div><div class="line">		<span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">			<span class="comment">//添加一个学生信息</span></div><div class="line">			<span class="built_in">printf</span>(<span class="string">"输入学生的学号\n"</span>);</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuNum);</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"输入学生的姓名\n"</span>);</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuName);</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"输入学生的分数\n"</span>);</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;iStuScore);</div><div class="line"></div><div class="line">			AddStuMSG(arrStuNum, arrStuName, iStuScore);</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">11</span>:</div><div class="line">			<span class="comment">//添加一个学生信息</span></div><div class="line">			<span class="built_in">printf</span>(<span class="string">"输入学生的学号\n"</span>);</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuNum);</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"输入学生的姓名\n"</span>);</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuName);</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"输入学生的分数\n"</span>);</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;iStuScore);</div><div class="line"></div><div class="line">			AddStuMSGToLinkHead(arrStuNum, arrStuName, iStuScore);</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">111</span>:</div><div class="line">			<span class="comment">//指定位置添加学生</span></div><div class="line">			<span class="built_in">printf</span>(<span class="string">"输入指定学号\n"</span>);</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuNum);</div><div class="line"></div><div class="line">			STUNODE* pTemp;</div><div class="line">			pTemp = FindStuByNum(arrStuNum);</div><div class="line">			<span class="keyword">if</span> (<span class="literal">NULL</span> != pTemp) &#123;</div><div class="line">				<span class="built_in">printf</span>(<span class="string">"输入学生的学号\n"</span>);</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuNum);</div><div class="line">				<span class="built_in">printf</span>(<span class="string">"输入学生的姓名\n"</span>);</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuName);</div><div class="line">				<span class="built_in">printf</span>(<span class="string">"输入学生的分数\n"</span>);</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;iStuScore);</div><div class="line"></div><div class="line">				InsertNode(pTemp, arrStuNum,  arrStuName, iStuScore);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">			<span class="comment">//查找指定学生的信息</span></div><div class="line">			<span class="built_in">printf</span>(<span class="string">"输入指定学号\n"</span>);</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuNum);</div><div class="line"></div><div class="line">			pTemp = FindStuByNum(arrStuNum);</div><div class="line"></div><div class="line">			<span class="comment">//打印</span></div><div class="line">			<span class="keyword">if</span> (<span class="literal">NULL</span> != pTemp) &#123;</div><div class="line">				<span class="built_in">printf</span>(<span class="string">"学号:%s, 姓名:%s, 分数:%d\n"</span>, pTemp-&gt;arrStuNum, pTemp-&gt;arrStuName, pTemp-&gt;iStuScore);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">3</span>:</div><div class="line">			<span class="comment">//查找指定学生的信息</span></div><div class="line">			<span class="built_in">printf</span>(<span class="string">"输入指定学号\n"</span>);</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuNum);</div><div class="line"></div><div class="line">			<span class="comment">//查找</span></div><div class="line">			pTemp = FindStuByNum(arrStuNum);</div><div class="line"></div><div class="line">			<span class="comment">//打印</span></div><div class="line">			<span class="keyword">if</span> (<span class="literal">NULL</span> != pTemp) &#123;</div><div class="line">				<span class="comment">//修改学号</span></div><div class="line">				<span class="built_in">printf</span>(<span class="string">"请输入学号\n"</span>);</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuNum);</div><div class="line">				<span class="built_in">strcpy</span>(pTemp-&gt;arrStuNum, arrStuNum);</div><div class="line"></div><div class="line">				<span class="comment">//修改名字</span></div><div class="line">				<span class="built_in">printf</span>(<span class="string">"请输入姓名\n"</span>);</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuName);</div><div class="line">				<span class="built_in">strcpy</span>(pTemp-&gt;arrStuName, arrStuName);</div><div class="line"></div><div class="line">				<span class="comment">//修改分数</span></div><div class="line">				<span class="built_in">printf</span>(<span class="string">"请输入分数\n"</span>);</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;iStuScore);</div><div class="line">				pTemp-&gt;iStuScore = iStuScore;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">4</span>:</div><div class="line">			<span class="comment">//保存学生信息</span></div><div class="line">			SaveStuToFile();</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">6</span>:</div><div class="line">			<span class="comment">//删除一个节点 </span></div><div class="line">			<span class="built_in">printf</span>(<span class="string">"输入要删除的学生的学号\n"</span>);</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%s"</span>, arrStuNum);</div><div class="line"></div><div class="line">			<span class="comment">//查找</span></div><div class="line">			pTemp = FindStuByNum(arrStuNum);</div><div class="line"></div><div class="line">			<span class="comment">//删除一个节点</span></div><div class="line">			<span class="keyword">if</span> (<span class="literal">NULL</span> != pTemp) &#123;</div><div class="line">				DeleteStuNode(pTemp);</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">7</span>:</div><div class="line">			<span class="comment">//恢复</span></div><div class="line">			FreeLinkData();</div><div class="line">			g_pHead = <span class="literal">NULL</span>;</div><div class="line">			g_pEnd = <span class="literal">NULL</span>;</div><div class="line">			ReadStuFromFile();</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">9</span>:</div><div class="line">			ShowStuData();</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">10</span>:</div><div class="line">			<span class="comment">//查看指令</span></div><div class="line">			ShowOrder();</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">			nFlag = <span class="number">0</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">default</span>:</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"not right\n"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//保存学生信息</span></div><div class="line">	SaveStuToFile();</div><div class="line"></div><div class="line">	<span class="comment">//释放链表</span></div><div class="line">	FreeLinkData();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//添加一个学生信息</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddStuMSG</span><span class="params">(<span class="keyword">char</span> arrStuNum[<span class="number">10</span>], <span class="keyword">char</span> arrStuName[<span class="number">10</span>], <span class="keyword">int</span> iStuScore)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="comment">//逻辑</span></div><div class="line">	<span class="comment">//创建一个节点</span></div><div class="line">	STUNODE* pTemp = (STUNODE*)<span class="built_in">malloc</span> (<span class="keyword">sizeof</span> (STUNODE));</div><div class="line">	<span class="comment">//检验参数的合法性</span></div><div class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == arrStuNum || <span class="literal">NULL</span> == arrStuName || iStuScore &lt; <span class="number">0</span>) &#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"学生信息输入错误！\n"</span>);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//赋值</span></div><div class="line">	<span class="built_in">strcpy</span>(pTemp-&gt;arrStuNum, arrStuNum);</div><div class="line">	<span class="built_in">strcpy</span>(pTemp-&gt;arrStuName, arrStuName);</div><div class="line">	pTemp-&gt;iStuScore = iStuScore;</div><div class="line">	pTemp-&gt;pNext = <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">	<span class="comment">//接在链表上</span></div><div class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == g_pHead || <span class="literal">NULL</span> == g_pEnd) &#123;</div><div class="line">		g_pHead = pTemp;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		g_pEnd-&gt;pNext = pTemp;</div><div class="line">	&#125;</div><div class="line">	g_pEnd = pTemp;</div><div class="line"></div><div class="line">&#125; </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">FreeLinkData</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	STUNODE* pTemp = g_pHead;</div><div class="line">	<span class="keyword">while</span> (g_pHead != <span class="literal">NULL</span>) &#123;</div><div class="line">		<span class="comment">//记录结点</span></div><div class="line">		pTemp = g_pHead;</div><div class="line">		<span class="comment">//向后移动一个</span></div><div class="line">		g_pHead = g_pHead-&gt;pNext; </div><div class="line">		<span class="comment">//删除节点</span></div><div class="line">		<span class="built_in">free</span>(pTemp);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//打印数据</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShowStuData</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	STUNODE* pTemp = g_pHead;</div><div class="line">	<span class="keyword">while</span> (<span class="literal">NULL</span> != pTemp)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"学号:%s, 姓名:%s, 分数:%d\n"</span>, pTemp-&gt;arrStuNum, pTemp-&gt;arrStuName, pTemp-&gt;iStuScore);</div><div class="line">		<span class="comment">//向下走一步</span></div><div class="line">		pTemp = pTemp-&gt;pNext;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//显示指令</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShowOrder</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***********学生信息管理系统************************\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***********本系统操作指令如下**********************\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  1、增加一个学生信息（尾添加）		***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	 11、增加一个学生信息（头添加）		***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	111、增加一个学生信息（在指定位置添加） ***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  2、查找指定学生的信息（姓名/学号） 	***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  3、修改指定学生的信息			***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  4、保存业主的信息到文件中		***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  5、读取文件的业主信息			***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  6、删除指定学生的信息			***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  7、恢复删除的学生的信息		***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  9、显示所有学生的信息			***\n"</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"***	  0、退出系统				***\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddStuMSGToLinkHead</span><span class="params">(<span class="keyword">char</span> arrStuNum[<span class="number">10</span>], <span class="keyword">char</span> arrStuName[<span class="number">10</span>], <span class="keyword">int</span> iStuScore)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="comment">//创建一个节点</span></div><div class="line">	STUNODE* pTemp = (STUNODE*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(STUNODE));</div><div class="line">	<span class="comment">//检测参数合法性</span></div><div class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == arrStuNum || <span class="literal">NULL</span> == arrStuName || iStuScore &lt; <span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"学生信息输入错误！\n"</span>);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="built_in">strcpy</span>(pTemp-&gt;arrStuNum, arrStuNum);</div><div class="line">	<span class="built_in">strcpy</span>(pTemp-&gt;arrStuName, arrStuName);</div><div class="line">	pTemp-&gt;iStuScore = iStuScore;</div><div class="line">	pTemp-&gt;pNext = <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">	<span class="comment">//链表为空</span></div><div class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == g_pHead || <span class="literal">NULL</span> == g_pEnd) &#123;</div><div class="line">		g_pEnd = pTemp;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		pTemp-&gt;pNext = g_pHead;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	g_pHead = pTemp;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//查找制定学生</span></div><div class="line"><span class="function">STUNODE* <span class="title">FindStuByNum</span><span class="params">(<span class="keyword">char</span>* arrStuNum)</span></span></div><div class="line">&#123;</div><div class="line">	STUNODE* pTemp = g_pHead;</div><div class="line">	<span class="comment">//判断参数的合法性</span></div><div class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == arrStuNum) &#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"学号输入错误！\n"</span>);</div><div class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//判断链表是否为空</span></div><div class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == g_pHead || <span class="literal">NULL</span> ==g_pEnd) &#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"链表为NULL！\n"</span>);</div><div class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//遍历链表</span></div><div class="line">	<span class="keyword">while</span> (<span class="literal">NULL</span> != pTemp) &#123;</div><div class="line">		<span class="keyword">if</span> (<span class="number">0</span> == <span class="built_in">strcmp</span>(pTemp-&gt;arrStuNum, arrStuNum)) &#123;</div><div class="line">			<span class="keyword">return</span> pTemp;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		pTemp = pTemp-&gt;pNext;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"查无此节点！\n"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//指定位置插入节点</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertNode</span><span class="params">(STUNODE* pTemp, <span class="keyword">char</span> arrStuNum[<span class="number">10</span>], <span class="keyword">char</span> arrStuName[<span class="number">10</span>], <span class="keyword">int</span> iStuScore)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="comment">//创建节点</span></div><div class="line">	STUNODE* pNewTemp = (STUNODE*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(STUNODE));</div><div class="line"></div><div class="line">	<span class="comment">//成员赋值</span></div><div class="line">	<span class="built_in">strcpy</span>(pNewTemp-&gt;arrStuNum, arrStuNum);</div><div class="line">	<span class="built_in">strcpy</span>(pNewTemp-&gt;arrStuName, arrStuName);</div><div class="line">	pNewTemp-&gt;iStuScore = iStuScore;</div><div class="line">	pNewTemp-&gt;pNext = <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">	<span class="comment">//判断插入位置是否为未结点</span></div><div class="line">	<span class="keyword">if</span> (pTemp == g_pEnd) &#123;</div><div class="line">		g_pEnd-&gt;pNext = pNewTemp;</div><div class="line">		g_pEnd = pNewTemp;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		pNewTemp-&gt;pNext =  pTemp-&gt;pNext;</div><div class="line">		pTemp-&gt;pNext =  pNewTemp;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//删除指定的学生</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DeleteStuNode</span><span class="params">(STUNODE* pNode)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="comment">//只有一个节点</span></div><div class="line">	<span class="keyword">if</span> (g_pHead == g_pEnd) &#123;</div><div class="line">		<span class="built_in">free</span>(g_pHead);</div><div class="line">		g_pHead = <span class="literal">NULL</span>;</div><div class="line">		g_pEnd = <span class="literal">NULL</span>;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//如果是首节点</span></div><div class="line">	<span class="keyword">if</span> (g_pHead == pNode) &#123;</div><div class="line">		<span class="built_in">free</span>(g_pHead);</div><div class="line">		g_pHead = g_pHead-&gt;pNext;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//如果是尾节点</span></div><div class="line">	STUNODE* pTemp = g_pHead;</div><div class="line">	<span class="keyword">if</span> (g_pEnd == pNode) &#123;</div><div class="line">		<span class="keyword">while</span> (pTemp-&gt;pNext != pNode) &#123;</div><div class="line">			pTemp = pTemp-&gt;pNext;</div><div class="line">		&#125;</div><div class="line">		pTemp-&gt;pNext = <span class="literal">NULL</span>;</div><div class="line">		g_pEnd = pTemp;</div><div class="line">		<span class="built_in">free</span>(pNode);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//如果是中间节点</span></div><div class="line">	<span class="keyword">if</span> (pNode != g_pHead &amp;&amp; pNode != g_pEnd &amp;&amp; g_pHead != g_pEnd) &#123;</div><div class="line">		<span class="keyword">while</span> (pTemp-&gt;pNext != pNode) &#123;</div><div class="line">			pTemp = pTemp-&gt;pNext;</div><div class="line">		&#125;</div><div class="line">		pTemp-&gt;pNext = pNode-&gt;pNext;</div><div class="line">		<span class="built_in">free</span>(pNode);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//保存信息到文件中</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">SaveStuToFile</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	FILE* pFile = <span class="literal">NULL</span>;</div><div class="line">	STUNODE* pTemp = g_pHead;</div><div class="line">	<span class="keyword">char</span> strBuf[<span class="number">30</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">	<span class="keyword">char</span> strScore[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line"></div><div class="line">	<span class="comment">//判断链表中是否为null</span></div><div class="line">	<span class="keyword">if</span> (g_pHead == <span class="literal">NULL</span>) &#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"没有学生\n"</span>);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//打开文件</span></div><div class="line">	pFile = fopen(<span class="string">"dat.dat"</span>, <span class="string">"wb+"</span>);</div><div class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == pFile) &#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"文件打开失败！\n"</span>);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//操作文件指针</span></div><div class="line">	<span class="keyword">while</span> (<span class="literal">NULL</span> != pTemp) &#123;</div><div class="line">		<span class="comment">//学号赋值进去</span></div><div class="line">		<span class="built_in">strcpy</span>(strBuf, pTemp-&gt;arrStuNum);</div><div class="line">		<span class="built_in">strcat</span>(strBuf, <span class="string">"."</span>);</div><div class="line">		<span class="comment">//姓名</span></div><div class="line">		<span class="built_in">strcat</span>(strBuf, pTemp-&gt;arrStuName);</div><div class="line">		<span class="built_in">strcat</span>(strBuf, <span class="string">"."</span>);</div><div class="line">		<span class="comment">//分数</span></div><div class="line">		<span class="built_in">snprintf</span>(strScore, <span class="number">10</span>, <span class="string">"%d"</span>, pTemp-&gt;iStuScore);  <span class="comment">//linux下不能使用itoa函数，故用此代替</span></div><div class="line">		<span class="comment">//拼接字符串</span></div><div class="line">		<span class="built_in">strcat</span>(strBuf, strScore);</div><div class="line"></div><div class="line">		fwrite(strBuf, <span class="number">1</span>, <span class="built_in">strlen</span>(strBuf), pFile);</div><div class="line">		fwrite(<span class="string">"\r\n"</span>, <span class="number">1</span>, <span class="built_in">strlen</span>(<span class="string">"\r\n"</span>), pFile);</div><div class="line"></div><div class="line">		pTemp = pTemp-&gt;pNext;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//关闭文件</span></div><div class="line">	fclose(pFile);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//读取文件中的学生信息</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ReadStuFromFile</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	FILE* pFile = fopen(<span class="string">"dat.dat"</span>, <span class="string">"rb+"</span>);</div><div class="line">	<span class="keyword">char</span> strBuf[<span class="number">30</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">	<span class="keyword">char</span> strStuNum[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">	<span class="keyword">char</span> strStuName[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">	<span class="keyword">char</span> strStuScore[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">	<span class="keyword">int</span> nCount = <span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> iStuScore;</div><div class="line"></div><div class="line"></div><div class="line">	<span class="keyword">if</span> (<span class="literal">NULL</span> == pFile) &#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"文件打开失败\n"</span>);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//操作指针读取函数</span></div><div class="line">	</div><div class="line">	<span class="keyword">while</span> (<span class="literal">NULL</span> != fgets(strBuf, <span class="number">30</span>, pFile)) &#123;</div><div class="line">		<span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">		<span class="keyword">int</span> j = <span class="number">0</span>;</div><div class="line">		<span class="keyword">int</span> nCount = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; strBuf[i] != <span class="string">'\r'</span>; i++) &#123;</div><div class="line">			<span class="comment">//没到.</span></div><div class="line">			<span class="keyword">if</span> (<span class="number">0</span> == nCount) &#123;</div><div class="line">				strStuNum[i] = strBuf[i];</div><div class="line">				<span class="keyword">if</span> (<span class="string">'.'</span> == strBuf[i]) &#123;</div><div class="line">					strStuNum[i] = <span class="string">'\0'</span>;</div><div class="line">					nCount++;</div><div class="line">				&#125;</div><div class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">1</span> == nCount) &#123;</div><div class="line">				<span class="keyword">if</span> (<span class="string">'.'</span> != strBuf[i]) &#123;</div><div class="line">					strStuName[j] = strBuf[i];</div><div class="line">					j++;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">if</span> (<span class="string">'.'</span> == strBuf[i]) &#123;</div><div class="line">					strStuName[j] = <span class="string">'\0'</span>;</div><div class="line">					nCount++;</div><div class="line">					j = <span class="number">0</span>;</div><div class="line">				&#125;</div><div class="line">				</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				strStuScore[j] = strBuf[i];</div><div class="line">				j++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="comment">//将学生的分数转化为int类型</span></div><div class="line">		iStuScore = strtol(strStuScore, <span class="literal">NULL</span>, <span class="number">10</span>);</div><div class="line">		AddStuMSG(strStuNum, strStuName, iStuScore);</div><div class="line">	&#125;</div><div class="line">	fclose(pFile);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这两天学习了朋友推荐的&lt;a href=&quot;http://study.163.com/course/courseMain.htm?courseId=1003284031&quot;&gt;C语言链表视频教程&lt;/a&gt; ，有了对链表的初步认识。教程用C对单向链表的实现了基本的增删改查操作，以及将数据储存到文件中和从文件中读取的功能。&lt;/p&gt;
    
    </summary>
    
      <category term="数据结构" scheme="https://chuhang123.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="demo" scheme="https://chuhang123.github.io/tags/demo/"/>
    
      <category term="链表" scheme="https://chuhang123.github.io/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>订单号生成规则简述</title>
    <link href="https://chuhang123.github.io/2017/05/13/%E8%AE%A2%E5%8D%95%E5%8F%B7%E7%94%9F%E6%88%90%E8%A7%84%E5%88%99%E7%AE%80%E8%BF%B0/"/>
    <id>https://chuhang123.github.io/2017/05/13/订单号生成规则简述/</id>
    <published>2017-05-13T01:51:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>最近做的项目需要生成订单编号，查阅资料后进行了学习总结，并将最终项目中使用的订单号生成规则进行记录。</p>
<a id="more"></a>
<h2 id="订单编号生成规则"><a href="#订单编号生成规则" class="headerlink" title="订单编号生成规则"></a>订单编号生成规则</h2><ul>
<li>不重复。这是生成订单号最基本、最重要的原则。比如一个人在京东上买了一个手机，另外一个人在京东上买了一包卫生纸，生成了一样的订单编号，一个人给客服打电话，客服一查，到底是哪个商品呢？</li>
<li>安全。订单编号不能暴露客户的id，或者让竞争对手很容易看出近期的订单量。</li>
<li>不能大规模生成随机码。当订单量比较多的时候，大规模生成随机码容易发生碰撞。</li>
<li>控制位数。客户向客服上报订单编号时，太长不仅容易出错，而且耽误时间。</li>
<li>符合实际需求。订单的生成规则要根据自己的项目中实际的需求。比如一个小型网站使用淘宝的订单编号生成规则，显然有点大费周章了。</li>
<li>订单号尽量保持整形。提高数据库的检索效率，也不至于凌乱，或是让一些英文发信不标准的朋友尴尬。</li>
</ul>
<h2 id="实例参考"><a href="#实例参考" class="headerlink" title="实例参考"></a>实例参考</h2><ul>
<li><p>小米订单生成规则。1——111218—03234—5170，将订单分为四个部分。第一部分，1表示购买，2表示退货。第二部分，表示2011年12月18日下的单。第三部分，时间戳对应0:53:54。最后一部分，表示在同一秒内下的第5170单，也就是说，小米认为，在一秒内不会超过一万个订单。</p>
</li>
<li><p>宅妈妈app订单生成规则。订单是一个四位数的自增数字，可能想让用户感觉到订单在不断的增加，或者业务初期不想让用户反馈问题时报上冗长的订单号。</p>
</li>
</ul>
<h2 id="所犯的错"><a href="#所犯的错" class="headerlink" title="所犯的错"></a>所犯的错</h2><p>开始的时候欲使用的订单生成规则为：年月日+时间戳（五为）+随机数（2位）+客户id后四位，如20170421—34324——32—32321。如果这样设置的话当客户超过十万人时，如果id为1和100001同一秒下单订单号就有可能重复，而且随机数的一般作用为混淆别人找出订单生成规则，而实际项目中没有必要，不是很符合实际需求。</p>
<h2 id="项目中使用的订单生成规则"><a href="#项目中使用的订单生成规则" class="headerlink" title="项目中使用的订单生成规则"></a>项目中使用的订单生成规则</h2><p>综合以上因素，项目中决定使用：年月日+时间戳（后五位）+同一秒内订单生成序列号（三位）。例：20170421—34234—001，前13位精确到秒，后三位表示同一秒内生成的第一单。如果同一秒内生成了多个订单，则这些订单钱13位一样，后三位依次递增，也就是系统认为一秒内不会同时生成1000个订单。</p>
<blockquote>
<p>如有错误，欢迎指正！</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近做的项目需要生成订单编号，查阅资料后进行了学习总结，并将最终项目中使用的订单号生成规则进行记录。&lt;/p&gt;
    
    </summary>
    
    
      <category term="web" scheme="https://chuhang123.github.io/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>angular+thinkphp上传图片</title>
    <link href="https://chuhang123.github.io/2017/05/13/angular-thinkphp%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/"/>
    <id>https://chuhang123.github.io/2017/05/13/angular-thinkphp上传图片/</id>
    <published>2017-05-13T01:51:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>最近做的项目中需要用到图片上传功能，决定使用angular+thinkphp实现图片上传功能。尝试了ng-flow、ng-file-upload，都没有达到理想的效果，最终使用angular-file-upload实现。</p>
<a id="more"></a>
<p>效果如下：</p>
<video src="http://oligray7m.bkt.clouddn.com/1490257478069.mp4 " type="video/mp4" controls="controls" width="100%" height="100%"><br></video>

<h2 id="实现流程"><a href="#实现流程" class="headerlink" title="实现流程"></a>实现流程</h2><ul>
<li>获取图片信息</li>
<li>将图片移至指定的目录下</li>
<li>将图片的信息保存到数据库中</li>
</ul>
<h2 id="具体细节"><a href="#具体细节" class="headerlink" title="具体细节"></a>具体细节</h2><p>下载插件示例代码，插件的示例代码非常完善，图片的缩略图功能、进度展示、图片尺寸等信息示例代码中都有，并且每一个操作的返回值也都给出了，使用非常方便。<br>将相关资源引入，上传的样式即可实现。修改路由信息，当用户点击上传按钮时，调用请求的方法，讲图片保存，并返回图片id，点击提交按钮，将图片id存入对应的模块中。</p>
<p>对应的时序图如下(新增和编辑)：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://oligray7m.bkt.clouddn.com/RJH2OW2@MXSUE1FGO64YV7S.png" alt="时序图" title="">
                </div>
                <div class="image-caption">时序图</div>
            </figure> </p>
<p>如有错误，欢迎指正！</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近做的项目中需要用到图片上传功能，决定使用angular+thinkphp实现图片上传功能。尝试了ng-flow、ng-file-upload，都没有达到理想的效果，最终使用angular-file-upload实现。&lt;/p&gt;
    
    </summary>
    
      <category term="angularjs" scheme="https://chuhang123.github.io/categories/angularjs/"/>
    
    
      <category term="demo" scheme="https://chuhang123.github.io/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>16-17跟媳妇平凡的日子</title>
    <link href="https://chuhang123.github.io/2017/04/30/16-17%E8%B7%9F%E5%AA%B3%E5%A6%87%E5%B9%B3%E5%87%A1%E7%9A%84%E6%97%A5%E5%AD%90/"/>
    <id>https://chuhang123.github.io/2017/04/30/16-17跟媳妇平凡的日子/</id>
    <published>2017-04-30T01:55:08.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>16-17和媳妇平凡的日子。<br><a id="more"></a></p>
<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><p><img src="/love/16-17shenghuo/16-17shenghuo (1).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (2).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (3).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (4).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (5).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (6).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (7).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (8).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (9).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (10).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (11).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (12).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (13).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (14).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (15).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (16).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (17).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (18).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (19).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (20).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (21).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (22).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (23).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (24).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (25).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (26).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (27).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (28).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (29).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (30).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (31).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (32).jpg">   <img src="/love/16-17shenghuo/16-17shenghuo (33).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (34).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (35).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (36).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (37).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (38).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (39).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (40).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (41).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (42).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (43).jpg"> <img src="/love/16-17shenghuo/16-17shenghuo (44).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (45).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (46).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (47).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (48).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (49).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (50).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (51).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (52).jpg"> <img src="/love/16-17shenghuo/16-17shenghuo (53).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (54).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (55).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (56).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (57).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (58).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (59).jpg">  <img src="/love/16-17shenghuo/16-17shenghuo (60).jpg"><img src="/love/16-17shenghuo/16-17shenghuo (61).jpg"> <em>**</em></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;16-17和媳妇平凡的日子。&lt;br&gt;
    
    </summary>
    
      <category term="photos" scheme="https://chuhang123.github.io/categories/photos/"/>
    
    
  </entry>
  
  <entry>
    <title>16-17美图集</title>
    <link href="https://chuhang123.github.io/2017/04/30/16-17%E7%BE%8E%E5%9B%BE%E9%9B%86/"/>
    <id>https://chuhang123.github.io/2017/04/30/16-17美图集/</id>
    <published>2017-04-30T01:54:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>16-17和媳妇儿的美图<br><a id="more"></a></p>
<video src="http://oligray7m.bkt.clouddn.com/w0386t31jri.10703.1.mp4 " type="video/mp4" controls="controls" width="100%" height="100%"><br></video>

<h2 id="美图"><a href="#美图" class="headerlink" title="美图"></a>美图</h2><p><img src="/love/1617meitu/1.jpg">  <img src="/love/1617meitu/2.jpg"><br><img src="/love/1617meitu/3.jpg">  <img src="/love/1617meitu/4.jpg"><img src="/love/1617meitu/5.jpg">  <img src="/love/1617meitu/6.jpg"><img src="/love/1617meitu/7.jpg">  <img src="/love/1617meitu/8.jpg"><img src="/love/1617meitu/9.jpg">  <img src="/love/1617meitu/16.jpg"><br><img src="/love/1617meitu/10.jpg">  <img src="/love/1617meitu/17.jpg"><br><img src="/love/1617meitu/11.jpg">  <img src="/love/1617meitu/18.jpg"><br><img src="/love/1617meitu/12.jpg">  <img src="/love/1617meitu/19.jpg"><br><img src="/love/1617meitu/13.jpg">  <img src="/love/1617meitu/20.jpg"><br><img src="/love/1617meitu/14.jpg">  <img src="/love/1617meitu/21.jpg"><br><img src="/love/1617meitu/15.jpg">  <img src="/love/1617meitu/22.jpg"><br><img src="/love/1617meitu/23.jpg">  <img src="/love/1617meitu/27.jpg"><br><img src="/love/1617meitu/24.jpg">  <img src="/love/1617meitu/28.jpg"><br><img src="/love/1617meitu/25.jpg">  <img src="/love/1617meitu/29.jpg"><br><img src="/love/1617meitu/26.jpg">  <img src="/love/1617meitu/30.jpg"><br><img src="/love/1617meitu/32.jpg">  <img src="/love/1617meitu/31.jpg"><br><img src="/love/1617meitu/33.jpg">  <img src="/love/1617meitu/34.jpg"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;16-17和媳妇儿的美图&lt;br&gt;
    
    </summary>
    
      <category term="photos" scheme="https://chuhang123.github.io/categories/photos/"/>
    
    
  </entry>
  
  <entry>
    <title>跟媳妇儿去秦皇岛</title>
    <link href="https://chuhang123.github.io/2017/04/29/%E7%A7%A6%E7%9A%87%E5%B2%9B/"/>
    <id>https://chuhang123.github.io/2017/04/29/秦皇岛/</id>
    <published>2017-04-29T13:00:47.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>16年十一假期的秦皇岛之旅，跟媳妇儿玩的很开心。<br><a id="more"></a></p>
<p><img src="/love/qinhuangdao/qinhuangdao (30).jpg">    <img src="/love/qinhuangdao/qinhuangdao (31).jpg"><br><img src="/love/qinhuangdao/qinhuangdao (35).jpg">    <img src="/love/qinhuangdao/qinhuangdao (36).jpg"><img src="/love/qinhuangdao/qinhuangdao (5).jpg">    <img src="/love/qinhuangdao/qinhuangdao (6).jpg"><img src="/love/qinhuangdao/qinhuangdao (7).jpg">    <img src="/love/qinhuangdao/qinhuangdao (8).jpg"><img src="/love/qinhuangdao/qinhuangdao (9).jpg">    <img src="/love/qinhuangdao/qinhuangdao (10).jpg"><img src="/love/qinhuangdao/qinhuangdao (11).jpg">    <img src="/love/qinhuangdao/qinhuangdao (12).jpg"><img src="/love/qinhuangdao/qinhuangdao (13).jpg">    <img src="/love/qinhuangdao/qinhuangdao (14).jpg"><img src="/love/qinhuangdao/qinhuangdao (15).jpg">    <img src="/love/qinhuangdao/qinhuangdao (16).jpg"><img src="/love/qinhuangdao/qinhuangdao (17).jpg">    <img src="/love/qinhuangdao/qinhuangdao (18).jpg"><img src="/love/qinhuangdao/qinhuangdao (19).jpg">    <img src="/love/qinhuangdao/qinhuangdao (20).jpg"><img src="/love/qinhuangdao/qinhuangdao (21).jpg">    <img src="/love/qinhuangdao/qinhuangdao (22).jpg"><img src="/love/qinhuangdao/qinhuangdao (23).jpg">    <img src="/love/qinhuangdao/qinhuangdao (24).jpg"><img src="/love/qinhuangdao/qinhuangdao (25).jpg">    <img src="/love/qinhuangdao/qinhuangdao (26).jpg"><img src="/love/qinhuangdao/qinhuangdao (27).jpg">    <img src="/love/qinhuangdao/qinhuangdao (28).jpg"><img src="/love/qinhuangdao/qinhuangdao (29).jpg">    <img src="/love/qinhuangdao/qinhuangdao (1).jpg"><img src="/love/qinhuangdao/qinhuangdao (2).jpg">    <img src="/love/qinhuangdao/qinhuangdao (32).jpg"><img src="/love/qinhuangdao/qinhuangdao (33).jpg">    <img src="/love/qinhuangdao/qinhuangdao (34).jpg"><img src="/love/qinhuangdao/qinhuangdao (3).jpg">    <img src="/love/qinhuangdao/qinhuangdao (4).jpg"><img src="/love/qinhuangdao/qinhuangdao (37).jpg"></p>
<p>这是一个gallery测试    </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;16年十一假期的秦皇岛之旅，跟媳妇儿玩的很开心。&lt;br&gt;
    
    </summary>
    
      <category term="photos" scheme="https://chuhang123.github.io/categories/photos/"/>
    
    
  </entry>
  
  <entry>
    <title>Gallery</title>
    <link href="https://chuhang123.github.io/2017/04/16/test/"/>
    <id>https://chuhang123.github.io/2017/04/16/test/</id>
    <published>2017-04-16T01:51:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>这是一个gallery测试</p>
]]></content>
    
    <summary type="html">
    
      Gallery Post Test. 测试图片类文章的显示。
    
    </summary>
    
      <category term="photos" scheme="https://chuhang123.github.io/categories/photos/"/>
    
    
  </entry>
  
  <entry>
    <title>搭建个人博客全过程简要</title>
    <link href="https://chuhang123.github.io/2017/04/16/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%AE%80%E8%A6%81/"/>
    <id>https://chuhang123.github.io/2017/04/16/搭建个人博客简要/</id>
    <published>2017-04-16T01:51:34.000Z</published>
    <updated>2017-11-20T13:06:58.931Z</updated>
    
    <content type="html"><![CDATA[<p>本文主要简述搭建个人博客的全部流程，从搭建个人站点、学习hexo，到使用markdown写博客、实现上传图片的功能，对具体的技术细节不做讲述。工具：github账号、node、npm、hexo、极简图床、markdown、swiftype。</p>
<a id="more"></a>
<h3 id="搭建个人站点"><a href="#搭建个人站点" class="headerlink" title="搭建个人站点"></a>搭建个人站点</h3><p>笔者通过github Pages搭建自己的站点，推荐<a href="https://pages.github.com/" target="_blank" rel="external">学习资料</a> ，如果仅仅是用来写博客，github Pages的300M空间以足够使用，因为现在主流的博客框架均为静态界面，不涉及到和数据库的交互,故不需要太大的空间。</p>
<h3 id="学习hexo"><a href="#学习hexo" class="headerlink" title="学习hexo"></a>学习hexo</h3><p>搭建hexo环境需要node、npm，具体的安装步骤hexo<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">官网</a> 已给出，推荐hexo<a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-blog-with-hexo-on-ubuntu-14-04" target="_blank" rel="external">学习资料</a> ，如果部署到站点后网页无样式，执行<code>hexo clean</code>命令后，再次部署到站点即可。笔者使用<a href="https://github.com/wuchong/jacman" target="_blank" rel="external">jacman主题</a>，由于jacman作者的<a href="http://jacman.wuchong.me/2014/11/20/how-to-use-jacman/" target="_blank" rel="external">教程</a> 较为详细，只需一步一步的操作，即可完成主题的设置。</p>
<h3 id="使用markdown写博客"><a href="#使用markdown写博客" class="headerlink" title="使用markdown写博客"></a>使用markdown写博客</h3><p>笔者在搭建博客之前从未接触过markdown，故首先下载了一个主流的markdown工具<a href="https://getremarkable.com/" target="_blank" rel="external">reMarkable</a> ,了解了markdown的基本语法后，整理了常用的markdown语法，希望对您有所帮助<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://p1.bqimg.com/567571/10524bb9033523f6.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>   </p>
<blockquote>
<p>如果您发现有的效果没有实现，不防加个空格试试。eg：<code>### 梦云智</code>（最后一个”#”和”梦”之间加空格）。</p>
</blockquote>
<h3 id="上传图片"><a href="#上传图片" class="headerlink" title="上传图片"></a>上传图片</h3><p>因为写博客时经常需要图片加以说明，因此需要上传图片的功能，笔者使用的<a href="https://chrome.google.com/webstore/detail/%E6%9E%81%E7%AE%80%E5%9B%BE%E5%BA%8A/heebflcbemenefckkgfnnklbhdbdkagg?hl=zh-CN" target="_blank" rel="external">极简图床</a> 上传图片，下载后，上传图片，并复制图片地址，就实现了图片的上传功能。</p>
<h3 id="站内搜索"><a href="#站内搜索" class="headerlink" title="站内搜索"></a>站内搜索</h3><p>折腾了百度站内搜索，没折腾出理想的效果，尝试了para，没有成功，最后无意中看到了<a href="https://swiftype.com/" target="_blank" rel="external">swiftype</a> ,效果可以再我的博客中尝试一下，推荐<a href="http://www.jerryfu.net/post/search-engine-for-hexo-with-swiftype-v2.html" target="_blank" rel="external">教程</a> 。相比于百度、Google的站内搜索，极力推荐swiftype。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>以上即为搭建个人博客的从无到有的过程。在搭建博客之前，可能会感觉需要过高的技术需求，但真正接触后，发现即使是一个技术小白，也完全有可能在较短的时间内搭建起自己的博客。相信读者只要有搭建博客的决心，就一定能如你所愿。Good Luck!</p>
<p>如有错误，欢迎指正！</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文主要简述搭建个人博客的全部流程，从搭建个人站点、学习hexo，到使用markdown写博客、实现上传图片的功能，对具体的技术细节不做讲述。工具：github账号、node、npm、hexo、极简图床、markdown、swiftype。&lt;/p&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="https://chuhang123.github.io/tags/hexo/"/>
    
  </entry>
  
</feed>
